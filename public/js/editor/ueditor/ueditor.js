define("ueditor/ueditor",["./baidu","./editor","./dom","./core/browser","./core/utils","./core/EventBase","./core/dtd","./core/domUtils","./core/Range","./core/Selection","./core/Editor","./core/node","./core/ajax","./ui/ui","./ui/uiutils","./ui/uibase","./ui/separator","./ui/mask","./ui/popup","./ui/colorpicker","./ui/tablepicker","./ui/stateful","./ui/button","./ui/splitbutton","./ui/colorbutton","./ui/tablebutton","./ui/autotypesetpicker","./ui/autotypesetbutton","./ui/cellalignpicker","./ui/pastepicker","./ui/toolbar","./ui/menu","./ui/combox","./ui/dialog","./ui/menubutton","./ui/editorui","./ui/editor","./ui/multiMenu","./ui/shortcutmenu","./ui/breakline","./plugins/autoheight","./plugins/autolink","./plugins/autotypeset","./plugins/basestyle","./plugins/blockquote","./plugins/cleardoc","./plugins/contextmenu","./plugins/convertcase","./plugins/defaultfilter","./plugins/directionality","./plugins/elementpath","./plugins/undo","./plugins/enterkey","./plugins/fiximgclick","./plugins/font","./plugins/formatmatch","./plugins/inserthtml","./plugins/horizontal","./plugins/image","./plugins/paragraph","./plugins/indent","./plugins/justify","./plugins/keystrokes","./plugins/lineheight","./plugins/list","./plugins/paste","./core/filterword","./core/filternode","./plugins/preview","./plugins/print","./plugins/puretxtpaste","./plugins/removeformat","./plugins/rowspacing","./plugins/selectall","./plugins/shortcutmenu","./plugins/source","./plugins/link","./plugins/table.core","./plugins/table.cmds","./plugins/table.action","./plugins/wordcount","./plugin","./myplugins/links/plugin","$","./myplugins/links/tpl/content","./lang/zh-cn/zh-cn"],function(e,t,n){e("./baidu");var i=e("./editor");e("./dom"),e("./core/browser"),e("./core/utils"),e("./core/EventBase"),e("./core/dtd"),e("./core/domUtils"),e("./core/Range"),e("./core/Selection"),e("./core/Editor"),e("./core/ajax"),e("./core/node"),e("./ui/ui"),e("./ui/uiutils"),e("./ui/uibase"),e("./ui/separator"),e("./ui/mask"),e("./ui/popup"),e("./ui/colorpicker"),e("./ui/tablepicker"),e("./ui/stateful"),e("./ui/button"),e("./ui/splitbutton"),e("./ui/colorbutton"),e("./ui/tablebutton"),e("./ui/autotypesetpicker"),e("./ui/autotypesetbutton"),e("./ui/cellalignpicker"),e("./ui/pastepicker"),e("./ui/toolbar"),e("./ui/menu"),e("./ui/combox"),e("./ui/dialog"),e("./ui/menubutton"),e("./ui/editorui"),e("./ui/editor"),e("./ui/multiMenu"),e("./ui/shortcutmenu"),e("./ui/breakline"),e("./plugins/autoheight"),e("./plugins/autolink"),e("./plugins/autotypeset"),e("./plugins/basestyle"),e("./plugins/blockquote"),e("./plugins/cleardoc"),e("./plugins/contextmenu"),e("./plugins/convertcase"),e("./plugins/defaultfilter"),e("./plugins/directionality"),e("./plugins/elementpath"),e("./plugins/undo"),e("./plugins/enterkey"),e("./plugins/fiximgclick"),e("./plugins/font"),e("./plugins/formatmatch"),e("./plugins/inserthtml"),e("./plugins/horizontal"),e("./plugins/image"),e("./plugins/paragraph"),e("./plugins/indent"),e("./plugins/justify"),e("./plugins/keystrokes"),e("./plugins/lineheight"),e("./plugins/list"),e("./plugins/paste"),e("./plugins/preview"),e("./plugins/print"),e("./plugins/puretxtpaste"),e("./plugins/removeformat"),e("./plugins/rowspacing"),e("./plugins/selectall"),e("./plugins/shortcutmenu"),e("./plugins/source"),e("./plugins/link"),e("./plugins/table.core"),e("./plugins/table.cmds"),e("./plugins/table.action"),e("./plugins/wordcount"),e("./plugin"),e("./myplugins/links/plugin"),e("./lang/zh-cn/zh-cn"),window.UE=i,n.exports=i}),define("ueditor/baidu",[],function(e,t,n){var i={};n.exports=i}),define("ueditor/editor",["./baidu"],function(e,t,n){var i=e("./baidu"),o=i.editor={};o.plugins={},o.commands={},o.instants={},o.I18N={},o.version="1.2.6.1",o.dom={},n.exports=o}),define("ueditor/dom",["./editor","./baidu"],function(e,t,n){var i=e("./editor"),o=i.dom={};n.exports=o}),define("ueditor/core/browser",["../editor","../baidu"],function(e,t,n){var i=e("../editor"),o=i.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,n={ie:!!window.ActiveXObject,opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,mac:e.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode};n.gecko="Gecko"==navigator.product&&!n.webkit&&!n.opera;var i=0;if(n.ie&&(i=parseFloat(e.match(/msie (\d+)/)[1]),n.ie9Compat=9==document.documentMode,n.ie8=!!document.documentMode,n.ie8Compat=8==document.documentMode,n.ie7Compat=7==i&&!document.documentMode||7==document.documentMode,n.ie6Compat=7>i||n.quirks),n.gecko){var o=e.match(/rv:([\d\.]+)/);o&&(o=o[1].split("."),i=1e4*o[0]+100*(o[1]||0)+1*(o[2]||0))}return/chrome\/(\d+\.\d)/i.test(e)&&(n.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)&&(n.safari=+(RegExp.$1||RegExp.$2)),n.opera&&(i=parseFloat(t.version())),n.webkit&&(i=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=i,n.isCompatible=!n.mobile&&(n.ie&&i>=6||n.gecko&&i>=10801||n.opera&&i>=9.5||n.air&&i>=1||n.webkit&&i>=522||!1),n}();o.ie,o.webkit,o.gecko,o.opera,n.exports=o}),define("ueditor/core/utils",["../editor","../baidu","./browser"],function(e,t,n){var i=e("../editor"),o=e("./browser"),r=i.utils={each:function(e,t,n){if(null!=e)if(e.length===+e.length){for(var i=0,o=e.length;o>i;i++)if(t.call(n,e[i],i,e)===!1)return!1}else for(var r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e)===!1)return!1},makeInstance:function(e){var t=Function();return t.prototype=e,e=new t,t.prototype=null,e},extend:function(e,t,n){if(t)for(var i in t)n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e},extend2:function(e){for(var t=arguments,n=1;t.length>n;n++){var i=t[n];for(var o in i)e.hasOwnProperty(o)||(e[o]=i[o])}return e},inherits:function(e,t){var n=e.prototype,i=r.makeInstance(t.prototype);return r.extend(i,n,!0),e.prototype=i,i.constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,n){var i;return function(){n&&clearTimeout(i),i=setTimeout(e,t)}},indexOf:function(e,t,n){var i=-1;return n=this.isNumber(n)?n:0,this.each(e,function(e,o){return o>=n&&e===t?(i=o,!1):void 0}),i},removeItem:function(e,t){for(var n=0,i=e.length;i>n;n++)e[n]===t&&(e.splice(n,1),n--)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=r.isArray(e)?e:e.split(",");for(var t,n=0,i={};t=e[n++];)i[t.toUpperCase()]=i[t]=1;return i},unhtml:function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp);)?/g,function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo)t|amp|#39);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'"}[e]}):""},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t={"float":void 0!=e.cssFloat?"cssFloat":void 0!=e.styleFloat?"styleFloat":"float"};return function(e){return t[e]||(t[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}}(),loadFile:function(){function e(e,n){try{for(var i,o=0;i=t[o++];)if(i.doc===e&&i.url==(n.src||n.href))return i}catch(r){return null}}var t=[];return function(n,i,o){var r=e(n,i);if(r)return r.ready?o&&o():r.funs.push(o),void 0;if(t.push({doc:n,url:i.src||i.href,funs:[o]}),!n.body){var a=[];for(var s in i)"tag"!=s&&a.push(s+'="'+i[s]+'"');return n.write("<"+i.tag+" "+a.join(" ")+" ></"+i.tag+">"),void 0}if(!i.id||!n.getElementById(i.id)){var l=n.createElement(i.tag);delete i.tag;for(var s in i)l.setAttribute(s,i[s]);l.onload=l.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(r=e(n,i),r.funs.length>0){r.ready=1;for(var t;t=r.funs.pop();)t()}l.onload=l.onreadystatechange=null}},l.onerror=function(){throw Error("The load "+(i.href||i.src)+" fails,check the url settings of file ueditor.config.js ")},n.getElementsByTagName("head")[0].appendChild(l)}}}(),isEmptyObject:function(e){if(null==e)return!0;if(this.isArray(e)||this.isString(e))return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var n=t.split(",");if(n.length>3)return"";t="#";for(var i,o=0;i=n[o++];)i=parseInt(i.replace(/[^\d]/gi,""),10).toString(16),t+=1==i.length?"0"+i:i;t=t.toUpperCase()}return t},optCss:function(e){function t(e,t){if(!e)return"";var n=e.top,i=e.bottom,o=e.left,r=e.right,a="";if(n&&o&&i&&r)a+=";"+t+":"+(n==i&&i==o&&o==r?n:n==i&&o==r?n+" "+o:o==r?n+" "+o+" "+i:n+" "+r+" "+i+" "+o)+";";else for(var s in e)a+=";"+t+"-"+s+":"+e[s]+";";return a}var n,i;return e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,t,o,r){if(1==r.split(" ").length)switch(t){case"padding":return!n&&(n={}),n[o]=r,"";case"margin":return!i&&(i={}),i[o]=r,"";case"border":return"initial"==r?"":e}return e}),e+=t(n,"padding")+t(i,"margin"),e.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},clone:function(e,t){var n;t=t||{};for(var i in e)e.hasOwnProperty(i)&&(n=e[i],"object"==typeof n?(t[i]=r.isArray(n)?[]:{},r.clone(e[i],t[i])):t[i]=n);return t},transUnitToPx:function(e){if(!/(pt|cm)/.test(e))return e;var t;switch(e.replace(/([\d.]+)(\w+)/,function(n,i,o){e=i,t=o}),t){case"cm":e=25*parseFloat(e);break;case"pt":e=Math.round(96*parseFloat(e)/72)}return e+(e?"px":"")},domReady:function(){function e(e){e.isReady=!0;for(var n;n=t.pop();n());}var t=[];return function(n,i){i=i||window;var r=i.document;n&&t.push(n),"complete"===r.readyState?e(r):(r.isReady&&e(r),o.ie?(function(){if(!r.isReady){try{r.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0}e(r)}}(),i.attachEvent("onload",function(){e(r)})):(r.addEventListener("DOMContentLoaded",function(){r.removeEventListener("DOMContentLoaded",arguments.callee,!1),e(r)},!1),i.addEventListener("load",function(){e(r)},!1)))}}(),cssRule:o.ie?function(e,t,n){var i,o;n=n||document,i=n.indexList?n.indexList:n.indexList={};var r;if(i[e])r=n.styleSheets[i[e]];else{if(void 0===t)return"";r=n.createStyleSheet("",o=n.styleSheets.length),i[e]=o}return void 0===t?r.cssText:(r.cssText=t||"",void 0)}:function(e,t,n){n=n||document;var i,o=n.getElementsByTagName("head")[0];if(!(i=n.getElementById(e))){if(void 0===t)return"";i=n.createElement("style"),i.id=e,o.appendChild(i)}return void 0===t?i.innerHTML:(""!==t?i.innerHTML=t:o.removeChild(i),void 0)},sort:function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var n=0,i=e.length;i>n;n++)for(var o=n,r=e.length;r>o;o++)if(t(e[n],e[o])>0){var a=e[n];e[n]=e[o],e[o]=a}return e}};r.each(["String","Function","Array","Number","RegExp","Object"],function(e){i.utils["is"+e]=function(t){return Object.prototype.toString.apply(t)=="[object "+e+"]"}}),n.exports=r}),define("ueditor/core/EventBase",["../editor","../baidu","./utils","./browser"],function(e,t,n){function i(e,t,n){var i;return t=t.toLowerCase(),(i=e.__allListeners||n&&(e.__allListeners={}))&&(i[t]||n&&(i[t]=[]))}var o=e("../editor"),r=e("./utils"),a=o.EventBase=function(){};a.prototype={addListener:function(e,t){e=r.trim(e).split(" ");for(var n,o=0;n=e[o++];)i(this,n,!0).push(t)},removeListener:function(e,t){e=r.trim(e).split(" ");for(var n,o=0;n=e[o++];)r.removeItem(i(this,n)||[],t)},fireEvent:function(){var e=arguments[0];e=r.trim(e).split(" ");for(var t,n=0;t=e[n++];){var o,a,s,l=i(this,t);if(l)for(s=l.length;s--;)if(l[s]){if(a=l[s].apply(this,arguments),a===!0)return a;void 0!==a&&(o=a)}(a=this["on"+t.toLowerCase()])&&(o=a.apply(this,arguments))}return o}},n.exports=a}),define("ueditor/core/dtd",["../editor","../baidu","../dom","./utils","./browser"],function(e,t,n){var i=e("../editor");e("../dom");var o=e("./utils"),r=i.dom.dtd=function(){function e(e){for(var t in e)e[t.toUpperCase()]=e[t];return e}var t=o.extend2,n=e({isindex:1,fieldset:1}),i=e({input:1,button:1,select:1,textarea:1,label:1}),r=t(e({a:1}),i),a=t({iframe:1},r),s=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),l=e({ins:1,del:1,script:1,style:1}),d=t(e({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),l),c=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),d),u=t(e({p:1}),c),f=t(e({iframe:1}),c,i),p=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),m=t(e({a:0}),f),h=e({tr:1}),g=e({"#":1}),v=t(e({param:1}),p),b=t(e({form:1}),n,a,s,u),y=e({li:1,ol:1,ul:1}),x=e({style:1,script:1}),C=e({base:1,link:1,meta:1,title:1}),N=t(C,x),w=e({head:1,body:1}),T=e({html:1}),k=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),S=e({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return e({$nonBodyContent:t(T,w,C),$block:k,$inline:m,$inlineWithA:t(e({a:1}),m),$body:t(e({script:1,style:1}),k),$cdata:e({script:1,style:1}),$empty:S,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:w,head:N,style:g,script:g,body:b,base:{},link:{},meta:{},title:g,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:b,td:b,br:{},th:b,center:b,kbd:m,button:t(u,s),basefont:{},h5:m,h4:m,samp:m,h6:m,ol:y,h1:m,h3:m,option:g,h2:m,form:t(n,a,s,u),select:e({optgroup:1,option:1}),font:m,ins:m,menu:y,abbr:m,label:m,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:m,tfoot:h,cite:m,li:b,input:{},iframe:b,strong:m,textarea:g,noframes:b,big:m,small:m,span:e({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:m,dt:m,sub:m,optgroup:e({option:1}),param:{},bdo:m,"var":m,div:b,object:v,sup:m,dd:b,strike:m,area:{},dir:y,map:t(e({area:1,form:1,p:1}),n,l,s),applet:v,dl:e({dt:1,dd:1}),del:m,isindex:{},fieldset:t(e({legend:1}),p),thead:h,ul:y,acronym:m,b:m,a:t(e({a:1}),f),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),b),caption:m,i:m,u:m,tbody:h,s:m,address:t(a,u),tt:m,legend:m,q:m,pre:t(d,r),p:t(e({a:1}),m),em:m,dfn:m})}();n.exports=r}),define("ueditor/core/domUtils",["../dom","../editor","../baidu","./utils","./browser","./dtd"],function(e,t,n){function i(e,t,n,o,r,a){var s,l=o&&e[t];for(!l&&(l=e[n]);!l&&(s=(s||e).parentNode);){if("BODY"==s.tagName||a&&!a(s))return null;l=s[n]}return l&&r&&!r(l)?i(l,t,n,!1,r):l}var o=e("../dom"),r=e("./utils"),a=e("./browser"),s=e("./dtd"),l=a.ie,d=l&&9>a.version?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},c=r.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),u=o.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:l&&"6"==a.version?"":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t)return 0;var n,i=[e],o=[t];for(n=e;n=n.parentNode;){if(n===t)return 10;i.push(n)}for(n=t;n=n.parentNode;){if(n===e)return 20;o.push(n)}if(i.reverse(),o.reverse(),i[0]!==o[0])return 1;for(var r=-1;r++,i[r]===o[r];);for(e=i[r],t=o[r];e=e.nextSibling;)if(e===t)return 4;return 2},getNodeIndex:function(e,t){for(var n=e,i=0;n=n.previousSibling;)t&&3==n.nodeType?n.nodeType!=n.nextSibling.nodeType&&i++:i++;return i},inDoc:function(e,t){return 10==u.getPosition(e,t)},findParent:function(e,t,n){if(e&&!u.isBody(e))for(e=n?e:e.parentNode;e;){if(!t||t(e)||u.isBody(e))return t&&!t(e)&&u.isBody(e)?null:e;e=e.parentNode}return null},findParentByTagName:function(e,t,n,i){return t=r.listToMap(r.isArray(t)?t:[t]),u.findParent(e,function(e){return t[e.tagName]&&!(i&&i(e))},n)},findParents:function(e,t,n,i){for(var o=t&&(n&&n(e)||!n)?[e]:[];e=u.findParent(e,n);)o.push(e);return i?o:o.reverse()},insertAfter:function(e,t){return e.parentNode.insertBefore(t,e.nextSibling)},remove:function(e,t){var n,i=e.parentNode;if(i){if(t&&e.hasChildNodes())for(;n=e.firstChild;)i.insertBefore(n,e);i.removeChild(e)}return e},getNextDomNode:function(e,t,n,o){return i(e,"firstChild","nextSibling",t,n,o)},isBookmarkNode:function(e){return 1==e.nodeType&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;for(var n=[e],i=[t],o=e,r=-1;o=o.parentNode;){if(o===t)return o;n.push(o)}for(o=t;o=o.parentNode;){if(o===e)return o;i.push(o)}for(n.reverse(),i.reverse();r++,n[r]===i[r];);return 0==r?null:n[r-1]},clearEmptySibling:function(e,t,n){function i(e,t){for(var n;e&&!u.isBookmarkNode(e)&&(u.isEmptyInlineElement(e)||!RegExp("[^	\n\r"+u.fillChar+"]").test(e.nodeValue));)n=e[t],u.remove(e),e=n}!t&&i(e.nextSibling,"nextSibling"),!n&&i(e.previousSibling,"previousSibling")},split:function(e,t){var n=e.ownerDocument;if(a.ie&&t==e.nodeValue.length){var i=n.createTextNode("");return u.insertAfter(e,i)}var o=e.splitText(t);if(a.ie8){var r=n.createTextNode("");u.insertAfter(o,r),u.remove(r)}return o},isWhitespace:function(e){return!RegExp("[^ 	\n\r"+u.fillChar+"]").test(e.nodeValue)},getXY:function(e){for(var t=0,n=0;e.offsetParent;)n+=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{x:t,y:n}},on:function(e,t,n){var i=r.isArray(t)?t:[t],o=i.length;if(o)for(;o--;)if(t=i[o],e.addEventListener)e.addEventListener(t,n,!1);else{n._d||(n._d={els:[]});var a=t+(""+n),s=r.indexOf(n._d.els,e);n._d[a]&&-1!=s||(-1==s&&n._d.els.push(e),n._d[a]||(n._d[a]=function(e){return n.call(e.srcElement,e||window.event)}),e.attachEvent("on"+t,n._d[a]))}e=null},un:function(e,t,n){var i=r.isArray(t)?t:[t],o=i.length;if(o)for(;o--;)if(t=i[o],e.removeEventListener)e.removeEventListener(t,n,!1);else{var a=t+(""+n);try{e.detachEvent("on"+t,n._d?n._d[a]:n)}catch(s){}if(n._d&&n._d[a]){var l=r.indexOf(n._d.els,e);-1!=l&&n._d.els.splice(l,1),0==n._d.els.length&&delete n._d[a]}}},isSameElement:function(e,t){if(e.tagName!=t.tagName)return!1;var n=e.attributes,i=t.attributes;if(!l&&n.length!=i.length)return!1;for(var o,r,a=0,s=0,d=0;o=n[d++];){if("style"==o.nodeName){if(o.specified&&a++,u.isSameStyle(e,t))continue;return!1}if(l){if(!o.specified)continue;a++,r=i.getNamedItem(o.nodeName)}else r=t.attributes[o.nodeName];if(!r.specified||o.nodeValue!=r.nodeValue)return!1}if(l){for(d=0;r=i[d++];)r.specified&&s++;if(a!=s)return!1}return!0},isSameStyle:function(e,t){var n=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),i=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(a.opera){if(n=e.style,i=t.style,n.length!=i.length)return!1;for(var o in n)if(!/^(\d+|csstext)$/i.test(o)&&n[o]!=i[o])return!1;return!0}if(!n||!i)return n==i;if(n=n.split(";"),i=i.split(";"),n.length!=i.length)return!1;for(var s,l=0;s=n[l++];)if(-1==r.indexOf(i,s))return!1;return!0},isBlockElm:function(e){return 1==e.nodeType&&(s.$block[e.tagName]||c[u.getComputedStyle(e,"display")])&&!s.$nonChild[e.tagName]},isBody:function(e){return e&&1==e.nodeType&&"body"==e.tagName.toLowerCase()},breakParent:function(e,t){var n,i,o,r=e,a=e;do{for(r=r.parentNode,i?(n=r.cloneNode(!1),n.appendChild(i),i=n,n=r.cloneNode(!1),n.appendChild(o),o=n):(i=r.cloneNode(!1),o=i.cloneNode(!1));n=a.previousSibling;)i.insertBefore(n,i.firstChild);for(;n=a.nextSibling;)o.appendChild(n);a=r}while(t!==r);return n=t.parentNode,n.insertBefore(i,t),n.insertBefore(o,t),n.insertBefore(e,o),u.remove(t),e},isEmptyInlineElement:function(e){if(1!=e.nodeType||!s.$removeEmpty[e.tagName])return 0;for(e=e.firstChild;e;){if(u.isBookmarkNode(e))return 0;if(1==e.nodeType&&!u.isEmptyInlineElement(e)||3==e.nodeType&&!u.isWhitespace(e))return 0;e=e.nextSibling}return 1},trimWhiteTextNode:function(e){function t(t){for(var n;(n=e[t])&&3==n.nodeType&&u.isWhitespace(n);)e.removeChild(n)}t("firstChild"),t("lastChild")},mergeChild:function(e,t,n){for(var i,o=u.getElementsByTagName(e,e.tagName.toLowerCase()),a=0;i=o[a++];)if(i.parentNode&&!u.isBookmarkNode(i))if("span"!=i.tagName.toLowerCase())u.isSameElement(e,i)&&u.remove(i,!0);else{if(e===i.parentNode&&(u.trimWhiteTextNode(e),1==e.childNodes.length)){e.style.cssText=i.style.cssText+";"+e.style.cssText,u.remove(i,!0);continue}if(i.style.cssText=e.style.cssText+";"+i.style.cssText,n){var s=n.style;if(s){s=s.split(";");for(var l,d=0;l=s[d++];)i.style[r.cssStyleToDomStyle(l.split(":")[0])]=l.split(":")[1]}}u.isSameStyle(i,e)&&u.remove(i,!0)}},getElementsByTagName:function(e,t,n){if(n&&r.isString(n)){var i=n;n=function(e){return u.hasClass(e,i)}}t=r.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var o,a=[],s=0;o=t[s++];)for(var l,d=e.getElementsByTagName(o),c=0;l=d[c++];)(!n||n(l))&&a.push(l);return a},mergeToParent:function(e){for(var t=e.parentNode;t&&s.$removeEmpty[t.tagName];){if(t.tagName==e.tagName||"A"==t.tagName){if(u.trimWhiteTextNode(t),"SPAN"==t.tagName&&!u.isSameStyle(t,e)||"A"==t.tagName&&"SPAN"==e.tagName){if(t.childNodes.length>1||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText,t=t.parentNode;continue}t.style.cssText+=";"+e.style.cssText,"A"==t.tagName&&(t.style.textDecoration="underline")}if("A"!=t.tagName){t===e.parentNode&&u.remove(e,!0);break}}t=t.parentNode}},mergeSibling:function(e,t,n){function i(e,t,n){var i;if((i=n[e])&&!u.isBookmarkNode(i)&&1==i.nodeType&&u.isSameElement(n,i)){for(;i.firstChild;)"firstChild"==t?n.insertBefore(i.lastChild,n.firstChild):n.appendChild(i.firstChild);u.remove(i)}}!t&&i("previousSibling","firstChild",e),!n&&i("nextSibling","lastChild",e)},unSelectable:l||a.opera?function(e){e.onselectstart=function(){return!1},e.onclick=e.onkeyup=e.onkeydown=function(){return!1},e.unselectable="on",e.setAttribute("unselectable","on");for(var t,n=0;t=e.all[n++];)switch(t.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:t.unselectable="on",e.setAttribute("unselectable","on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){t=r.isArray(t)?t:r.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0;n=t[i++];){switch(n=d[n]||n){case"className":e[n]="";break;case"style":e.style.cssText="",!a.ie&&e.removeAttributeNode(e.getAttributeNode("style"))}e.removeAttribute(n)}},createElement:function(e,t,n){return u.setAttributes(e.createElement(t),n)},setAttributes:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];switch(n){case"class":e.className=i;break;case"style":e.style.cssText=e.style.cssText+";"+i;break;case"innerHTML":e[n]=i;break;case"value":e.value=i;break;default:e.setAttribute(d[n]||n,i)}}return e},getComputedStyle:function(e,t){var n="width height top left";if(n.indexOf(t)>-1)return e["offset"+t.replace(/^\w/,function(e){return e.toUpperCase()})]+"px";if(3==e.nodeType&&(e=e.parentNode),a.ie&&9>a.version&&"font-size"==t&&!e.style.fontSize&&!s.$empty[e.tagName]&&!s.$nonChild[e.tagName]){var i=e.ownerDocument.createElement("span");i.style.cssText="padding:0;border:0;font-family:simsun;",i.innerHTML=".",e.appendChild(i);var o=i.offsetHeight;return e.removeChild(i),i=null,o+"px"}try{var l=u.getStyle(e,t)||(window.getComputedStyle?u.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[r.cssStyleToDomStyle(t)])}catch(d){return""}return r.transUnitToPx(r.fixColor(t,l))},removeClasses:function(e,t){t=r.isArray(t)?t:r.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0,o=e.className;n=t[i++];)o=o.replace(RegExp("\\b"+n+"\\b"),"");o=r.trim(o).replace(/[ ]{2,}/g," "),o?e.className=o:u.removeAttributes(e,["class"])},addClass:function(e,t){if(e){t=r.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0,o=e.className;n=t[i++];)RegExp("\\b"+n+"\\b").test(o)||(e.className+=" "+n)}},hasClass:function(e,t){if(r.isRegExp(t))return t.test(e.className);t=r.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0,o=e.className;n=t[i++];)if(!RegExp("\\b"+n+"\\b","i").test(o))return!1;return i-1==t.length},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},removeStyle:function(e,t){a.ie?("color"==t&&(t="(^|;)"+t),e.style.cssText=e.style.cssText.replace(RegExp(t+"[^:]*:[^;]+;?","ig"),"")):e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(r.cssStyleToDomStyle(t)),e.style.cssText||u.removeAttributes(e,["style"])},getStyle:function(e,t){var n=e.style[r.cssStyleToDomStyle(t)];return r.fixColor(t,n)},setStyle:function(e,t,n){e.style[r.cssStyleToDomStyle(t)]=n,r.trim(e.style.cssText)||this.removeAttributes(e,"style")},setStyles:function(e,t){for(var n in t)t.hasOwnProperty(n)&&u.setStyle(e,n,t[n])},removeDirtyAttr:function(e){for(var t,n=0,i=e.getElementsByTagName("*");t=i[n++];)t.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var n=0,i=e.firstChild;for(t=t||function(){return 1};i;)t(i)&&n++,i=i.nextSibling;return n},isEmptyNode:function(e){return!e.firstChild||0==u.getChildCount(e,function(e){return!u.isBr(e)&&!u.isBookmarkNode(e)&&!u.isWhitespace(e)})},clearSelectedArr:function(e){for(var t;t=e.pop();)u.removeAttributes(t,["class"])},scrollToView:function(e,t,n){var i=function(){var e=t.document,n="CSS1Compat"==e.compatMode;return{width:(n?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(n?e.documentElement.clientHeight:e.body.clientHeight)||0}},o=function(e){if("pageXOffset"in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},r=i().height,a=-1*r+n;a+=e.offsetHeight||0;var s=u.getXY(e);a+=s.y;var l=o(t).y;(a>l||l-r>a)&&t.scrollTo(0,a+(0>a?-20:20))},isBr:function(e){return 1==e.nodeType&&"BR"==e.tagName},isFillChar:function(e,t){return 3==e.nodeType&&!e.nodeValue.replace(RegExp((t?"^":"")+u.fillChar),"").length},isStartInblock:function(e){var t,n=e.cloneRange(),i=0,o=n.startContainer;if(1==o.nodeType&&o.childNodes[n.startOffset]){o=o.childNodes[n.startOffset];for(var r=o.previousSibling;r&&u.isFillChar(r);)o=r,r=r.previousSibling}for(this.isFillChar(o,!0)&&1==n.startOffset&&(n.setStartBefore(o),o=n.startContainer);o&&u.isFillChar(o);)t=o,o=o.previousSibling;for(t&&(n.setStartBefore(t),o=n.startContainer),1==o.nodeType&&u.isEmptyNode(o)&&1==n.startOffset&&n.setStart(o,0).collapse(!0);!n.startOffset;){if(o=n.startContainer,u.isBlockElm(o)||u.isBody(o)){i=1;break}var a,r=n.startContainer.previousSibling;if(r){for(;r&&u.isFillChar(r);)a=r,r=r.previousSibling;a?n.setStartBefore(a):n.setStartBefore(n.startContainer)}else n.setStartBefore(n.startContainer)}return i&&!u.isBody(n.startContainer)?1:0},isEmptyBlock:function(e,t){if(1!=e.nodeType)return 0;if(t=t||RegExp("[ 	\r\n"+u.fillChar+"]","g"),e[a.ie?"innerText":"textContent"].replace(t,"").length>0)return 0;for(var n in s.$isNotEmpty)if(e.getElementsByTagName(n).length)return 0;return 1},setViewportOffset:function(e,t){var n=0|parseInt(e.style.left),i=0|parseInt(e.style.top),o=e.getBoundingClientRect(),r=t.left-o.left,a=t.top-o.top;r&&(e.style.left=n+r+"px"),a&&(e.style.top=i+a+"px")},fillNode:function(e,t){var n=a.ie?e.createTextNode(u.fillChar):e.createElement("br");t.innerHTML="",t.appendChild(n)},moveChild:function(e,t,n){for(;e.firstChild;)n&&t.firstChild?t.insertBefore(e.lastChild,t.firstChild):t.appendChild(e.firstChild)},hasNoAttributes:function(e){return a.ie?/^<\w+\s*?>/.test(e.outerHTML):0==e.attributes.length},isCustomeNode:function(e){return 1==e.nodeType&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return 1==e.nodeType&&RegExp("^"+e.tagName+"$","i").test(t)},filterNodeList:function(e,t,n){var i=[];if(!r.isFunction(t)){var o=t;t=function(e){return-1!=r.indexOf(r.isArray(o)?o:o.split(" "),e.tagName.toLowerCase())}}return r.each(e,function(e){t(e)&&i.push(e)}),0==i.length?null:1!=i.length&&n?i:i[0]},isInNodeEndBoundary:function(e,t){var n=e.startContainer;if(3==n.nodeType&&e.startOffset!=n.nodeValue.length)return 0;if(1==n.nodeType&&e.startOffset!=n.childNodes.length)return 0;for(;n!==t;){if(n.nextSibling)return 0;n=n.parentNode}return 1},isBoundaryNode:function(e,t){for(var n;!u.isBody(e);)if(n=e,e=e.parentNode,n!==e[t])return!1;return!0}};RegExp(u.fillChar,"g"),u.getDomNode=i,n.exports=u}),define("ueditor/core/Range",["../dom","../editor","../baidu","./utils","./browser","./domUtils","./dtd"],function(e,t,n){var i=e("../dom"),o=e("./utils"),r=e("./browser"),a=e("./domUtils"),s=e("./dtd"),l=RegExp(a.fillChar,"g");(function(){function e(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer===e.endContainer&&e.startOffset==e.endOffset}function t(e){return!e.collapsed&&1==e.startContainer.nodeType&&e.startContainer===e.endContainer&&1==e.endOffset-e.startOffset}function d(t,n,i,o){return 1==n.nodeType&&(s.$empty[n.tagName]||s.$nonChild[n.tagName])&&(i=a.getNodeIndex(n)+(t?0:1),n=n.parentNode),t?(o.startContainer=n,o.startOffset=i,o.endContainer||o.collapse(!0)):(o.endContainer=n,o.endOffset=i,o.startContainer||o.collapse(!1)),e(o),o}function c(e,t){var n,i,o=e.startContainer,r=e.endContainer,s=e.startOffset,l=e.endOffset,d=e.document,c=d.createDocumentFragment();if(1==o.nodeType&&(o=o.childNodes[s]||(n=o.appendChild(d.createTextNode("")))),1==r.nodeType&&(r=r.childNodes[l]||(i=r.appendChild(d.createTextNode("")))),o===r&&3==o.nodeType)return c.appendChild(d.createTextNode(o.substringData(s,l-s))),t&&(o.deleteData(s,l-s),e.collapse(!0)),c;for(var u,f,p=c,m=a.findParents(o,!0),h=a.findParents(r,!0),g=0;m[g]==h[g];)g++;for(var v,b=g;v=m[b];b++){for(u=v.nextSibling,v==o?n||(3==e.startContainer.nodeType?(p.appendChild(d.createTextNode(o.nodeValue.slice(s))),t&&o.deleteData(s,o.nodeValue.length-s)):p.appendChild(t?o:o.cloneNode(!0))):(f=v.cloneNode(!1),p.appendChild(f));u&&u!==r&&u!==h[b];)v=u.nextSibling,p.appendChild(t?u:u.cloneNode(!0)),u=v;p=f}p=c,m[g]||(p.appendChild(m[g-1].cloneNode(!1)),p=p.firstChild);for(var y,b=g;y=h[b];b++){if(u=y.previousSibling,y==r?i||3!=e.endContainer.nodeType||(p.appendChild(d.createTextNode(r.substringData(0,l))),t&&r.deleteData(0,l)):(f=y.cloneNode(!1),p.appendChild(f)),b!=g||!m[g])for(;u&&u!==o;)y=u.previousSibling,p.insertBefore(t?u:u.cloneNode(!0),p.firstChild),u=y;p=f}return t&&e.setStartBefore(h[g]?m[g]?h[g]:m[g-1]:h[g-1]).collapse(!0),n&&a.remove(n),i&&a.remove(i),c}function u(e,t){try{if(p&&a.inDoc(p,e))if(p.nodeValue.replace(l,"").length)p.nodeValue=p.nodeValue.replace(l,"");else{var n=p.parentNode;for(a.remove(p);n&&a.isEmptyInlineElement(n)&&(r.safari?!(a.getPosition(n,t)&a.POSITION_CONTAINS):!n.contains(t));)p=n.parentNode,a.remove(n),n=p}}catch(i){}}function f(e,t){var n;
for(e=e[t];e&&a.isFillChar(e);)n=e[t],a.remove(e),e=n}var p,m=0,h=a.fillChar,g=i.Range=function(e){var t=this;t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.document=e,t.collapsed=!0};g.prototype={cloneContents:function(){return this.collapsed?null:c(this,0)},deleteContents:function(){var e;return this.collapsed||c(this,1),r.webkit&&(e=this.startContainer,3!=e.nodeType||e.nodeValue.length||(this.setStartBefore(e).collapse(!0),a.remove(e))),this},extractContents:function(){return this.collapsed?null:c(this,2)},setStart:function(e,t){return d(!0,e,t,this)},setEnd:function(e,t){return d(!1,e,t,this)},setStartAfter:function(e){return this.setStart(e.parentNode,a.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,a.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,a.getNodeIndex(e)+1)},setEndBefore:function(e){return this.setEnd(e.parentNode,a.getNodeIndex(e))},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEndAtLast(e)},cloneRange:function(){var e=this;return new g(e.document).setStart(e.startContainer,e.startOffset).setEnd(e.endContainer,e.endOffset)},collapse:function(e){var t=this;return e?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0,t},shrinkBoundary:function(e){function t(e){return 1==e.nodeType&&!a.isBookmarkNode(e)&&!s.$empty[e.tagName]&&!s.$nonChild[e.tagName]}for(var n,i=this,o=i.collapsed;1==i.startContainer.nodeType&&(n=i.startContainer.childNodes[i.startOffset])&&t(n);)i.setStart(n,0);if(o)return i.collapse(!0);if(!e)for(;1==i.endContainer.nodeType&&i.endOffset>0&&(n=i.endContainer.childNodes[i.endOffset-1])&&t(n);)i.setEnd(n,n.childNodes.length);return i},getCommonAncestor:function(e,n){var i=this,o=i.startContainer,r=i.endContainer;return o===r?e&&t(this)&&(o=o.childNodes[i.startOffset],1==o.nodeType)?o:n&&3==o.nodeType?o.parentNode:o:a.getCommonAncestor(o,r)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,n=this.startOffset,i=this.collapsed,o=this.endContainer;if(3==t.nodeType){if(0==n)this.setStartBefore(t);else if(n>=t.nodeValue.length)this.setStartAfter(t);else{var r=a.split(t,n);t===o?this.setEnd(r,this.endOffset-n):t.parentNode===o&&(this.endOffset+=1),this.setStartBefore(r)}if(i)return this.collapse(!0)}return e||(n=this.endOffset,o=this.endContainer,3==o.nodeType&&(0==n?this.setEndBefore(o):(o.nodeValue.length>n&&a.split(o,n),this.setEndAfter(o)))),this},txtToElmBoundary:function(e){function t(e,t){var n=e[t+"Container"],i=e[t+"Offset"];3==n.nodeType&&(i?i>=n.nodeValue.length&&e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](n):e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](n))}return(e||!this.collapsed)&&(t(this,"start"),t(this,"end")),this},insertNode:function(e){var t=e,n=1;11==e.nodeType&&(t=e.firstChild,n=e.childNodes.length),this.trimBoundary(!0);var i=this.startContainer,o=this.startOffset,r=i.childNodes[o];return r?i.insertBefore(e,r):i.appendChild(e),t.parentNode===this.endContainer&&(this.endOffset=this.endOffset+n),this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(e,t){var n,i=this.document.createElement("span");return i.style.cssText="display:none;line-height:0px;",i.appendChild(this.document.createTextNode("‍")),i.id="_baidu_bookmark_start_"+(t?"":m++),this.collapsed||(n=i.cloneNode(!0),n.id="_baidu_bookmark_end_"+(t?"":m++)),this.insertNode(i),n&&this.collapse().insertNode(n).setEndBefore(n),this.setStartAfter(i),{start:e?i.id:i,end:n?e?n.id:n:null,id:e}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start,n=e.end&&e.id?this.document.getElementById(e.end):e.end;return this.setStartBefore(t),a.remove(t),n?(this.setEndBefore(n),a.remove(n)):this.collapse(!0),this},enlarge:function(e,t){var n,i,o=a.isBody,r=this.document.createTextNode("");if(e){for(i=this.startContainer,1==i.nodeType?i.childNodes[this.startOffset]?n=i=i.childNodes[this.startOffset]:(i.appendChild(r),n=i=r):n=i;;){if(a.isBlockElm(i)){for(i=n;(n=i.previousSibling)&&!a.isBlockElm(n);)i=n;this.setStartBefore(i);break}n=i,i=i.parentNode}for(i=this.endContainer,1==i.nodeType?((n=i.childNodes[this.endOffset])?i.insertBefore(r,n):i.appendChild(r),n=i=r):n=i;;){if(a.isBlockElm(i)){for(i=n;(n=i.nextSibling)&&!a.isBlockElm(n);)i=n;this.setEndAfter(i);break}n=i,i=i.parentNode}r.parentNode===this.endContainer&&this.endOffset--,a.remove(r)}if(!this.collapsed){for(;!(0!=this.startOffset||t&&t(this.startContainer)||o(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||t&&t(this.endContainer)||o(this.endContainer));)this.setEndAfter(this.endContainer)}return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!a.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!a.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(e,t,n){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(e){return 1==e.nodeType&&a.isBlockElm(e)}).adjustmentBoundary();for(var i,o,r=this.createBookmark(),l=r.end,d=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!a.isWhitespace(e)},c=a.getNextDomNode(r.start,!1,d),u=this.cloneRange();c&&a.getPosition(c,l)&a.POSITION_PRECEDING;)if(3==c.nodeType||s[e][c.tagName]){for(u.setStartBefore(c),i=c;i&&(3==i.nodeType||s[e][i.tagName])&&i!==l;)o=i,i=a.getNextDomNode(i,1==i.nodeType,null,function(t){return s[e][t.tagName]});var f,p=u.setEndAfter(o).extractContents();if(n&&n.length>0){var m,h;h=m=n[0].cloneNode(!1);for(var g,v=1;g=n[v++];)m.appendChild(g.cloneNode(!1)),m=m.firstChild;f=m}else f=u.document.createElement(e);t&&a.setAttributes(f,t),f.appendChild(p),u.insertNode(n?h:f);var b;if("span"==e&&t.style&&/text\-decoration/.test(t.style)&&(b=a.findParentByTagName(f,"a",!0))?(a.setAttributes(b,t),a.remove(f,!0),f=b):(a.mergeSibling(f),a.clearEmptySibling(f)),a.mergeChild(f,t),c=a.getNextDomNode(f,!1,d),a.mergeToParent(f),i===l)break}else c=a.getNextDomNode(c,!0,d);return this.moveToBookmark(r)},removeInlineStyle:function(e){if(this.collapsed)return this;e=o.isArray(e)?e:[e],this.shrinkBoundary().adjustmentBoundary();for(var t=this.startContainer,n=this.endContainer;;){if(1==t.nodeType){if(o.indexOf(e,t.tagName.toLowerCase())>-1)break;if("body"==t.tagName.toLowerCase()){t=null;break}}t=t.parentNode}for(;;){if(1==n.nodeType){if(o.indexOf(e,n.tagName.toLowerCase())>-1)break;if("body"==n.tagName.toLowerCase()){n=null;break}}n=n.parentNode}var i,r,s=this.createBookmark();t&&(r=this.cloneRange().setEndBefore(s.start).setStartBefore(t),i=r.extractContents(),r.insertNode(i),a.clearEmptySibling(t,!0),t.parentNode.insertBefore(s.start,t)),n&&(r=this.cloneRange().setStartAfter(s.end).setEndAfter(n),i=r.extractContents(),r.insertNode(i),a.clearEmptySibling(n,!1,!0),n.parentNode.insertBefore(s.end,n.nextSibling));for(var l,d=a.getNextDomNode(s.start,!1,function(e){return 1==e.nodeType});d&&d!==s.end;)l=a.getNextDomNode(d,!0,function(e){return 1==e.nodeType}),o.indexOf(e,d.tagName.toLowerCase())>-1&&a.remove(d,!0),d=l;return this.moveToBookmark(s)},getClosedNode:function(){var e;if(!this.collapsed){var n=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(t(n)){var i=n.startContainer.childNodes[n.startOffset];i&&1==i.nodeType&&(s.$empty[i.tagName]||s.$nonChild[i.tagName])&&(e=i)}}return e},select:r.ie?function(e,t){var n;this.collapsed||this.shrinkBoundary();var i=this.getClosedNode();if(i&&!t){try{n=this.document.body.createControlRange(),n.addElement(i),n.select()}catch(o){}return this}var r,s=this.createBookmark(),l=s.start;if(n=this.document.body.createTextRange(),n.moveToElementText(l),n.moveStart("character",1),this.collapsed){if(!e&&3!=this.startContainer.nodeType){var d=this.document.createTextNode(h),c=this.document.createElement("span");c.appendChild(this.document.createTextNode(h)),l.parentNode.insertBefore(c,l),l.parentNode.insertBefore(d,l),u(this.document,d),p=d,f(c,"previousSibling"),f(l,"nextSibling"),n.moveStart("character",-1),n.collapse(!0)}}else{var m=this.document.body.createTextRange();r=s.end,m.moveToElementText(r),n.setEndPoint("EndToEnd",m)}this.moveToBookmark(s),c&&a.remove(c);try{n.select()}catch(o){}return this}:function(e){function t(e){function t(t,n,i){3==t.nodeType&&n>t.nodeValue.length&&(e[i+"Offset"]=t.nodeValue.length)}t(e.startContainer,e.startOffset,"start"),t(e.endContainer,e.endOffset,"end")}var n,i=a.getWindow(this.document),o=i.getSelection();if(r.gecko?this.document.body.focus():i.focus(),o){if(o.removeAllRanges(),this.collapsed&&!e){var s=this.startContainer,l=s;1==s.nodeType&&(l=s.childNodes[this.startOffset]),3==s.nodeType&&this.startOffset||(l?l.previousSibling&&3==l.previousSibling.nodeType:s.lastChild&&3==s.lastChild.nodeType)||(n=this.document.createTextNode(h),this.insertNode(n),u(this.document,n),f(n,"previousSibling"),f(n,"nextSibling"),p=n,this.setStart(n,r.webkit?1:0).collapse(!0))}var d=this.document.createRange();if(this.collapsed&&r.opera&&1==this.startContainer.nodeType){var l=this.startContainer.childNodes[this.startOffset];if(l){for(;l&&a.isBlockElm(l)&&1==l.nodeType&&l.childNodes[0];)l=l.childNodes[0];l&&this.setStartBefore(l).collapse(!0)}else l=this.startContainer.lastChild,l&&a.isBr(l)&&this.setStartBefore(l).collapse(!0)}t(this),d.setStart(this.startContainer,this.startOffset),d.setEnd(this.endContainer,this.endOffset),o.addRange(d)}return this},scrollToView:function(e,t){e=e?window:a.getWindow(this.document);var n=this,i=n.document.createElement("span");return i.innerHTML="&nbsp;",n.cloneRange().insertNode(i),a.scrollToView(i,e,t),a.remove(i),n},inFillChar:function(){var e=this.startContainer;return this.collapsed&&3==e.nodeType&&e.nodeValue.replace(RegExp("^"+a.fillChar),"").length+1==e.nodeValue.length?!0:!1},createAddress:function(e,t){function n(e){for(var n,i=e?o.startContainer:o.endContainer,r=a.findParents(i,!0,function(e){return!a.isBody(e)}),s=[],d=0;n=r[d++];)s.push(a.getNodeIndex(n,t));var c=0;if(t)if(3==i.nodeType){for(var u=i.previousSibling;u&&3==u.nodeType;)c+=u.nodeValue.replace(l,"").length,u=u.previousSibling;c+=e?o.startOffset:o.endOffset}else if(i=i.childNodes[e?o.startOffset:o.endOffset])c=a.getNodeIndex(i,t);else{i=e?o.startContainer:o.endContainer;for(var f=i.firstChild;f;)if(a.isFillChar(f))f=f.nextSibling;else if(c++,3==f.nodeType)for(;f&&3==f.nodeType;)f=f.nextSibling;else f=f.nextSibling}else c=e?a.isFillChar(i)?0:o.startOffset:o.endOffset;return 0>c&&(c=0),s.push(c),s}var i={},o=this;return i.startAddress=n(!0),e||(i.endAddress=o.collapsed?[].concat(i.startAddress):n()),i},moveToAddress:function(e,t){function n(e,t){for(var n,o,r,a=i.document.body,s=0,l=e.length;l>s;s++)if(r=e[s],n=a,a=a.childNodes[r],!a){o=r;break}t?a?i.setStartBefore(a):i.setStart(n,o):a?i.setEndBefore(a):i.setEnd(n,o)}var i=this;return n(e.startAddress,!0),!t&&e.endAddress&&n(e.endAddress),i},equals:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]!==e[t])return!1;return!0},traversal:function(e,t){if(this.collapsed)return this;for(var n=this.createBookmark(),i=n.end,o=a.getNextDomNode(n.start,!1,t);o&&o!==i&&a.getPosition(o,i)&a.POSITION_PRECEDING;){var r=a.getNextDomNode(o,!1,t);e(o),o=r}return this.moveToBookmark(n)}},n.exports=g})()}),define("ueditor/core/Selection",["../dom","../editor","../baidu","./browser","./domUtils","./utils","./dtd","./Range"],function(e,t,n){var i=e("../dom"),o=e("./browser"),r=e("./domUtils"),a=e("./dtd"),s=e("./Range"),l=o.ie;(function(){function e(e,t){var n=r.getNodeIndex;e=e.duplicate(),e.collapse(t);var i=e.parentElement();if(!i.hasChildNodes())return{container:i,offset:0};for(var o,s,l=i.children,d=e.duplicate(),c=0,u=l.length-1,f=-1;u>=c;){f=Math.floor((c+u)/2),o=l[f],d.moveToElementText(o);var p=d.compareEndPoints("StartToStart",e);if(p>0)u=f-1;else{if(!(0>p))return{container:i,offset:n(o)};c=f+1}}if(-1==f){if(d.moveToElementText(i),d.setEndPoint("StartToStart",e),s=d.text.replace(/(\r\n|\r)/g,"\n").length,l=i.childNodes,!s)return o=l[l.length-1],{container:o,offset:o.nodeValue.length};for(var m=l.length;s>0;)s-=l[--m].nodeValue.length;return{container:l[m],offset:-s}}if(d.collapse(p>0),d.setEndPoint(p>0?"StartToStart":"EndToStart",e),s=d.text.replace(/(\r\n|\r)/g,"\n").length,!s)return a.$empty[o.tagName]||a.$nonChild[o.tagName]?{container:i,offset:n(o)+(p>0?0:1)}:{container:o,offset:p>0?0:o.childNodes.length};for(;s>0;)try{var h=o;o=o[p>0?"previousSibling":"nextSibling"],s-=o.nodeValue.length}catch(g){return{container:i,offset:n(h)}}return{container:o,offset:p>0?-s:o.nodeValue.length+s}}function t(t,n){if(t.item)n.selectNode(t.item(0));else{var i=e(t,!0);n.setStart(i.container,i.offset),0!=t.compareEndPoints("StartToEnd",t)&&(i=e(t,!1),n.setEnd(i.container,i.offset))}return n}function d(e){var t;try{t=e.getNative().createRange()}catch(n){return null}var i=t.item?t.item(0):t.parentElement();return(i.ownerDocument||i)===e.document?t:null}var c=i.Selection=function(e){var t,n=this;n.document=e,l&&(t=r.getWindow(e).frameElement,r.on(t,"beforedeactivate",function(){n._bakIERange=n.getIERange()}),r.on(t,"activate",function(){try{!d(n)&&n._bakIERange&&n._bakIERange.select()}catch(e){}n._bakIERange=null})),t=e=null};c.prototype={getNative:function(){var e=this.document;try{return e?l&&9>o.ie?e.selection:r.getWindow(e).getSelection():null}catch(t){return null}},getIERange:function(){var e=d(this);return!e&&this._bakIERange?this._bakIERange:e},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var e=this.getStart();return e?r.findParents(e,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{return o.ie&&d(this)||!o.ie&&this.getNative().rangeCount?!0:!1}catch(e){return!1}},getRange:function(){function e(e){for(var t=n.document.body.firstChild,i=e.collapsed;t&&t.firstChild;)e.setStart(t,0),t=t.firstChild;e.startContainer||e.setStart(n.document.body,0),i&&e.collapse(!0)}var n=this;if(null!=n._cachedRange)return this._cachedRange;var i=new s(n.document);if(l&&9>o.ie){var a=n.getIERange();if(a)try{t(a,i)}catch(d){e(i)}else e(i)}else{var c=n.getNative();if(c&&c.rangeCount){var u=c.getRangeAt(0),f=c.getRangeAt(c.rangeCount-1);i.setStart(u.startContainer,u.startOffset).setEnd(f.endContainer,f.endOffset),i.collapsed&&r.isBody(i.startContainer)&&!i.startOffset&&e(i)}else{if(this._bakRange&&r.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;e(i)}}return this._bakRange=i},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var e,t,n,i,o=l?this.getIERange():this.getRange();if(l){if(!o)return this.document.body.firstChild;if(o.item)return o.item(0);for(e=o.duplicate(),e.text.length>0&&e.moveStart("character",1),e.collapse(1),t=e.parentElement(),i=n=o.parentElement();n=n.parentNode;)if(n==t){t=i;break}}else if(o.shrinkBoundary(),t=o.startContainer,1==t.nodeType&&t.hasChildNodes()&&(t=t.childNodes[Math.min(t.childNodes.length-1,o.startOffset)]),3==t.nodeType)return t.parentNode;return t},getText:function(){var e,t;return this.isFocus()&&(e=this.getNative())?(t=o.ie?e.createRange():e.getRangeAt(0),o.ie?t.text:""+t):""},clearRange:function(){this.getNative()[o.ie?"empty":"removeAllRanges"]()}},n.exports=c})()}),define("ueditor/core/Editor",["../editor","../baidu","../dom","./utils","./browser","./EventBase","./dtd","./domUtils","./Range","./Selection","./node"],function(e,t,n){var i=e("../editor"),o=e("../dom"),r=e("./utils"),a=e("./EventBase"),s=e("./browser"),l=e("./dtd"),d=e("./domUtils");e("./Range"),e("./Selection"),e("./node");var c=s.ie;(function(){function e(e,t){var n;if(t.textarea)if(r.isString(t.textarea)){for(var i,o=0,a=d.getElementsByTagName(e,"textarea");i=a[o++];)if(i.id=="ueditor_textarea_"+t.options.textarea){n=i;break}}else n=t.textarea;n||(e.appendChild(n=d.createElement(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"})),t.textarea=n),n.value=t.hasContents()?t.options.allHtmlEnabled?t.getAllHtml():t.getContent(null,null,!0):""}function t(e){for(var t in i.plugins)i.plugins[t].call(e);e.langIsReady=!0,e.fireEvent("langReady")}function u(e){for(var t in e)return t}var f,p=0,m=i.Editor=function(e){var n=this;n.uid=p++,a.call(n),n.commands={},n.options=r.extend(r.clone(e||{}),null,!0),n.shortcutkeys={},n.inputRules=[],n.outputRules=[],n.setOpt({isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:n.options.UEDITOR_HOME_URL+"lang/",theme:"default",themePath:n.options.UEDITOR_HOME_URL+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0}),r.isEmptyObject(i.I18N)?r.loadFile(document,{src:n.options.langPath+n.options.lang+"/"+n.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){t(n)}):(n.options.lang=u(i.I18N),t(n)),i.instants["ueditorInstant"+n.uid]=n};m.prototype={ready:function(e){var t=this;e&&(t.isReady?e.apply(t):t.addListener("ready",e))},setOpt:function(e,t){var n={};r.isString(e)?n[e]=t:n=e,r.extend(this.options,n,!0)},destroy:function(){var e=this;e.fireEvent("destroy");var t=e.container.parentNode,n=e.textarea;n?n.style.display="":(n=document.createElement("textarea"),t.parentNode.insertBefore(n,t)),n.style.width=e.iframe.offsetWidth+"px",n.style.height=e.iframe.offsetHeight+"px",n.value=e.getContent(),n.id=e.key,t.innerHTML="",d.remove(t);var o=e.key;for(var r in e)e.hasOwnProperty(r)&&delete this[r];i.delEditor(o)},render:function(e){var t=this,n=t.options,i=function(t){return parseInt(d.getComputedStyle(e,t))};if(r.isString(e)&&(e=document.getElementById(e)),e){n.minFrameWidth=n.initialFrameWidth?n.initialFrameWidth:n.initialFrameWidth=e.offsetWidth,n.initialFrameHeight?n.minFrameHeight=n.initialFrameHeight:n.initialFrameHeight=n.minFrameHeight=e.offsetHeight,e.style.width=/%$/.test(n.initialFrameWidth)?"100%":n.initialFrameWidth-i("padding-left")-i("padding-right")+"px",e.style.height=/%$/.test(n.initialFrameHeight)?"100%":n.initialFrameHeight-i("padding-top")-i("padding-bottom")+"px",e.style.zIndex=n.zIndex;var o=(c&&9>s.version?"":"<!DOCTYPE html>")+function(){var e='<html xmlns="http://www.w3.org/1999/xhtml" class="view" ><head>';return e+='<style type="text/css">',e+=".view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\n",e+="body{margin:8px;font-family:sans-serif;font-size:16px;}",e+="p{margin:5px 0;}</style>",e+=n.iframeCssUrl?'<link rel="stylesheet" type="text/css" href=""'+r.unhtml(n.iframeCssUrl)+'"/>':"",e+=n.initialStyle?"<style>"+n.initialStyle+"</style>":"",e+='</head><body class="view" ></body>',e+='<script type="text/javascript" '+(c?'defer="defer"':"")+' id="_initialScript">',e+='setTimeout(function(){window.parent.UE.instants["ueditorInstant'+t.uid+'"]._setup(document);},0);',e+='var _tmpScript = document.getElementById("_initialScript");_tmpScript.parentNode.removeChild(_tmpScript);</script></html>'}();e.appendChild(d.createElement(document,"iframe",{id:"ueditor_"+t.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(n.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+"document.write('"+o+"');document.close();}())"})),e.style.overflow="hidden",setTimeout(function(){/%$/.test(n.initialFrameWidth)&&(n.minFrameWidth=n.initialFrameWidth=e.offsetWidth,e.style.width=n.initialFrameWidth+"px"),/%$/.test(n.initialFrameHeight)&&(n.minFrameHeight=n.initialFrameHeight=e.offsetHeight,e.style.height=n.initialFrameHeight+"px")})}},_setup:function(t){var n=this,i=n.options;c?(t.body.disabled=!0,t.body.contentEditable=!0,t.body.disabled=!1):t.body.contentEditable=!0,t.body.spellcheck=!1,n.document=t,n.window=t.defaultView||t.parentWindow,n.iframe=n.window.frameElement,n.body=t.body,n.selection=new o.Selection(t);var r;s.gecko&&(r=this.selection.getNative())&&r.removeAllRanges(),this._initEvents();for(var a=this.iframe.parentNode;!d.isBody(a);a=a.parentNode)if("FORM"==a.tagName){n.form=a,n.options.autoSyncData?d.on(n.window,"blur",function(){e(a,n)}):d.on(a,"submit",function(){e(this,n)});break}if(i.initialContent)if(i.autoClearinitialContent){var l=n.execCommand;n.execCommand=function(){return n.fireEvent("firstBeforeExecCommand"),l.apply(n,arguments)},this._setDefaultContent(i.initialContent)}else this.setContent(i.initialContent,!1,!0);d.isEmptyNode(n.body)&&(n.body.innerHTML="<p>"+(s.ie?"":"<br/>")+"</p>"),i.focus&&setTimeout(function(){n.focus(n.options.focusInEnd),!n.options.autoClearinitialContent&&n._selectionChange()},0),n.container||(n.container=this.iframe.parentNode),i.fullscreen&&n.ui&&n.ui.setFullScreen(!0);try{n.document.execCommand("2D-position",!1,!1)}catch(u){}try{n.document.execCommand("enableInlineTableEditing",!1,!1)}catch(u){}try{n.document.execCommand("enableObjectResizing",!1,!1)}catch(u){}n._bindshortcutKeys(),n.isReady=1,n.fireEvent("ready"),i.onready&&i.onready.call(n),s.ie||d.on(n.window,["blur","focus"],function(e){if("blur"==e.type){n._bakRange=n.selection.getRange();try{n._bakNativeRange=n.selection.getNative().getRangeAt(0),n.selection.getNative().removeAllRanges()}catch(e){n._bakNativeRange=null}}else try{n._bakRange&&n._bakRange.select()}catch(e){}}),s.gecko&&10902>=s.version&&(n.body.contentEditable=!1,setTimeout(function(){n.body.contentEditable=!0},100),setInterval(function(){n.body.style.height=n.iframe.offsetHeight-20+"px"},100)),!i.isShow&&n.setHide(),i.readonly&&n.setDisabled()},sync:function(t){var n=this,i=t?document.getElementById(t):d.findParent(n.iframe.parentNode,function(e){return"FORM"==e.tagName},!0);i&&e(i,n)},setHeight:function(e,t){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px"),!t&&(this.options.minFrameHeight=this.options.initialFrameHeight=e),this.body.style.height=e+"px"},addshortcutkey:function(e,t){var n={};t?n[e]=t:n=e,r.extend(this.shortcutkeys,n)},_bindshortcutKeys:function(){var e=this,t=this.shortcutkeys;e.addListener("keydown",function(n,i){var o=i.keyCode||i.which;for(var r in t)for(var a,s=t[r].split(","),l=0;a=s[l++];){a=a.split(":");var c=a[0],u=a[1];(/^(ctrl)(\+shift)?\+(\d+)$/.test(c.toLowerCase())||/^(\d+)$/.test(c))&&(("ctrl"==RegExp.$1?i.ctrlKey||i.metaKey:0)&&(""!=RegExp.$2?i[RegExp.$2.slice(1)+"Key"]:1)&&o==RegExp.$3||o==RegExp.$1)&&(-1!=e.queryCommandState(r,u)&&e.execCommand(r,u),d.preventDefault(i))}})},getContent:function(e,t,n,o,a){var s=this;if(e&&r.isFunction(e)&&(t=e,e=""),t?!t():!this.hasContents())return"";s.fireEvent("beforegetcontent");var l=i.htmlparser(s.body.innerHTML,o);return s.filterOutputRule(l),s.fireEvent("aftergetcontent",e),l.toHtml(a)},getAllHtml:function(){var e=this,t=[];if(e.fireEvent("getAllHtml",t),s.ie&&s.version>8){var n="";r.each(e.document.styleSheets,function(e){n+=e.href?'<link rel="stylesheet" type="text/css" href="'+e.href+'" />':"<style>"+e.cssText+"</style>"}),r.each(e.document.getElementsByTagName("script"),function(e){n+=e.outerHTML})}return"<html><head>"+(e.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+e.options.charset+'"/>':"")+(n||e.document.getElementsByTagName("head")[0].innerHTML)+t.join("\n")+"</head>"+"<body "+(c&&9>s.version?'class="view"':"")+">"+e.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=RegExp(d.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,"");return t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,n){return l.$block[n]?"\n":t?t:""}),t.replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var e=RegExp(d.fillChar,"g");return this.body[s.ie?"innerText":"textContent"].replace(e,"").replace(/\u00a0/g," ")},setContent:function(t,n,o){function r(e){return"DIV"==e.tagName&&e.getAttribute("cdata_tag")}var a=this;a.fireEvent("beforesetcontent",t);var c=i.htmlparser(t);if(a.filterInputRule(c),t=c.toHtml(),a.body.innerHTML=(n?a.body.innerHTML:"")+t,"p"==a.options.enterTag){var u,f=this.body.firstChild;if(!f||1==f.nodeType&&(l.$cdata[f.tagName]||r(f)||d.isCustomeNode(f))&&f===this.body.lastChild)this.body.innerHTML="<p>"+(s.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(var p=a.document.createElement("p");f;){for(;f&&(3==f.nodeType||1==f.nodeType&&l.p[f.tagName]&&!l.$cdata[f.tagName]);)u=f.nextSibling,p.appendChild(f),f=u;if(p.firstChild){if(!f){a.body.appendChild(p);break}f.parentNode.insertBefore(p,f),p=a.document.createElement("p")}f=f.nextSibling}}a.fireEvent("aftersetcontent"),a.fireEvent("contentchange"),!o&&a._selectionChange(),a._bakRange=a._bakIERange=a._bakNativeRange=null;var m;s.gecko&&(m=this.selection.getNative())&&m.removeAllRanges(),a.options.autoSyncData&&a.form&&e(a.form,a)},focus:function(e){try{var t=this,n=t.selection.getRange();e?n.setStartAtLast(t.body.lastChild).setCursor(!1,!0):n.select(!0),this.fireEvent("focus")}catch(i){}},_initEvents:function(){var e=this,t=e.document,n=e.window;e._proxyDomEvent=r.bind(e._proxyDomEvent,e),d.on(t,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],e._proxyDomEvent),d.on(n,["focus","blur"],e._proxyDomEvent),d.on(t,["mouseup","keydown"],function(t){"keydown"==t.type&&(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)||2!=t.button&&e._selectionChange(250,t)})},_proxyDomEvent:function(e){return this.fireEvent(e.type.replace(/^on/,""),e)},_selectionChange:function(e,t){var n,i,o=this,r=!1;if(s.ie&&9>s.version&&t&&"mouseup"==t.type){var a=this.selection.getRange();a.collapsed||(r=!0,n=t.clientX,i=t.clientY)}clearTimeout(f),f=setTimeout(function(){if(o.selection.getNative()){var e;if(r&&"None"==o.selection.getNative().type){e=o.document.body.createTextRange();try{e.moveToPoint(n,i)}catch(a){e=null}}var s;e&&(s=o.selection.getIERange,o.selection.getIERange=function(){return e}),o.selection.cache(),s&&(o.selection.getIERange=s),o.selection._cachedRange&&o.selection._cachedStartElement&&(o.fireEvent("beforeselectionchange"),o.fireEvent("selectionchange",!!t),o.fireEvent("afterselectionchange"),o.selection.clear())}},e||50)},_callCmdFn:function(e,t){var n,o,r=t[0].toLowerCase();return n=this.commands[r]||i.commands[r],o=n&&n[e],n&&o||"queryCommandState"!=e?o?o.apply(this,t):void 0:0},execCommand:function(e){e=e.toLowerCase();var t,n=this,o=n.commands[e]||i.commands[e];return o&&o.execCommand?(o.notNeedUndo||n.__hasEnterExecCommand?(t=this._callCmdFn("execCommand",arguments),!n._ignoreContentChange&&n.fireEvent("contentchange")):(n.__hasEnterExecCommand=!0,-1!=n.queryCommandState.apply(n,arguments)&&(n.fireEvent("beforeexeccommand",e),t=this._callCmdFn("execCommand",arguments),!n._ignoreContentChange&&n.fireEvent("contentchange"),n.fireEvent("afterexeccommand",e)),n.__hasEnterExecCommand=!1),!n._ignoreContentChange&&n._selectionChange(),t):null},queryCommandState:function(){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var t,n=0;t=e[n++];)if(this.document.getElementsByTagName(t).length>0)return!0;if(!d.isEmptyBlock(this.body))return!0;for(e=["div"],n=0;t=e[n++];)for(var i,o=d.getElementsByTagName(this.document,t),r=0;i=o[r++];)if(d.isCustomeNode(i))return!0;return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var e,t=this;if("false"==t.body.contentEditable){t.body.contentEditable=!0,e=t.selection.getRange();try{e.moveToBookmark(t.lastBk),delete t.lastBk}catch(n){e.setStartAtFirst(t.body).collapse(!0)}e.select(!0),t.bkqueryCommandState&&(t.queryCommandState=t.bkqueryCommandState,delete t.bkqueryCommandState),t.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(e){var t=this;e=e?r.isArray(e)?e:[e]:[],"true"==t.body.contentEditable&&(t.lastBk||(t.lastBk=t.selection.getRange().createBookmark(!0)),t.body.contentEditable=!1,t.bkqueryCommandState=t.queryCommandState,t.queryCommandState=function(n){return-1!=r.indexOf(e,n)?t.bkqueryCommandState.apply(t,arguments):-1},t.fireEvent("selectionchange"))},disable:function(e){return this.setDisabled(e)},_setDefaultContent:function(){function e(){var t=this;t.document.getElementById("initContent")&&(t.body.innerHTML="<p>"+(c?"":"<br/>")+"</p>",t.removeListener("firstBeforeExecCommand focus",e),setTimeout(function(){t.focus(),t._selectionChange()},0))}return function(t){var n=this;n.body.innerHTML='<p id="initContent">'+t+"</p>",n.addListener("firstBeforeExecCommand focus",e)}}(),setShow:function(){var e=this,t=e.selection.getRange();if("none"==e.container.style.display){try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(n){t.setStartAtFirst(e.body).collapse(!0)}setTimeout(function(){t.select(!0)},100),e.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var e=this;e.lastBk||(e.lastBk=e.selection.getRange().createBookmark(!0)),e.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(e){var t=i.I18N[this.options.lang];if(!t)throw Error("not import language file");e=(e||"").split(".");for(var n,o=0;(n=e[o++])&&(t=t[n],t););return t},getContentLength:function(e,t){var n=this.getContent(!1,!1,!0).length;if(e){t=(t||[]).concat(["hr","img","iframe"]),n=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var i,o=0;i=t[o++];)n+=this.document.getElementsByTagName(i).length}return n},addInputRule:function(e){this.inputRules.push(e)},filterInputRule:function(e){for(var t,n=0;t=this.inputRules[n++];)t.call(this,e)},addOutputRule:function(e){this.outputRules.push(e)},filterOutputRule:function(e){for(var t,n=0;t=this.outputRules[n++];)t.call(this,e)}},r.inherits(m,a),n.exports=m})()}),define("ueditor/core/node",["../editor","../baidu","../dom","./utils","./browser","./domUtils","./dtd"],function(e,t,n){function i(e,t,n){return e.push(b),t+(n?1:-1)}function o(e,t){for(var n=0;t>n;n++)e.push(v)}function r(e,t,n,d){switch(e.type){case"root":for(var c,u=0;c=e.children[u++];)n&&"element"==c.type&&!h.$inlineWithA[c.tagName]&&u>1&&(i(t,d,!0),o(t,d)),r(c,t,n,d);break;case"text":a(e,t);break;case"element":s(e,t,n,d);break;case"comment":l(e,t,n)}return t}function a(e,t){t.push("pre"==e.parentNode.tagName?e.data:e.data.replace(/[ ]{2}/g," &nbsp;"))}function s(e,t,n,a){var s="";if(e.attrs){s=[];var l=e.attrs;for(var d in l)s.push(d+(void 0!==l[d]?'="'+p.unhtml(l[d])+'"':""));s=s.join(" ")}if(t.push("<"+e.tagName+(s?" "+s:"")+(h.$empty[e.tagName]?"/":"")+">"),n&&!h.$inlineWithA[e.tagName]&&"pre"!=e.tagName&&e.children&&e.children.length&&(a=i(t,a,!0),o(t,a)),e.children&&e.children.length)for(var c,u=0;c=e.children[u++];)n&&"element"==c.type&&!h.$inlineWithA[c.tagName]&&u>1&&(i(t,a),o(t,a)),r(c,t,n,a);
h.$empty[e.tagName]||(n&&!h.$inlineWithA[e.tagName]&&"pre"!=e.tagName&&e.children&&e.children.length&&(a=i(t,a),o(t,a)),t.push("</"+e.tagName+">"))}function l(e,t){t.push("<!--"+e.data+"-->")}function d(e,t){var n;if("element"==e.type&&e.getAttr("id")==t)return e;if(e.children&&e.children.length)for(var i,o=0;i=e.children[o++];)if(n=d(i,t))return n}function c(e,t,n){if("element"==e.type&&e.tagName==t&&n.push(e),e.children&&e.children.length)for(var i,o=0;i=e.children[o++];)c(i,t,n)}function u(e,t){if(e.children&&e.children.length)for(var n,i=0;n=e.children[i];)u(n,t),n.parentNode&&(n.children&&n.children.length&&t(n),n.parentNode&&i++);else t(e)}var f=e("../editor");e("../dom");var p=e("./utils"),m=e("./domUtils"),h=e("./dtd"),g=f.uNode=function(e){this.type=e.type,this.data=e.data,this.tagName=e.tagName,this.parentNode=e.parentNode,this.attrs=e.attrs||{},this.children=e.children},v="    ",b="\n";g.createElement=function(e){return/[<>]/.test(e)?f.htmlparser(e).children[0]:new g({type:"element",children:[],tagName:e})},g.createText=function(e){return new f.uNode({type:"text",data:p.unhtml(e||"")})},g.prototype={toHtml:function(e){var t=[];return r(this,t,e,0),t.join("")},innerHTML:function(e){if("element"!=this.type||h.$empty[this.tagName])return this;if(p.isString(e)){if(this.children)for(var t,n=0;t=this.children[n++];)t.parentNode=null;this.children=[];for(var t,i=f.htmlparser(e),n=0;t=i.children[n++];)this.children.push(t),t.parentNode=this;return this}var i=new f.uNode({type:"root",children:this.children});return i.toHtml()},innerText:function(e){if("element"!=this.type||h.$empty[this.tagName])return this;if(e){if(this.children)for(var t,n=0;t=this.children[n++];)t.parentNode=null;return this.children=[],this.appendChild(g.createText(e)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var e,t=this.parentNode,n=0;e=t.children[n];n++)if(e===this)return 0==n?null:t.children[n-1]},nextSibling:function(){for(var e,t=this.parentNode,n=0;e=t.children[n++];)if(e===this)return t.children[n]},replaceChild:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var n,i=0;n=this.children[i];i++)if(n===t)return this.children.splice(i,1,e),t.parentNode=null,e.parentNode=this,e}},appendChild:function(e){if("root"==this.type||"element"==this.type&&!h.$empty[this.tagName]){this.children||(this.children=[]),e.parentNode&&e.parentNode.removeChild(e);for(var t,n=0;t=this.children[n];n++)if(t===e){this.children.splice(n,1);break}return this.children.push(e),e.parentNode=this,e}},insertBefore:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var n,i=0;n=this.children[i];i++)if(n===t)return this.children.splice(i,0,e),e.parentNode=this,e}},insertAfter:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var n,i=0;n=this.children[i];i++)if(n===t)return this.children.splice(i+1,0,e),e.parentNode=this,e}},removeChild:function(e,t){if(this.children)for(var n,i=0;n=this.children[i];i++)if(n===e){if(this.children.splice(i,1),n.parentNode=null,t&&n.children&&n.children.length)for(var o,r=0;o=n.children[r];r++)this.children.splice(i+r,0,o),o.parentNode=this;return n}},getAttr:function(e){return this.attrs&&this.attrs[e.toLowerCase()]},setAttr:function(e,t){if(!e)return delete this.attrs,void 0;if(this.attrs||(this.attrs={}),p.isObject(e))for(var n in e)e[n]?this.attrs[n.toLowerCase()]=e[n]:delete this.attrs[n];else t?this.attrs[e.toLowerCase()]=t:delete this.attrs[e]},getIndex:function(){for(var e,t=this.parentNode,n=0;e=t.children[n];n++)if(e===this)return n;return-1},getNodeById:function(e){var t;if(this.children&&this.children.length)for(var n,i=0;n=this.children[i++];)if(t=d(n,e))return t},getNodesByTagName:function(e){e=p.trim(e).replace(/[ ]{2,}/g," ").split(" ");var t=[],n=this;return p.each(e,function(e){if(n.children&&n.children.length)for(var i,o=0;i=n.children[o++];)c(i,e,t)}),t},getStyle:function(e){var t=this.getAttr("style");if(!t)return"";var n=RegExp(e+":([^;]+)","i"),i=t.match(n);return i&&i[0]?i[1]:""},setStyle:function(e,t){function n(e,t){var n=RegExp(e+":([^;]+;?)","gi");i=i.replace(n,""),t&&(i=e+":"+p.unhtml(t)+";"+i)}var i=this.getAttr("style");if(i||(i=""),p.isObject(e))for(var o in e)n(o,e[o]);else n(e,t);this.setAttr("style",p.trim(i))},traversal:function(e){return this.children&&this.children.length&&u(this,e),this}},f.htmlparser=function(e,t){function n(e,t){if(u[e.tagName]){var n=d.createElement(u[e.tagName]);e.appendChild(n),n.appendChild(d.createText(t)),e=n}else e.appendChild(d.createText(t))}function i(e,t,n){var o;if(o=c[t]){for(var r,s=e;"root"!=s.type;){if(p.isArray(o)?-1!=p.indexOf(o,s.tagName):o==s.tagName){e=s,r=!0;break}s=s.parentNode}r||(e=i(e,p.isArray(o)?o[0]:o))}var l=new d({parentNode:e,type:"element",tagName:t.toLowerCase(),children:h.$empty[t]?null:[]});if(n){for(var u,f={};u=a.exec(n);)f[u[1].toLowerCase()]=p.unhtml(u[2]||u[3]||u[4]);l.attrs=f}return e.children.push(l),h.$empty[t]?e:l}function o(e,t){e.children.push(new d({type:"comment",data:t,parentNode:e}))}var r=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,s={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};e=e.replace(RegExp(m.fillChar,"g"),""),t||(e=e.replace(RegExp("[\\r\\t\\n"+(t?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(t?"":" ")+"]*","g"),function(e,n){return n&&s[n.toLowerCase()]?e.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):e.replace(RegExp("^[\\r\\n"+(t?"":" ")+"]+"),"").replace(RegExp("[\\r\\n"+(t?"":" ")+"]+$"),"")}));for(var l,d=f.uNode,c={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},u={ol:"li",ul:"li"},g=0,v=0,b=new d({type:"root",children:[]}),y=b;l=r.exec(e);){g=l.index;try{if(g>v&&n(y,e.slice(v,g)),l[3])y=i(y,l[3].toLowerCase(),l[4]);else if(l[1]){if("root"!=y.type){for(var x=y;"element"==y.type&&y.tagName!=l[1].toLowerCase();)if(y=y.parentNode,"root"==y.type)throw y=x,"break";y=y.parentNode}}else l[2]&&o(y,l[2])}catch(C){}v=r.lastIndex}return e.length>v&&n(y,e.slice(v)),b},n.exports=f}),define("ueditor/core/ajax",["../editor","../baidu","./utils","./browser"],function(e,t,n){var i=e("../editor"),o=e("./utils");i.ajax=function(){function e(e){var t=[];for(var n in e)"method"!=n&&"timeout"!=n&&"async"!=n&&"function"!=(typeof e[n]).toLowerCase()&&"object"!=(typeof e[n]).toLowerCase()&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var t="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),t="ActiveXObject('Msxml2.XMLHTTP')"}catch(n){try{new ActiveXObject("Microsoft.XMLHTTP"),t="ActiveXObject('Microsoft.XMLHTTP')"}catch(n){}}var i=Function("return new "+t);return{request:function(t,n){var r=i(),a=!1,s={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};if("object"==typeof t&&(n=t,t=n.url),r&&t){var l=n?o.extend(s,n):s,d=e(l);o.isEmptyObject(l.data)||(d+=(d?"&":"")+e(l.data));var c=setTimeout(function(){4!=r.readyState&&(a=!0,r.abort(),clearTimeout(c))},l.timeout),u=l.method.toUpperCase(),f=t+(-1==t.indexOf("?")?"?":"&")+("POST"==u?"":d+"&noCache="+ +new Date);r.open(u,f,l.async),r.onreadystatechange=function(){4==r.readyState&&(a||200!=r.status?l.onerror(r):l.onsuccess(r))},"POST"==u?(r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(d)):r.send(null)}}}}(),n.exports=i.ajax}),define("ueditor/ui/ui",["../baidu"],function(e,t,n){var i=e("../baidu");i.editor=i.editor||{},i.editor.ui={},n.exports=i.editor.ui}),define("ueditor/ui/uiutils",["../baidu","../core/utils","../editor","../core/browser","../core/domUtils","../dom","../core/dtd","./ui"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("../core/browser"),a=e("../core/domUtils");e("./ui"),function(){function e(){var e=document.getElementById("edui_fixedlayer");u.setViewportOffset(e,{left:0,top:0})}function t(){a.on(window,"scroll",e),a.on(window,"resize",o.defer(e,0,!0))}var s="$EDITORUI",l=window[s]={},d="ID"+s,c=0,u=i.editor.ui.uiUtils={uid:function(e){return e?e[d]||(e[d]=++c):++c},hook:function(e,t){var n;return e&&e._callbacks?n=e:(n=function(){var t;e&&(t=e.apply(this,arguments));for(var i=n._callbacks,o=i.length;o--;){var r=i[o].apply(this,arguments);void 0===t&&(t=r)}return t},n._callbacks=[]),n._callbacks.push(t),n},createElementByHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,t=t.firstChild,t.parentNode.removeChild(t),t},getViewportElement:function(){return r.ie&&r.quirks?document.body:document.documentElement},getClientRect:function(e){var t;try{t=e.getBoundingClientRect()}catch(n){t={left:0,top:0,height:0,width:0}}for(var i,o={left:Math.round(t.left),top:Math.round(t.top),height:Math.round(t.bottom-t.top),width:Math.round(t.right-t.left)};(i=e.ownerDocument)!==document&&(e=a.getWindow(i).frameElement);)t=e.getBoundingClientRect(),o.left+=t.left,o.top+=t.top;return o.bottom=o.top+o.height,o.right=o.left+o.width,o},getViewportRect:function(){var e=u.getViewportElement(),t=0|(window.innerWidth||e.clientWidth),n=0|(window.innerHeight||e.clientHeight);return{left:0,top:0,height:n,width:t,bottom:n,right:t}},setViewportOffset:function(e,t){var n=u.getFixedLayer();e.parentNode===n?(e.style.left=t.left+"px",e.style.top=t.top+"px"):a.setViewportOffset(e,t)},getEventOffset:function(e){var t=e.target||e.srcElement,n=u.getClientRect(t),i=u.getViewportOffsetByEvent(e);return{left:i.left-n.left,top:i.top-n.top}},getViewportOffsetByEvent:function(e){var t=e.target||e.srcElement,n=a.getWindow(t).frameElement,i={left:e.clientX,top:e.clientY};if(n&&t.ownerDocument!==document){var o=u.getClientRect(n);i.left+=o.left,i.top+=o.top}return i},setGlobal:function(e,t){return l[e]=t,s+'["'+e+'"]'},unsetGlobal:function(e){delete l[e]},copyAttributes:function(e,t){for(var n=t.attributes,i=n.length;i--;){var o=n[i];"style"==o.nodeName||"class"==o.nodeName||r.ie&&!o.specified||e.setAttribute(o.nodeName,o.nodeValue)}t.className&&a.addClass(e,t.className),t.style.cssText&&(e.style.cssText+=";"+t.style.cssText)},removeStyle:function(e,t){if(e.style.removeProperty)e.style.removeProperty(t);else{if(!e.style.removeAttribute)throw"";e.style.removeAttribute(t)}},contains:function(e,t){return e&&t&&(e===t?!1:e.contains?e.contains(t):16&e.compareDocumentPosition(t))},startDrag:function(e,t,n){function i(e){var n=e.clientX-a,i=e.clientY-s;t.ondragmove(n,i,e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function o(){n.removeEventListener("mousemove",i,!0),n.removeEventListener("mouseup",o,!0),window.removeEventListener("mouseup",o,!0),t.ondragstop()}function r(){l.releaseCapture(),l.detachEvent("onmousemove",i),l.detachEvent("onmouseup",r),l.detachEvent("onlosecaptrue",r),t.ondragstop()}var n=n||document,a=e.clientX,s=e.clientY;if(n.addEventListener)n.addEventListener("mousemove",i,!0),n.addEventListener("mouseup",o,!0),window.addEventListener("mouseup",o,!0),e.preventDefault();else{var l=e.srcElement;l.setCapture(),l.attachEvent("onmousemove",i),l.attachEvent("onmouseup",r),l.attachEvent("onlosecaptrue",r),e.returnValue=!1}t.ondragstart()},getFixedLayer:function(){var n=document.getElementById("edui_fixedlayer");return null==n&&(n=document.createElement("div"),n.id="edui_fixedlayer",document.body.appendChild(n),r.ie&&8>=r.version?(n.style.position="absolute",t(),setTimeout(e)):n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.width="0",n.style.height="0"),n},makeUnselectable:function(e){if(r.opera||r.ie&&9>r.version){if(e.unselectable="on",e.hasChildNodes())for(var t=0;e.childNodes.length>t;t++)1==e.childNodes[t].nodeType&&u.makeUnselectable(e.childNodes[t])}else void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":void 0!==e.style.WebkitUserSelect?e.style.WebkitUserSelect="none":void 0!==e.style.KhtmlUserSelect&&(e.style.KhtmlUserSelect="none")}};n.exports=u}()}),define("ueditor/ui/uibase",["../baidu","../core/utils","../editor","../core/browser","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("./uiutils"),s=e("../core/EventBase");e("./ui"),function(){var e=i.editor.ui.UIBase=function(){};e.prototype={className:"",uiName:"",initOptions:function(e){var t=this;for(var n in e)t[n]=e[n];this.id=this.id||"edui"+a.uid()},initUIBase:function(){this._globalKey=o.unhtml(a.setGlobal(this.id,this))},render:function(e){for(var t,n=this.renderHtml(),i=a.createElementByHtml(n),o=r.getElementsByTagName(i,"*"),s="edui-"+(this.theme||this.editor.options.theme),l=document.getElementById("edui_fixedlayer"),d=0;t=o[d++];)r.addClass(t,s);r.addClass(i,s),l&&(l.className="",r.addClass(l,s));var c=this.getDom();null!=c?(c.parentNode.replaceChild(i,c),a.copyAttributes(i,c)):("string"==typeof e&&(e=document.getElementById(e)),e=e||a.getFixedLayer(),r.addClass(e,s),e.appendChild(i)),this.postRender()},getDom:function(e){return e?document.getElementById(this.id+"_"+e):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();e&&r.remove(e),a.unsetGlobal(this.id)}},o.inherits(e,s),n.exports=e}()}),define("ueditor/ui/separator",["../baidu","../core/utils","../editor","../core/browser","./uibase","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uibase");(function(){var e=i.editor.ui.Separator=function(e){this.initOptions(e),this.initSeparator()};e.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},o.inherits(e,r),n.exports=e})()}),define("ueditor/ui/mask",["../baidu","../core/utils","../editor","../core/browser","../core/domUtils","../dom","../core/dtd","./uibase","./uiutils","./ui","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("./uibase"),s=e("./uiutils");(function(){var e=i.editor.ui.Mask=function(e){this.initOptions(e),this.initUIBase()};e.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var e=this;r.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e._fill()})})},show:function(e){this._fill(),this.getDom().style.display="",this.getDom().style.zIndex=e},hide:function(){this.getDom().style.display="none",this.getDom().style.zIndex=""},isHidden:function(){return"none"==this.getDom().style.display},_onMouseDown:function(){return!1},_fill:function(){var e=this.getDom(),t=s.getViewportRect();e.style.width=t.width+"px",e.style.height=t.height+"px"}},o.inherits(e,a),n.exports=e})()}),define("ueditor/ui/popup",["../baidu","../core/utils","../editor","../core/browser","./uiutils","../core/domUtils","../dom","../core/dtd","./ui","./uibase","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uiutils"),a=e("../core/domUtils"),s=e("./uibase");(function(){function e(e,t){for(var n=0;l.length>n;n++){var i=l[n];if(!i.isHidden()&&i.queryAutoHide(t)!==!1){if(e&&/scroll/gi.test(e.type)&&"edui-wordpastepop"==i.className)return;i.hide()}}l.length&&i.editor.fireEvent("afterhidepop")}var t=i.editor.ui.Popup=function(e){this.initOptions(e),this.initPopup()},l=[];t.postHide=e;var d=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];t.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),l.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="javascript:"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div>"+" </div>"+"</div>"},getContentHtmlTpl:function(){return this.content?"string"==typeof this.content?this.content:this.content.renderHtml():""},_UIBase_postRender:s.prototype.postRender,postRender:function(){if(this.content instanceof s&&this.content.postRender(),this.captureWheel&&!this.captured){this.captured=!0;var e=((document.documentElement.clientHeight||document.body.clientHeight)-80,this.getDom().offsetHeight),t=(a.getXY(this.combox.getDom()).y,this.getDom("content")),n=this;t.style.height=e+"px",window.XMLHttpRequest?a.on(t,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,t.scrollTop-=e.wheelDelta?60*(e.wheelDelta/120):60*(e.detail/-3)}):a.on(this.getDom(),"mousewheel",function(e){e.returnValue=!1,n.getDom("content").scrollTop-=60*(e.wheelDelta/120)})}this.fireEvent("postRenderAfter"),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var e=this.getDom("content");return r.getClientRect(e)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var e=this.getDom("body");e.style.width="",e.style.height="";var t=this.mesureSize();return e.style.width=this.captureWheel?-(-20-t.width)+"px":t.width+"px",e.style.height=t.height+"px",this.__size=t,this.captureWheel&&(this.getDom("content").style.overflow="auto"),t},showAnchor:function(e,t){this.showAnchorRect(r.getClientRect(e),t)},showAnchorRect:function(e,t){this._doAutoRender();var n=r.getViewportRect();this._show();var o,s,l,c,u=this.fitSize();t?(o=this.canSideLeft&&e.right+u.width>n.right&&e.left>u.width,s=this.canSideUp&&e.top+u.height>n.bottom&&e.bottom>u.height,l=o?e.left-u.width:e.right,c=s?e.bottom-u.height:e.top):(o=this.canSideLeft&&e.right+u.width>n.right&&e.left>u.width,s=this.canSideUp&&e.top+u.height>n.bottom&&e.bottom>u.height,l=o?e.right-u.width:e.left,c=s?e.top-u.height:e.bottom);var f=this.getDom();r.setViewportOffset(f,{left:l,top:c}),a.removeClasses(f,d),f.className+=" "+d[2*(s?1:0)+(o?1:0)],this.editor&&(f.style.zIndex=1*this.editor.container.style.zIndex+10,i.editor.ui.uiUtils.getFixedLayer().style.zIndex=f.style.zIndex-1)},showAt:function(e){var t=e.left,n=e.top,i={left:t,top:n,right:t,bottom:n,height:0,width:0};this.showAnchorRect(i,!1,!0)},_show:function(){if(this._hidden){var e=this.getDom();e.style.display="",this._hidden=!1,this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(e){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,e||this.fireEvent("hide"))},queryAutoHide:function(e){return!e||!r.contains(this.getDom(),e)}},o.inherits(t,s),a.on(document,"mousedown",function(t){var n=t.target||t.srcElement;e(t,n)}),a.on(window,"scroll",function(t,n){e(t,n)}),n.exports=t})()}),define("ueditor/ui/colorpicker",["../baidu","../core/utils","../editor","../core/browser","./uibase","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uibase");(function(){function e(e,t){for(var n='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+e+"</div>"+"</div>"+'<table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0">'+'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+t.getLang("themeColor")+"</td> </tr>"+'<tr class="edui-colorpicker-tablefirstrow" >',i=0;a.length>i;i++)i&&0===i%10&&(n+="</tr>"+(60==i?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+t.getLang("standardColor")+"</td></tr>":"")+"<tr"+(60==i?' class="edui-colorpicker-tablefirstrow"':"")+">"),n+=70>i?'<td style="padding: 0 2px;"><a hidefocus title="'+a[i]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell"'+' data-color="#'+a[i]+'"'+' style="background-color:#'+a[i]+";border:solid #ccc;"+(10>i||i>=60?"border-width:1px;":i>=10&&20>i?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"'+"></a></td>":"";return n+="</tr></table></div>"}var t=i.editor.ui.ColorPicker=function(e){this.initOptions(e),this.noColorText=this.noColorText||this.editor.getLang("clearColor"),this.initUIBase()};t.prototype={getHtmlTpl:function(){return e(this.noColorText,this.editor)},_onTableClick:function(e){var t=e.target||e.srcElement,n=t.getAttribute("data-color");n&&this.fireEvent("pickcolor",n)},_onTableOver:function(e){var t=e.target||e.srcElement,n=t.getAttribute("data-color");n&&(this.getDom("preview").style.backgroundColor=n)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}},o.inherits(t,r);var a="ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,".split(",");n.exports=t})()}),define("ueditor/ui/tablepicker",["../baidu","../core/utils","../editor","../core/browser","./uiutils","../core/domUtils","../dom","../core/dtd","./ui","./uibase","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uiutils"),a=e("./uibase");(function(){var e=i.editor.ui.TablePicker=function(e){this.initOptions(e),this.initTablePicker()};e.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:a.prototype.render,render:function(e){this._UIBase_render(e),this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(e,t){var n=this.getDom("overlay").style,i=this.lengthOfCellSide;n.width=e*i+"px",n.height=t*i+"px";var o=this.getDom("label");o.innerHTML=e+this.editor.getLang("t_col")+" x "+t+this.editor.getLang("t_row"),this.numCols=e,this.numRows=t},_onMouseOver:function(e,t){var n=e.relatedTarget||e.fromElement;r.contains(t,n)||t===n||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(e,t){var n=e.relatedTarget||e.toElement;r.contains(t,n)||t===n||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(e){this.getDom("overlay").style;var t=r.getEventOffset(e),n=this.lengthOfCellSide,i=Math.ceil(t.left/n),o=Math.ceil(t.top/n);this._track(i,o)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}},o.inherits(e,a),n.exports=e})()}),define("ueditor/ui/stateful",["../baidu","../core/browser","../editor","../core/domUtils","../dom","../core/utils","../core/dtd","./uiutils","./ui"],function(e,t,n){var i=e("../baidu"),o=e("../core/browser"),r=e("../core/domUtils"),a=e("./uiutils");(function(){var e='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(o.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');i.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var t=this._Stateful_dGetHtmlTpl();return t.replace(/stateful/g,function(){return e})},Stateful_onMouseEnter:function(e,t){this.target=t,(!this.isDisabled()||this.alwalysHoverable)&&(this.addState("hover"),this.fireEvent("over"))},Stateful_onMouseLeave:function(){(!this.isDisabled()||this.alwalysHoverable)&&(this.removeState("hover"),this.removeState("active"),this.fireEvent("out"))},Stateful_onMouseOver:function(e,t){var n=e.relatedTarget;a.contains(t,n)||t===n||this.Stateful_onMouseEnter(e,t)},Stateful_onMouseOut:function(e,t){var n=e.relatedTarget;a.contains(t,n)||t===n||this.Stateful_onMouseLeave(e,t)},Stateful_onMouseDown:function(){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(e){return r.hasClass(this.getStateDom(),"edui-state-"+e)},addState:function(e){this.hasState(e)||(this.getStateDom().className+=" edui-state-"+e)},removeState:function(e){this.hasState(e)&&r.removeClasses(this.getStateDom(),["edui-state-"+e])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(e){!this.isDisabled()&&e?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(e){e?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}},n.exports=i.editor.ui.Stateful})()}),define("ueditor/ui/button",["../baidu","../core/utils","../editor","../core/browser","./uibase","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","../core/EventBase","./stateful"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uibase"),a=e("./stateful");(function(){var e=i.editor.ui.Button=function(e){this.initOptions(e),this.initButton()};e.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,initButton:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return false;" onclick="return $$._onClick();">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div>"+"</div>"+"</div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onClick:function(){this.isDisabled()||this.fireEvent("click")}},o.inherits(e,r),o.extend(e.prototype,a),n.exports=e})()}),define("ueditor/ui/splitbutton",["../baidu","../core/utils","../editor","../core/browser","./uiutils","../core/domUtils","../dom","../core/dtd","./ui","./uibase","../core/EventBase","./stateful"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uiutils"),a=e("./uibase"),s=e("./stateful");(function(){var e=i.editor.ui.SplitButton=function(e){this.initOptions(e),this.initSplitButton()};e.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){if(this.initUIBase(),this.Stateful_init(),null!=this.popup){var e=this.popup;this.popup=null,this.setPopup(e)}},_UIBase_postRender:a.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(e){this.popup!==e&&(null!=this.popup&&this.popup.dispose(),e.addListener("show",o.bind(this._onPopupShow,this)),e.addListener("hide",o.bind(this._onPopupHide,this)),e.addListener("postrender",o.bind(function(){e.getDom("body").appendChild(r.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(r.getClientRect(this.getDom()).width+20)+'px"></div>')),e.getDom().className+=" "+this.className},this)),this.popup=e)},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body">'+'<div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);">'+'<div class="edui-box edui-icon"></div>'+"</div>"+'<div class="edui-box edui-splitborder"></div>'+'<div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div>'+"</div></div></div>"},showPopup:function(){var e=r.getClientRect(this.getDom());e.top-=this.popup.SHADOW_RADIUS,e.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(e)},_onArrowClick:function(){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}},o.inherits(e,a),o.extend(e.prototype,s,!0),n.exports=e})()}),define("ueditor/ui/colorbutton",["../baidu","../core/utils","../editor","../core/browser","./uiutils","../core/domUtils","../dom","../core/dtd","./ui","./colorpicker","./uibase","../core/EventBase","./popup","./splitbutton","./stateful"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uiutils"),a=e("./colorpicker"),s=e("./popup"),l=e("./splitbutton");(function(){var e=i.editor.ui.ColorButton=function(e){this.initOptions(e),this.initColorButton()};e.prototype={initColorButton:function(){var e=this;this.popup=new s({content:new a({noColorText:e.editor.getLang("clearColor"),editor:e.editor,onpickcolor:function(t,n){e._onPickColor(n)},onpicknocolor:function(t,n){e._onPickNoColor(n)}}),editor:e.editor}),this.initSplitButton()},_SplitButton_postRender:l.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom("button_body").appendChild(r.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=" edui-colorbutton"},setColor:function(e){this.getDom("colorlump").style.backgroundColor=e,this.color=e},_onPickColor:function(e){this.fireEvent("pickcolor",e)!==!1&&(this.setColor(e),this.popup.hide())},_onPickNoColor:function(){this.fireEvent("picknocolor")!==!1&&this.popup.hide()}},o.inherits(e,l),n.exports=e})()}),define("ueditor/ui/tablebutton",["../baidu","../core/utils","../editor","../core/browser","./popup","./uiutils","../core/domUtils","../dom","../core/dtd","./ui","./uibase","../core/EventBase","./tablepicker","./splitbutton","./stateful"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./popup"),a=e("./tablepicker"),s=e("./splitbutton");
(function(){var e=i.editor.ui.TableButton=function(e){this.initOptions(e),this.initTableButton()};e.prototype={initTableButton:function(){var e=this;this.popup=new r({content:new a({editor:e.editor,onpicktable:function(t,n,i){e._onPickTable(n,i)}}),editor:e.editor}),this.initSplitButton()},_onPickTable:function(e,t){this.fireEvent("picktable",e,t)!==!1&&this.popup.hide()}},o.inherits(e,s),n.exports=e})()}),define("ueditor/ui/autotypesetpicker",["../baidu","../core/utils","../editor","../core/browser","./uibase","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uibase");(function(){var e=i.editor.ui.AutoTypeSetPicker=function(e){this.initOptions(e),this.initAutoTypeSetPicker()};e.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var e=this.editor,t=e.options.autotypeset,n=e.getLang("autoTypeSet"),i="textAlignValue"+e.uid,o="imageBlockLineValue"+e.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap colspan="2"><input type="checkbox" name="mergeEmptyline" '+(t.mergeEmptyline?"checked":"")+">"+n.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(t.removeEmptyline?"checked":"")+">"+n.delLine+"</td></tr>"+'<tr><td nowrap colspan="2"><input type="checkbox" name="removeClass" '+(t.removeClass?"checked":"")+">"+n.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(t.indent?"checked":"")+">"+n.indent+"</td></tr>"+'<tr><td nowrap colspan="2"><input type="checkbox" name="textAlign" '+(t.textAlign?"checked":"")+">"+n.alignment+'</td><td colspan="2" id="'+i+'"><input type="radio" name="'+i+'" value="left" '+(t.textAlign&&"left"==t.textAlign?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+i+'" value="center" '+(t.textAlign&&"center"==t.textAlign?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+i+'" value="right" '+(t.textAlign&&"right"==t.textAlign?"checked":"")+">"+e.getLang("justifyright")+" </tr>"+'<tr><td nowrap colspan="2"><input type="checkbox" name="imageBlockLine" '+(t.imageBlockLine?"checked":"")+">"+n.imageFloat+"</td>"+'<td nowrap colspan="2" id="'+o+'">'+'<input type="radio" name="'+o+'" value="none" '+(t.imageBlockLine&&"none"==t.imageBlockLine?"checked":"")+">"+e.getLang("default")+'<input type="radio" name="'+o+'" value="left" '+(t.imageBlockLine&&"left"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+o+'" value="center" '+(t.imageBlockLine&&"center"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+o+'" value="right" '+(t.imageBlockLine&&"right"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyright")+"</tr>"+'<tr><td nowrap colspan="2"><input type="checkbox" name="clearFontSize" '+(t.clearFontSize?"checked":"")+">"+n.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(t.clearFontFamily?"checked":"")+">"+n.removeFontFamily+"</td></tr>"+'<tr><td nowrap colspan="4"><input type="checkbox" name="removeEmptyNode" '+(t.removeEmptyNode?"checked":"")+">"+n.removeHtml+"</td></tr>"+'<tr><td nowrap colspan="4"><input type="checkbox" name="pasteFilter" '+(t.pasteFilter?"checked":"")+">"+n.pasteFilter+"</td></tr>"+'<tr><td nowrap colspan="4" align="right"><button >'+n.run+"</button></td></tr>"+"</table>"+"</div>"+"</div>"},_UIBase_render:r.prototype.render},o.inherits(e,r),n.exports=e})()}),define("ueditor/ui/autotypesetbutton",["../baidu","../core/utils","../editor","../core/browser","../core/domUtils","../dom","../core/dtd","./popup","./uiutils","./ui","./uibase","../core/EventBase","./autotypesetpicker","./splitbutton","./stateful"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("./popup"),s=e("./autotypesetpicker"),l=e("./splitbutton");(function(){function e(e){for(var t,n=e.editor.options.autotypeset,i=e.getDom(),o=e.editor.uid,a=null,s=null,l=r.getElementsByTagName(i,"input"),d=l.length-1;t=l[d--];)if(a=t.getAttribute("type"),"checkbox"==a&&(s=t.getAttribute("name"),n[s]&&delete n[s],t.checked)){var c=document.getElementById(s+"Value"+o);if(c){if(/input/gi.test(c.tagName))n[s]=c.value;else for(var u,f=c.getElementsByTagName("input"),p=f.length-1;u=f[p--];)if(u.checked){n[s]=u.value;break}}else n[s]=!0}for(var m,h=r.getElementsByTagName(i,"select"),d=0;m=h[d++];){var g=m.getAttribute("name");n[g]=n[g]?m.value:""}e.editor.options.autotypeset=n}var t=i.editor.ui.AutoTypeSetButton=function(e){this.initOptions(e),this.initAutoTypeSetButton()};t.prototype={initAutoTypeSetButton:function(){var t=this;this.popup=new a({content:new s({editor:t.editor}),editor:t.editor,hide:function(){!this._hidden&&this.getDom()&&(e(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var n=0;this.popup.addListener("postRenderAfter",function(){var i=this;if(!n){var o=this.getDom(),r=o.getElementsByTagName("button")[0];r.onclick=function(){e(i),t.editor.execCommand("autotypeset"),i.hide()},n=1}}),this.initSplitButton()}},o.inherits(t,l),n.exports=t})()}),define("ueditor/ui/cellalignpicker",["../baidu","../core/utils","../editor","../core/browser","./popup","./uiutils","../core/domUtils","../dom","../core/dtd","./ui","./uibase","../core/EventBase","./stateful"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./popup"),a=e("./uibase"),s=e("./stateful");(function(){var e=i.editor.ui.CellAlignPicker=function(e){this.initOptions(e),this.initSelected(),this.initCellAlignPicker()};e.prototype={initSelected:function(){var e={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3};this.selected&&(this.selectedIndex=e.valign[this.selected.valign]*e.count+e.align[this.selected.align])},initCellAlignPicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){for(var e=["left","center","right"],t=9,n=null,i=-1,o=[],r=0;t>r;r++)n=this.selectedIndex===r?' class="edui-cellalign-selected" ':"",i=r%3,0===i&&o.push("<tr>"),o.push('<td index="'+r+'" '+n+' stateful><div class="edui-icon edui-'+e[i]+'"></div></td>'),2===i&&o.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+o.join("")+"</table>"+"</div>"+"</div>"},getStateDom:function(){return this.target},_onClick:function(e){var t=e.target||e.srcElement;/icon/.test(t.className)&&(this.items[t.parentNode.getAttribute("index")].onclick(),r.postHide(e))},_UIBase_render:a.prototype.render},o.inherits(e,a),o.extend(e.prototype,s,!0),n.exports=e})()}),define("ueditor/ui/pastepicker",["../baidu","../core/utils","../editor","../core/browser","./stateful","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","./uibase","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./stateful"),a=e("./uiutils"),s=e("./uibase");(function(){var e=i.editor.ui.PastePicker=function(e){this.initOptions(e),this.initPastePicker()};e.prototype={initPastePicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+"</div>"+'<div class="edui-button">'+'<div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful>'+'<div class="edui-richtxticon"></div></div>'+'<div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful>'+'<div class="edui-tagicon"></div></div>'+'<div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful>'+'<div class="edui-plaintxticon"></div></div>'+"</div>"+"</div>"+"</div>"},getStateDom:function(){return this.target},format:function(e){this.editor.ui._isTransfer=!0,this.editor.fireEvent("pasteTransfer",e)},_onClick:function(e){var t=domUtils.getNextDomNode(e),n=a.getViewportRect().height,i=a.getClientRect(t);t.style.top=i.top+i.height>n?-i.height-e.offsetHeight+"px":"",/hidden/gi.test(domUtils.getComputedStyle(t,"visibility"))?(t.style.visibility="visible",domUtils.addClass(e,"edui-state-opened")):(t.style.visibility="hidden",domUtils.removeClasses(e,"edui-state-opened"))},_UIBase_render:s.prototype.render},o.inherits(e,s),o.extend(e.prototype,r,!0),n.exports=e})()}),define("ueditor/ui/toolbar",["../baidu","../core/utils","../editor","../core/browser","./uibase","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uibase"),a=e("./uiutils");(function(){var e=i.editor.ui.Toolbar=function(e){this.initOptions(e),this.initToolbar()};e.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(e){this.items.push(e)},getHtmlTpl:function(){for(var e=[],t=0;this.items.length>t;t++)e[t]=this.items[t].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+e.join("")+"</div>"},postRender:function(){for(var e=this.getDom(),t=0;this.items.length>t;t++)this.items[t].postRender();a.makeUnselectable(e)},_onMouseDown:function(){return!1}},o.inherits(e,r),n.exports=e})()}),define("ueditor/ui/menu",["../baidu","../core/utils","../editor","../core/browser","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","./uibase","../core/EventBase","./popup","./stateful","./cellalignpicker"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("./uiutils"),s=e("./uibase"),l=e("./popup"),d=e("./stateful"),c=e("./cellalignpicker");(function(){var e=i.editor.ui.Menu=function(e){this.initOptions(e),this.initMenu()},t={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};e.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var e=0;this.items.length>e;e++){var t=this.items[e];"-"==t?this.items[e]=this.getSeparator():t instanceof u||(t.editor=this.editor,t.theme=this.editor.options.theme,this.items[e]=this.createItem(t))}},getSeparator:function(){return t},createItem:function(e){return e.menu=this,new u(e)},_Popup_getContentHtmlTpl:l.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var e=[],t=0;this.items.length>t;t++){var n=this.items[t];e[t]=n.renderHtml()}return'<div class="%%-body">'+e.join("")+"</div>"},_Popup_postRender:l.prototype.postRender,postRender:function(){for(var e=this,t=0;this.items.length>t;t++){var n=this.items[t];n.ownerMenu=this,n.postRender()}r.on(this.getDom(),"mouseover",function(t){t=t||event;var n=t.relatedTarget||t.fromElement,i=e.getDom();a.contains(i,n)||i===n||e.fireEvent("over")}),this._Popup_postRender()},queryAutoHide:function(e){if(e){if(a.contains(this.getDom(),e))return!1;for(var t=0;this.items.length>t;t++){var n=this.items[t];if(n.queryAutoHide(e)===!1)return!1}}},clearItems:function(){for(var e=0;this.items.length>e;e++){var t=this.items[e];clearTimeout(t._showingTimer),clearTimeout(t._closingTimer),t.subMenu&&t.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&r.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},o.inherits(e,l);var u=i.editor.ui.MenuItem=function(t){if(this.initOptions(t),this.initUIBase(),this.Stateful_init(),this.subMenu&&!(this.subMenu instanceof e))if(t.className&&-1!=t.className.indexOf("aligntd")){var n=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment"),this.subMenu=new l({content:new c(this.subMenu),parentMenu:n,editor:n.editor,destroy:function(){this.getDom()&&r.remove(this.getDom())}}),this.subMenu.addListener("postRenderAfter",function(){r.on(this.getDom(),"mouseover",function(){n.addState("opened")})})}else this.subMenu=new e(this.subMenu)};u.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div>"+"</div>"},postRender:function(){var e=this;this.addListener("over",function(){e.ownerMenu.fireEvent("submenuover",e),e.subMenu&&e.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){e.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(e._closingTimer),e._closingTimer=null,e.addState("opened")}),this.ownerMenu.addListener("hide",function(){e.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(t,n){n!==e&&e.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(t){return t&&a.contains(e.getDom(),t)?!1:this._bakQueryAutoHide(t)}),this.getDom().style.tabIndex="-1",a.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var e=this;e.isDisabled()||(e.addState("opened"),clearTimeout(e._showingTimer),clearTimeout(e._closingTimer),e._closingTimer=null,e._showingTimer=setTimeout(function(){e.showSubMenu()},250))},delayHideSubMenu:function(){var e=this;e.isDisabled()||(e.removeState("opened"),clearTimeout(e._showingTimer),e._closingTimer||(e._closingTimer=setTimeout(function(){e.hasState("opened")||e.hideSubMenu(),e._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(e){return this.subMenu&&this.hasState("opened")?this.subMenu.queryAutoHide(e):void 0},_onClick:function(e,t){this.hasState("disabled")||this.fireEvent("click",e,t)!==!1&&(this.subMenu?this.showSubMenu():l.postHide(e))},showSubMenu:function(){var e=a.getClientRect(this.getDom());e.right-=5,e.left+=2,e.width-=7,e.top-=4,e.bottom+=4,e.height+=8,this.subMenu.showAnchorRect(e,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},o.inherits(u,s),o.extend(u.prototype,d,!0),n.exports=e})()}),define("ueditor/ui/combox",["../baidu","../core/utils","../editor","../core/browser","./uiutils","../core/domUtils","../dom","../core/dtd","./ui","./menu","./uibase","../core/EventBase","./popup","./stateful","./cellalignpicker","./splitbutton"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uiutils"),a=e("./menu"),s=e("./splitbutton");(function(){var e=i.editor.ui.Combox=function(e){this.initOptions(e),this.initCombox()};e.prototype={uiName:"combox",initCombox:function(){var e=this;this.items=this.items||[];for(var t=0;this.items.length>t;t++){var n=this.items[t];n.uiName="listitem",n.index=t,n.onclick=function(){e.selectByIndex(this.index)}}this.popup=new a({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this}),this.initSplitButton()},_SplitButton_postRender:s.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||""),this.setValue(this.initValue||"")},showPopup:function(){var e=r.getClientRect(this.getDom());e.top+=1,e.bottom-=1,e.height-=2,this.popup.showAnchorRect(e)},getValue:function(){return this.value},setValue:function(e){var t=this.indexByValue(e);-1!=t?(this.selectedIndex=t,this.setLabel(this.items[t].label),this.value=this.items[t].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(e)),this.value=e)},setLabel:function(e){this.getDom("button_body").innerHTML=e,this.label=e},getLabelForUnknowValue:function(e){return e},indexByValue:function(e){for(var t=0;this.items.length>t;t++)if(e==this.items[t].value)return t;return-1},getItem:function(e){return this.items[e]},selectByIndex:function(e){this.items.length>e&&this.fireEvent("select",e)!==!1&&(this.selectedIndex=e,this.value=this.items[e].value,this.setLabel(this.items[e].label))}},o.inherits(e,s),n.exports=e})()}),define("ueditor/ui/dialog",["../baidu","../core/browser","../editor","../core/utils","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","./mask","./uibase","../core/EventBase","./button","./stateful"],function(e,t,n){var i=e("../baidu"),o=e("../core/browser"),r=e("../core/utils"),a=e("../core/domUtils"),s=e("./uiutils"),l=e("./mask"),d=e("./uibase"),c=e("./button");(function(){var e,t,u=i.editor.ui.Dialog=function(e){this.initOptions(r.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(e,t){return t?this.onok():this.oncancel()},holdScroll:!1},e)),this.initDialog()};u.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var n=this,i=this.editor.options.theme;if(this.initUIBase(),this.modalMask=e||(e=new l({className:"edui-dialog-modalmask",theme:i})),this.dragMask=t||(t=new l({className:"edui-dialog-dragmask",theme:i})),this.closeButton=new c({className:"edui-dialog-closebutton",title:n.closeDialog,theme:i,onclick:function(){n.close(!1)}}),this.buttons)for(var o=0;this.buttons.length>o;o++)this.buttons[o]instanceof c||(this.buttons[o]=new c(this.buttons[o]))},fitSize:function(){var e=this.getDom("body"),t=this.mesureSize();return e.style.width=t.width+"px",e.style.height=t.height+"px",t},safeSetOffset:function(e){var t=this,n=t.getDom(),i=s.getViewportRect(),o=s.getClientRect(n),r=e.left;r+o.width>i.right&&(r=i.right-o.width);var a=e.top;a+o.height>i.bottom&&(a=i.bottom-o.height),n.style.left=Math.max(r,0)+"px",n.style.top=Math.max(a,0)+"px"},showAtCenter:function(){this.getDom().style.display="";var e=s.getViewportRect(),t=this.fitSize(),n=0|this.getDom("titlebar").offsetHeight,i=e.width/2-t.width/2,o=e.height/2-(t.height-n)/2-n,r=this.getDom();this.safeSetOffset({left:Math.max(0|i,0),top:Math.max(0|o,0)}),a.hasClass(r,"edui-state-centered")||(r.className+=" edui-state-centered"),this._show()},getContentHtml:function(){var e="";return"string"==typeof this.content?e=this.content:this.iframeUrl&&(e='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),e},getHtmlTpl:function(){var e="";if(this.buttons){for(var t=[],n=0;this.buttons.length>n;n++)t[n]=this.buttons[n].renderHtml();e='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+t.join("")+"</div>"+"</div>"}return'<div id="##" class="%%"><div class="%%-wrap"><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span>"+"</div>"+this.closeButton.renderHtml()+"</div>"+'<div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+e+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var e=this;if(this.addListener("show",function(){e.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){e.modalMask.hide()}),this.buttons)for(var t=0;this.buttons.length>t;t++)this.buttons[t].postRender();a.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e.safeSetOffset(s.getClientRect(e.getDom()))})}),this.holdScroll&&(e.iframeUrl?e.addListener("dialogafterreset",function(){window.setTimeout(function(){var t=document.getElementById(e.id+"_iframe").contentWindow;if(o.ie)var n=window.setInterval(function(){t.document&&t.document.body&&(window.clearInterval(n),n=null,a.on(t.document.body,o.gecko?"DOMMouseScroll":"mousewheel",function(e){a.preventDefault(e)}))},100);else a.on(t,o.gecko?"DOMMouseScroll":"mousewheel",function(e){a.preventDefault(e)})},1)}):a.on(document.getElementById(e.id+"_iframe"),o.gecko?"DOMMouseScroll":"mousewheel",function(e){a.preventDefault(e)})),this._hide()},mesureSize:function(){var e=this.getDom("body"),t=s.getClientRect(this.getDom("content")).width,n=e.style;return n.width=t,s.getClientRect(e)},_onTitlebarMouseDown:function(e){if(this.draggable){var t;s.getViewportRect();var n=this;s.startDrag(e,{ondragstart:function(){t=s.getClientRect(n.getDom()),n.getDom("contmask")&&(n.getDom("contmask").style.visibility="visible"),n.dragMask.show(n.getDom().style.zIndex-1)},ondragmove:function(e,i){var o=t.left+e,r=t.top+i;n.safeSetOffset({left:o,top:r})},ondragstop:function(){n.getDom("contmask")&&(n.getDom("contmask").style.visibility="hidden"),a.removeClasses(n.getDom(),["edui-state-centered"]),n.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml(),this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent("show"),i.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){this._hidden||(this.getDom().style.display="none",this.getDom().style.zIndex="",this._hidden=!0,this.fireEvent("hide"))},open:function(){if(this.autoReset)try{this.reset()}catch(e){this.render(),this.open()}if(this.showAtCenter(),this.iframeUrl)try{this.getDom("iframe").focus()}catch(t){}},_onCloseButtonClick:function(){this.close(!1)},close:function(e){this.fireEvent("close",e)!==!1&&this._hide()}},r.inherits(u,d),n.exports=u})()}),define("ueditor/ui/menubutton",["../baidu","../core/utils","../editor","../core/browser","./menu","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","./uibase","../core/EventBase","./popup","./stateful","./cellalignpicker","./splitbutton"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./menu"),a=e("./splitbutton");(function(){var e=i.editor.ui.MenuButton=function(e){this.initOptions(e),this.initMenuButton()};e.prototype={initMenuButton:function(){var e=this;this.uiName="menubutton",this.popup=new r({items:e.items,className:e.className,editor:e.editor}),this.popup.addListener("show",function(){for(var t=this,n=0;t.items.length>n;n++)t.items[n].removeState("checked"),t.items[n].value==e._value&&(t.items[n].addState("checked"),this.value=e._value)}),this.initSplitButton()},setValue:function(e){this._value=e}},o.inherits(e,a),n.exports=e})()}),define("ueditor/ui/editorui",["../core/utils","../editor","../baidu","../core/browser","./ui","./dialog","../core/domUtils","../dom","../core/dtd","./uiutils","./mask","./uibase","../core/EventBase","./button","./stateful"],function(e,t,n){var i=e("../core/utils"),o=e("../core/browser"),r=e("./ui"),a=e("./dialog");(function(){r.buttons={},r.Dialog=function(e){var t=new a(e);return t.addListener("hide",function(){if(t.editor){var e=t.editor;try{if(o.gecko){var n=e.window.scrollY,i=e.window.scrollX;e.body.focus(),e.window.scrollTo(i,n)}else e.focus()}catch(r){}}}),t};for(var e,t={},s=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","preview","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable"],l=r.addButton=function(e,t){e=e.toLowerCase(),r[e]=function(e){return function(n){var i=new r.Button({className:"edui-for-"+e,title:n.options.labelMap[e]||n.getLang("labelMap."+e)||t||"",onclick:function(){n.execCommand(e)},theme:n.options.theme,showText:!1});return r.buttons[e]=i,n.addListener("selectionchange",function(t,o,r){var a=n.queryCommandState(e);-1==a?(i.setDisabled(!0),i.setChecked(!1)):r||(i.setDisabled(!1),i.setChecked(a))}),i}}(e)},d=0;e=s[d++];)l(e);r.cleardoc=function(e){var t=new r.Button({className:"edui-for-cleardoc",title:e.options.labelMap.cleardoc||e.getLang("labelMap.cleardoc")||"",theme:e.options.theme,onclick:function(){confirm(e.getLang("confirmClear"))&&e.execCommand("cleardoc")}});return r.buttons.cleardoc=t,e.addListener("selectionchange",function(){t.setDisabled(-1==e.queryCommandState("cleardoc"))}),t};var c={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var u in c)(function(e,t){for(var n,i=0;n=t[i++];)(function(t){r[e.replace("float","")+t]=function(n){var i=new r.Button({className:"edui-for-"+e.replace("float","")+t,title:n.options.labelMap[e.replace("float","")+t]||n.getLang("labelMap."+e.replace("float","")+t)||"",theme:n.options.theme,onclick:function(){n.execCommand(e,t)}});return r.buttons[e]=i,n.addListener("selectionchange",function(o,r,a){i.setDisabled(-1==n.queryCommandState(e)),i.setChecked(n.queryCommandValue(e)==t&&!a)}),i}})(n)})(u,c[u]);for(var e,d=0;e=["backcolor","forecolor"][d++];)r[e]=function(e){return function(t){var n=new r.ColorButton({className:"edui-for-"+e,color:"default",title:t.options.labelMap[e]||t.getLang("labelMap."+e)||"",editor:t,onpickcolor:function(n,i){t.execCommand(e,i)},onpicknocolor:function(){t.execCommand(e,"default"),this.setColor("transparent"),this.color="default"},onbuttonclick:function(){t.execCommand(e,this.color)}});return r.buttons[e]=n,t.addListener("selectionchange",function(){n.setDisabled(-1==t.queryCommandState(e))}),n}}(e);var f={noOk:["searchreplace","help","spechars","webapp"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","test"]};for(var u in f)(function(e,n){for(var a,s=0;a=n[s++];)o.opera&&"searchreplace"===a||function(n){r[n]=function(o,a,s){a=a||(o.options.iframeUrlMap||{})[n]||t[n],s=o.options.labelMap[n]||o.getLang("labelMap."+n)||"";var l;l=new r.Dialog(i.extend({iframeUrl:o.ui.mapUrl(a),editor:o,className:"edui-for-"+n,title:s,holdScroll:"insertimage"===n,closeDialog:o.getLang("closeDialog")},"ok"==e?{buttons:[{className:"edui-okbutton",label:o.getLang("ok"),editor:o,onclick:function(){l.close(!0)}},{className:"edui-cancelbutton",label:o.getLang("cancel"),editor:o,onclick:function(){l.close(!1)}}]}:{})),o.ui._dialogs[n+"Dialog"]=l;var d=new r.Button({className:"edui-for-"+n,title:s,onclick:function(){if(l)switch(n){case"wordimage":o.execCommand("wordimage","word_img"),o.word_img&&(l.render(),l.open());break;case"scrawl":-1!=o.queryCommandState("scrawl")&&(l.render(),l.open());break;default:l.render(),l.open()}},theme:o.options.theme,disabled:"scrawl"==n&&-1==o.queryCommandState("scrawl")});return r.buttons[n]=d,o.addListener("selectionchange",function(){var e={edittable:1};if(!(n in e)){var t=o.queryCommandState(n);d.getDom()&&(d.setDisabled(-1==t),d.setChecked(t))}}),d}}(a.toLowerCase())})(u,f[u]);r.snapscreen=function(e,n,i){i=e.options.labelMap.snapscreen||e.getLang("labelMap.snapscreen")||"";var o=new r.Button({className:"edui-for-snapscreen",title:i,onclick:function(){e.execCommand("snapscreen")},theme:e.options.theme});if(r.buttons.snapscreen=o,n=n||(e.options.iframeUrlMap||{}).snapscreen||t.snapscreen){var a=new r.Dialog({iframeUrl:e.ui.mapUrl(n),editor:e,className:"edui-for-snapscreen",title:i,buttons:[{className:"edui-okbutton",label:e.getLang("ok"),editor:e,onclick:function(){a.close(!0)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),editor:e,onclick:function(){a.close(!1)}}]});a.render(),e.ui._dialogs.snapscreenDialog=a}return e.addListener("selectionchange",function(){o.setDisabled(-1==e.queryCommandState("snapscreen"))}),o},r.insertcode=function(e,t,n){t=e.options.insertcode||[],n=e.options.labelMap.insertcode||e.getLang("labelMap.insertcode")||"";var o=[];i.each(t,function(t,n){o.push({label:t,value:n,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var a=new r.Combox({editor:e,items:o,onselect:function(t,n){e.execCommand("insertcode",this.items[n].value)},onbuttonclick:function(){this.showPopup()},title:n,initValue:n,className:"edui-for-insertcode",indexByValue:function(e){if(e)for(var t,n=0;t=this.items[n];n++)if(-1!=t.value.indexOf(e))return n;return-1}});return r.buttons.insertcode=a,e.addListener("selectionchange",function(t,i,o){if(!o){var r=e.queryCommandState("insertcode");if(-1==r)a.setDisabled(!0);else{a.setDisabled(!1);var s=e.queryCommandValue("insertcode");if(!s)return a.setValue(n),void 0;s&&(s=s.replace(/['"]/g,"").split(",")[0]),a.setValue(s)}}}),a},r.fontfamily=function(e,t,n){if(t=e.options.fontfamily||[],n=e.options.labelMap.fontfamily||e.getLang("labelMap.fontfamily")||"",t.length){for(var o,a=0,s=[];o=t[a];a++){var l=e.getLang("fontfamily")[o.name]||"";(function(t,n){s.push({label:t,value:n,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+i.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(o.label||l,o.val)}var d=new r.Combox({editor:e,items:s,onselect:function(t,n){e.execCommand("FontFamily",this.items[n].value)},onbuttonclick:function(){this.showPopup()},title:n,initValue:n,className:"edui-for-fontfamily",indexByValue:function(e){if(e)for(var t,n=0;t=this.items[n];n++)if(-1!=t.value.indexOf(e))return n;return-1}});return r.buttons.fontfamily=d,e.addListener("selectionchange",function(t,n,i){if(!i){var o=e.queryCommandState("FontFamily");if(-1==o)d.setDisabled(!0);else{d.setDisabled(!1);var r=e.queryCommandValue("FontFamily");r&&(r=r.replace(/['"]/g,"").split(",")[0]),d.setValue(r)}}}),d}},r.fontsize=function(e,t,n){if(n=e.options.labelMap.fontsize||e.getLang("labelMap.fontsize")||"",t=t||e.options.fontsize||[],t.length){for(var i=[],o=0;t.length>o;o++){var a=t[o]+"px";i.push({label:a,value:a,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var s=new r.Combox({editor:e,items:i,title:n,initValue:n,onselect:function(t,n){e.execCommand("FontSize",this.items[n].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});return r.buttons.fontsize=s,e.addListener("selectionchange",function(t,n,i){if(!i){var o=e.queryCommandState("FontSize");-1==o?s.setDisabled(!0):(s.setDisabled(!1),s.setValue(e.queryCommandValue("FontSize")))}}),s}},r.paragraph=function(e,t,n){if(n=e.options.labelMap.paragraph||e.getLang("labelMap.paragraph")||"",t=e.options.paragraph||[],!i.isEmptyObject(t)){var o=[];for(var a in t)o.push({value:a,label:t[a]||e.getLang("paragraph")[a],theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var s=new r.Combox({editor:e,items:o,title:n,initValue:n,className:"edui-for-paragraph",onselect:function(t,n){e.execCommand("Paragraph",this.items[n].value)},onbuttonclick:function(){this.showPopup()}});return r.buttons.paragraph=s,e.addListener("selectionchange",function(t,n,i){if(!i){var o=e.queryCommandState("Paragraph");if(-1==o)s.setDisabled(!0);else{s.setDisabled(!1);var r=e.queryCommandValue("Paragraph"),a=s.indexByValue(r);-1!=a?s.setValue(r):s.setValue(s.initValue)}}}),s}},r.customstyle=function(e){var t=e.options.customstyle||[],n=e.options.labelMap.customstyle||e.getLang("labelMap.customstyle")||"";if(t.length){for(var i,o=e.getLang("customstyle"),a=0,s=[];i=t[a++];)(function(t){var n={};n.label=t.label?t.label:o[t.name],n.style=t.style,n.className=t.className,n.tag=t.tag,s.push({label:n.label,value:n,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+n.tag+" "+(n.className?' class="'+n.className+'"':"")+(n.style?' style="'+n.style+'"':"")+">"+n.label+"</"+n.tag+">"+"</div>"
}})})(i);var l=new r.Combox({editor:e,items:s,title:n,initValue:n,className:"edui-for-customstyle",onselect:function(t,n){e.execCommand("customstyle",this.items[n].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(e){for(var t,n=0;t=this.items[n++];)if(t.label==e)return n-1;return-1}});return r.buttons.customstyle=l,e.addListener("selectionchange",function(t,n,i){if(!i){var o=e.queryCommandState("customstyle");if(-1==o)l.setDisabled(!0);else{l.setDisabled(!1);var r=e.queryCommandValue("customstyle"),a=l.indexByValue(r);-1!=a?l.setValue(r):l.setValue(l.initValue)}}}),l}},r.inserttable=function(e,t,n){n=e.options.labelMap.inserttable||e.getLang("labelMap.inserttable")||"";var i=new r.TableButton({editor:e,title:n,className:"edui-for-inserttable",onpicktable:function(t,n,i){e.execCommand("InsertTable",{numRows:i,numCols:n,border:1})},onbuttonclick:function(){this.showPopup()}});return r.buttons.inserttable=i,e.addListener("selectionchange",function(){i.setDisabled(-1==e.queryCommandState("inserttable"))}),i},r.lineheight=function(e){var t=e.options.lineheight||[];if(t.length){for(var n,i=0,o=[];n=t[i++];)o.push({label:n,value:n,theme:e.options.theme,onclick:function(){e.execCommand("lineheight",this.value)}});var a=new r.MenuButton({editor:e,className:"edui-for-lineheight",title:e.options.labelMap.lineheight||e.getLang("labelMap.lineheight")||"",items:o,onbuttonclick:function(){var t=e.queryCommandValue("LineHeight")||this.value;e.execCommand("LineHeight",t)}});return r.buttons.lineheight=a,e.addListener("selectionchange",function(){var t=e.queryCommandState("LineHeight");if(-1==t)a.setDisabled(!0);else{a.setDisabled(!1);var n=e.queryCommandValue("LineHeight");n&&a.setValue((n+"").replace(/cm/,"")),a.setChecked(t)}}),a}};for(var p,m=["top","bottom"],h=0;p=m[h++];)(function(e){r["rowspacing"+e]=function(t){var n=t.options["rowspacing"+e]||[];if(!n.length)return null;for(var i,o=0,a=[];i=n[o++];)a.push({label:i,value:i,theme:t.options.theme,onclick:function(){t.execCommand("rowspacing",this.value,e)}});var s=new r.MenuButton({editor:t,className:"edui-for-rowspacing"+e,title:t.options.labelMap["rowspacing"+e]||t.getLang("labelMap.rowspacing"+e)||"",items:a,onbuttonclick:function(){var n=t.queryCommandValue("rowspacing",e)||this.value;t.execCommand("rowspacing",n,e)}});return r.buttons[e]=s,t.addListener("selectionchange",function(){var n=t.queryCommandState("rowspacing",e);if(-1==n)s.setDisabled(!0);else{s.setDisabled(!1);var i=t.queryCommandValue("rowspacing",e);i&&s.setValue((i+"").replace(/%/,"")),s.setChecked(n)}}),s}})(p);for(var g,v=["insertorderedlist","insertunorderedlist"],b=0;g=v[b++];)(function(e){r[e]=function(t){var n=t.options[e],i=function(){t.execCommand(e,this.value)},o=[];for(var a in n)o.push({label:n[a]||t.getLang()[e][a]||"",value:a,theme:t.options.theme,onclick:i});var s=new r.MenuButton({editor:t,className:"edui-for-"+e,title:t.getLang("labelMap."+e)||"",items:o,onbuttonclick:function(){var n=t.queryCommandValue(e)||this.value;t.execCommand(e,n)}});return r.buttons[e]=s,t.addListener("selectionchange",function(){var n=t.queryCommandState(e);if(-1==n)s.setDisabled(!0);else{s.setDisabled(!1);var i=t.queryCommandValue(e);s.setValue(i),s.setChecked(n)}}),s}})(g);r.fullscreen=function(e,t){t=e.options.labelMap.fullscreen||e.getLang("labelMap.fullscreen")||"";var n=new r.Button({className:"edui-for-fullscreen",title:t,theme:e.options.theme,onclick:function(){e.ui&&e.ui.setFullScreen(!e.ui.isFullScreen()),this.setChecked(e.ui.isFullScreen())}});return r.buttons.fullscreen=n,e.addListener("selectionchange",function(){var t=e.queryCommandState("fullscreen");n.setDisabled(-1==t),n.setChecked(e.ui.isFullScreen())}),n},r.emotion=function(e,n){var i="emotion",o=new r.MultiMenuPop({title:e.options.labelMap[i]||e.getLang("labelMap."+i)||"",editor:e,className:"edui-for-"+i,iframeUrl:e.ui.mapUrl(n||(e.options.iframeUrlMap||{})[i]||t[i])});return r.buttons[i]=o,e.addListener("selectionchange",function(){o.setDisabled(-1==e.queryCommandState(i))}),o},r.autotypeset=function(e){var t=new r.AutoTypeSetButton({editor:e,title:e.options.labelMap.autotypeset||e.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){e.execCommand("autotypeset")}});return r.buttons.autotypeset=t,e.addListener("selectionchange",function(){t.setDisabled(-1==e.queryCommandState("autotypeset"))}),t},n.exports=r})()}),define("ueditor/ui/editor",["../baidu","../editor","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","./uibase","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../editor"),r=e("../core/utils"),a=e("../core/browser"),s=e("../core/domUtils"),l=e("./uiutils"),d=e("./uibase");e("./ui");var c=s.getDomNode;(function(){function e(e){this.initOptions(e),this.initEditorUI()}var t=[];e.prototype={uiName:"editor",initEditorUI:function(){function e(e,t){e.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var n=e.options,i=n.maximumWords,o=n.wordCountMsg,r=n.wordOverFlowMsg,a=t.getDom("wordcount");if(n.wordCount){var s=e.getContentLength(!0);s>i?(a.innerHTML=r,e.fireEvent("wordcountoverflow")):a.innerHTML=o.replace("{#leave}",i-s).replace("{#count}",s)}}this.editor.ui=this,this._dialogs={},this.initUIBase(),this._initToolbars();var t=this.editor,n=this;t.addListener("ready",function(){function o(){e(t,n),s.un(t.document,"click",arguments.callee)}t.getDialog=function(e){return t.ui._dialogs[e+"Dialog"]},s.on(t.window,"scroll",function(e){i.editor.ui.Popup.postHide(e)}),t.ui._actualFrameWidth=t.options.initialFrameWidth,t.options.elementPathEnabled&&(t.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+t.getLang("elementPathTip")+":</div>"),t.options.wordCount&&(s.on(t.document,"click",o),t.ui.getDom("wordcount").innerHTML=t.getLang("wordCountTip")),t.ui._scale(),t.options.scaleEnabled?(t.autoHeightEnabled&&t.disableAutoHeight(),n.enableScale()):n.disableScale(),t.options.elementPathEnabled||t.options.wordCount||t.options.scaleEnabled||(t.ui.getDom("elementpath").style.display="none",t.ui.getDom("wordcount").style.display="none",t.ui.getDom("scale").style.display="none"),t.selection.isFocus()&&t.fireEvent("selectionchange",!1,!0)}),t.addListener("mousedown",function(e,t){var n=t.target||t.srcElement;i.editor.ui.Popup.postHide(t,n),i.editor.ui.ShortCutMenu.postHide(t)}),t.addListener("delcells",function(){o.ui.edittip&&new o.ui.edittip(t),t.getDialog("edittip").open()});var r,a,l=!1;t.addListener("afterpaste",function(){t.queryCommandState("pasteplain")||(i.editor.ui.PastePicker&&(r=new i.editor.ui.Popup({content:new i.editor.ui.PastePicker({editor:t}),editor:t,className:"edui-wordpastepop"}),r.render()),l=!0)}),t.addListener("afterinserthtml",function(){clearTimeout(a),a=setTimeout(function(){if(r&&(l||t.ui._isTransfer)){if(r.isHidden()){var e=s.createElement(t.document,"span",{style:"line-height:0px;",innerHTML:""}),n=t.selection.getRange();n.insertNode(e);var i=c(e,"firstChild","previousSibling");r.showAnchor(3==i.nodeType?i.parentNode:i),s.remove(e)}else r.show();delete t.ui._isTransfer,l=!1}},200)}),t.addListener("contextmenu",function(e,t){i.editor.ui.Popup.postHide(t)}),t.addListener("keydown",function(e,t){r&&r.dispose(t);var n=t.keyCode||t.which;t.altKey&&90==n&&o.ui.buttons.fullscreen.onclick()}),t.addListener("wordcount",function(){e(this,n)}),t.addListener("selectionchange",function(){t.options.elementPathEnabled&&n[(-1==t.queryCommandState("elementpath")?"dis":"en")+"ableElementPath"](),t.options.scaleEnabled&&n[(-1==t.queryCommandState("scale")?"dis":"en")+"ableScale"]()});var d=new i.editor.ui.Popup({editor:t,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide(),t.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(e){this.hide(),t.ui._dialogs[e]&&t.ui._dialogs[e].open()},_onImgSetFloat:function(e){this.hide(),t.execCommand("imagefloat",e)},_setIframeAlign:function(e){var t=d.anchorEl,n=t.cloneNode(!0);switch(e){case-2:n.setAttribute("align","");break;case-1:n.setAttribute("align","left");break;case 1:n.setAttribute("align","right")}t.parentNode.insertBefore(n,t),s.remove(t),d.anchorEl=n,d.showAnchor(d.anchorEl)},_updateIframe:function(){t._iframe=d.anchorEl,t.ui._dialogs.insertframeDialog.open(),d.hide()},_onRemoveButtonClick:function(e){t.execCommand(e),this.hide()},queryAutoHide:function(e){return e&&e.ownerDocument==t.document&&("img"==e.tagName.toLowerCase()||s.findParentByTagName(e,"a",!0))?e!==d.anchorEl:i.editor.ui.Popup.prototype.queryAutoHide.call(this,e)}});d.render(),t.options.imagePopup&&(t.addListener("mouseover",function(e,n){n=n||window.event;var i=n.target||n.srcElement;if(t.ui._dialogs.insertframeDialog&&/iframe/gi.test(i.tagName)){var o=d.formatHtml("<nobr>"+t.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+t.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+t.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+t.getLang("justifyright")+"</span>&nbsp;&nbsp;"+' <span onclick="$$._updateIframe( this);" class="edui-clickable">'+t.getLang("modify")+"</span></nobr>");o?(d.getDom("content").innerHTML=o,d.anchorEl=i,d.showAnchor(d.anchorEl)):d.hide()}}),t.addListener("selectionchange",function(e,n){if(n){var i="",o="",r=t.selection.getRange().getClosedNode(),a=t.ui._dialogs;if(r&&"IMG"==r.tagName){var s="insertimageDialog";if(-1!=r.className.indexOf("edui-faked-video")&&(s="insertvideoDialog"),-1!=r.className.indexOf("edui-faked-webapp")&&(s="webappDialog"),-1!=r.src.indexOf("http://api.map.baidu.com")&&(s="mapDialog"),-1!=r.className.indexOf("edui-faked-music")&&(s="musicDialog"),-1!=r.src.indexOf("http://maps.google.com/maps/api/staticmap")&&(s="gmapDialog"),r.getAttribute("anchorname")&&(s="anchorDialog",i=d.formatHtml("<nobr>"+t.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+t.getLang("modify")+"</span>&nbsp;&nbsp;"+"<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+t.getLang("delete")+"</span></nobr>")),r.getAttribute("word_img")&&(t.word_img=[r.getAttribute("word_img")],s="wordimageDialog"),!a[s])return;o="<nobr>"+t.getLang("property")+": "+'<span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+t.getLang("default")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+t.getLang("justifyleft")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+t.getLang("justifyright")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+t.getLang("justifycenter")+"</span>&nbsp;&nbsp;",!i&&(i=d.formatHtml(o))}if(t.ui._dialogs.linkDialog){var l,c=t.queryCommandValue("link");if(c&&(l=c.getAttribute("_href")||c.getAttribute("href",2))){var u=l;l.length>30&&(u=l.substring(0,20)+"..."),i&&(i+='<div style="height:5px;"></div>'),i+=d.formatHtml("<nobr>"+t.getLang("anthorMsg")+': <a target="_blank" href="'+l+'" title="'+l+'" >'+u+"</a>"+' <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+t.getLang("modify")+"</span>"+' <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+t.getLang("clear")+"</span></nobr>"),d.showAnchor(c)}}i?(d.getDom("content").innerHTML=i,d.anchorEl=r||c,d.showAnchor(d.anchorEl)):d.hide()}}))},_initToolbars:function(){for(var e=this.editor,t=this.toolbars||[],n=[],o=0;t.length>o;o++){for(var r=t[o],a=new i.editor.ui.Toolbar({theme:e.options.theme}),s=0;r.length>s;s++){var l=r[s],d=null;if("string"==typeof l){if(l=l.toLowerCase(),"|"==l&&(l="Separator"),"||"==l&&(l="Breakline"),i.editor.ui[l]&&(d=new i.editor.ui[l](e)),"fullscreen"==l){n&&n[0]?n[0].items.splice(0,0,d):d&&a.items.splice(0,0,d);continue}}else d=l;d&&d.id&&a.add(d)}n[o]=a}this.toolbars=n},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;">'+'<div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+"</div>"+'<div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div>'+'<div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div>'+'<div style="height:0;overflow:hidden;clear:both;"></div>'+"</div>"+"</div>"+'<div id="##_iframeholder" class="%%-iframeholder"></div>'+'<div id="##_bottombar" class="%%-bottomContainer"><table><tr>'+'<td id="##_elementpath" class="%%-bottombar"></td>'+'<td id="##_wordcount" class="%%-wordcount"></td>'+'<td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td>'+"</tr></table></div>"+'<div id="##_scalelayer"></div>'+"</div>"},showWordImageDialog:function(){this.editor.execCommand("wordimage","word_img"),this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var e=[],t=0;this.toolbars.length>t;t++)e.push(this.toolbars[t].renderHtml());return e.join("")},setFullScreen:function(e){var n=this.editor,o=n.container.parentNode.parentNode;if(this._fullscreen!=e){if(this._fullscreen=e,this.editor.fireEvent("beforefullscreenchange",e),i.editor.browser.gecko)var r=n.selection.getRange().createBookmark();if(e){for(;"BODY"!=o.tagName;){var s=i.editor.dom.domUtils.getComputedStyle(o,"position");t.push(s),o.style.position="static",o=o.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._bakEditorContaninerWidth=n.iframe.parentNode.offsetWidth,this._bakAutoHeight&&(n.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom("iframeholder").style.cssText,n.iframe.parentNode.style.width="",this._updateFullScreen()}else{for(;"BODY"!=o.tagName;)o.style.position=t.shift(),o=o.parentNode;this.getDom().style.cssText=this._bakCssText,this.getDom("iframeholder").style.cssText=this._bakCssText1,this._bakAutoHeight&&(n.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,n.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px",window.scrollTo(0,this._bakScrollTop)}if(a.gecko&&"true"===n.body.contentEditable){var l=document.createElement("input");document.body.appendChild(l),n.body.contentEditable=!1,setTimeout(function(){l.focus(),setTimeout(function(){n.body.contentEditable=!0,n.fireEvent("fullscreenchanged",e),n.selection.getRange().moveToBookmark(r).select(!0),i.editor.dom.domUtils.remove(l),e&&window.scroll(0,0)},0)},0)}"true"===n.body.contentEditable&&(this.editor.fireEvent("fullscreenchanged",e),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var e=l.getViewportRect();if(this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+e.width+"px;height:"+e.height+"px;z-index:"+(1*this.getDom().style.zIndex+100),l.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(e.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0)),a.gecko)try{window.onresize()}catch(t){}}},_updateElementPath:function(){var e,t=this.getDom("elementpath");if(this.elementPathEnabled&&(e=this.editor.queryCommandValue("elementpath"))){for(var n,i=[],o=0;n=e[o];o++)i[o]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+o+'&quot;);">'+n+"</span>");t.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+i.join(" &gt; ")+"</div>"}else t.style.display="none"},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="",e.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){var e=this.getDom("elementpath");e.style.display="",this.elementPathEnabled=!0,this._updateElementPath()},_scale:function(){function e(){h=s.getXY(l),g||(g=r.options.minFrameHeight+c.offsetHeight+u.offsetHeight),p.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+l.offsetWidth+"px;height:"+l.offsetHeight+"px;z-index:"+(r.options.zIndex+1),s.on(o,"mousemove",t),s.on(d,"mouseup",n),s.on(o,"mouseup",n)}function t(e){i();var t=e||window.event;b=t.pageX||o.documentElement.scrollLeft+t.clientX,y=t.pageY||o.documentElement.scrollTop+t.clientY,x=b-h.x,C=y-h.y,x>=v&&(m=!0,p.style.width=x+"px"),C>=g&&(m=!0,p.style.height=C+"px")}function n(){m&&(m=!1,r.ui._actualFrameWidth=p.offsetWidth-2,l.style.width=r.ui._actualFrameWidth+"px",r.setHeight(p.offsetHeight-u.offsetHeight-c.offsetHeight-2)),p&&(p.style.display="none"),i(),s.un(o,"mousemove",t),s.un(d,"mouseup",n),s.un(o,"mouseup",n)}function i(){a.ie?o.selection.clear():window.getSelection().removeAllRanges()}var o=document,r=this.editor,l=r.container,d=r.document,c=this.getDom("toolbarbox"),u=this.getDom("bottombar"),f=this.getDom("scale"),p=this.getDom("scalelayer"),m=!1,h=null,g=0,v=r.options.minFrameWidth,b=0,y=0,x=0,C=0,N=this;this.editor.addListener("fullscreenchanged",function(e,t){if(t)N.disableScale();else if(N.editor.options.scaleEnabled){N.enableScale();var n=N.editor.document.createElement("span");N.editor.body.appendChild(n),N.editor.body.style.height=Math.max(s.getXY(n).y,N.editor.iframe.offsetHeight-20)+"px",s.remove(n)}}),this.enableScale=function(){1!=r.queryCommandState("source")&&(f.style.display="",this.scaleEnabled=!0,s.on(f,"mousedown",e))},this.disableScale=function(){f.style.display="none",this.scaleEnabled=!1,s.un(f,"mousedown",e)}},isFullScreen:function(){return this._fullscreen},postRender:function(){d.prototype.postRender.call(this);for(var e=0;this.toolbars.length>e;e++)this.toolbars[e].postRender();var t,n=this,o=i.editor.dom.domUtils,r=function(){clearTimeout(t),t=setTimeout(function(){n._updateFullScreen()})};o.on(window,"resize",r),n.addListener("destroy",function(){o.un(window,"resize",r),clearTimeout(t)})},showToolbarMsg:function(e,t){if(this.getDom("toolbarmsg_label").innerHTML=e,this.getDom("toolbarmsg").style.display="",!t){var n=this.getDom("upload_dialog");n.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();e.style.zoom="1"==e.style.zoom?"100%":"1"}},r.inherits(e,i.editor.ui.UIBase);var u={};o.ui.Editor=function(t){var n=new o.Editor(t);n.options.editor=n;var i=n.render;return n.render=function(t){t.constructor===String&&(n.key=t,u[t]=n),r.domReady(function(){function o(){if(n.setOpt({labelMap:n.options.labelMap||n.getLang("labelMap")}),new e(n.options),t&&(t.constructor===String&&(t=document.getElementById(t)),t&&t.getAttribute("name")&&(n.options.textarea=t.getAttribute("name")),t&&/script|textarea/gi.test(t.tagName))){var o=document.createElement("div");t.parentNode.insertBefore(o,t);var r=t.value||t.innerHTML;n.options.initialContent=/^[\t\r\n ]*$/.test(r)?n.options.initialContent:r.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),t.className&&(o.className=t.className),t.style.cssText&&(o.style.cssText=t.style.cssText),/textarea/i.test(t.tagName)?(n.textarea=t,n.textarea.style.display="none"):(t.parentNode.removeChild(t),t.id&&(o.id=t.id)),t=o,t.innerHTML=""}s.addClass(t,"edui-"+n.options.theme),n.ui.render(t);var a=n.options;n.container=n.ui.getDom();for(var l,d=s.findParents(t,!0),c=[],u=0;l=d[u];u++)c[u]=l.style.display,l.style.display="block";a.minFrameWidth=a.initialFrameWidth?a.initialFrameWidth:a.initialFrameWidth=t.offsetWidth,a.initialFrameHeight?a.minFrameHeight=a.initialFrameHeight:a.initialFrameHeight=a.minFrameHeight=t.offsetHeight;for(var l,u=0;l=d[u];u++)l.style.display=c[u];t.style.height&&(t.style.height=""),n.container.style.width=a.initialFrameWidth+(/%$/.test(a.initialFrameWidth)?"":"px"),n.container.style.zIndex=a.zIndex,i.call(n,n.ui.getDom("iframeholder"))}n.langIsReady?o():n.addListener("langReady",o)})},n},o.getEditor=function(e,t){var n=u[e];return n||(n=u[e]=new o.ui.Editor(t),n.render(e)),n},o.delEditor=function(e){var t;(t=u[e])&&(t.key&&t.destroy(),delete u[e])},n.exports=o.ui.Editor})()}),define("ueditor/ui/multiMenu",["../baidu","../core/utils","../editor","../core/browser","./popup","./uiutils","../core/domUtils","../dom","../core/dtd","./ui","./uibase","../core/EventBase","./splitbutton","./stateful"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./popup"),a=e("./splitbutton");(function(){var e=i.editor.ui.MultiMenuPop=function(e){this.initOptions(e),this.initMultiMenu()};e.prototype={initMultiMenu:function(){var e=this;this.popup=new r({content:"",editor:e.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+e.id+'_iframe" src="'+e.iframeUrl+'" frameborder="0"></iframe>',e.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*e.editor.container.style.zIndex+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},o.inherits(e,a),n.exports=e})()}),define("ueditor/ui/shortcutmenu",["./ui","../baidu","./uibase","../core/utils","../editor","../core/browser","../core/domUtils","../dom","../core/dtd","./uiutils","../core/EventBase"],function(e,t,n){var i=e("./ui"),o=e("./uibase"),r=e("./uiutils"),a=e("../core/utils"),s=e("../core/domUtils"),l=e("../core/browser");(function(){function e(e){var t=e.target||e.srcElement,n=s.findParent(t,function(e){return s.hasClass(e,"edui-shortcutmenu")||s.hasClass(e,"edui-popup")},!0);if(!n)for(var i,o=0;i=d[o++];)i.hide()}var t,d=[],c=!1,u=i.ShortCutMenu=function(e){this.initOptions(e),this.initShortCutMenu()};u.postHide=e,u.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[],this.initUIBase(),this.initItems(),this.initEvent(),d.push(this)},initEvent:function(){var e=this,n=e.editor.document;s.on(n,"mousemove",function(n){if(e.isHidden===!1){if(e.getSubMenuMark()||"contextmenu"==e.eventType)return;var i=!0,o=e.getDom(),r=o.offsetWidth,a=o.offsetHeight,s=r/2+e.SPACE,l=a/2,d=Math.abs(n.screenX-e.left),c=Math.abs(n.screenY-e.top);clearTimeout(t),t=setTimeout(function(){c>0&&l>c?e.setOpacity(o,"1"):c>l&&l+70>c?(e.setOpacity(o,"0.5"),i=!1):c>l+70&&l+140>c&&e.hide(),i&&d>0&&s>d?e.setOpacity(o,"1"):d>s&&s+70>d?e.setOpacity(o,"0.5"):d>s+70&&s+140>d&&e.hide()})}}),l.chrome&&s.on(n,"mouseout",function(t){var n=t.relatedTarget||t.toElement;(null==n||"HTML"==n.tagName)&&e.hide()}),e.editor.addListener("afterhidepop",function(){e.isHidden||(c=!0)})},initItems:function(){if(a.isArray(this.items))for(var e=0,t=this.items.length;t>e;e++){var n=this.items[e].toLowerCase();i[n]&&(this.items[e]=new i[n](this.editor),this.items[e].className+=" edui-shortcutsubmenu ")}},setOpacity:function(e,t){l.ie&&9>l.version?e.style.filter="alpha(opacity = "+100*parseFloat(t)+");":e.style.opacity=t},getSubMenuMark:function(){c=!1;for(var e,t=r.getFixedLayer(),n=s.getElementsByTagName(t,"div",function(e){return s.hasClass(e,"edui-shortcutsubmenu edui-popup")}),i=0;e=n[i++];)"none"!=e.style.display&&(c=!0);return c},show:function(e,t){function n(e){0>e.left&&(e.left=0),0>e.top&&(e.top=0),l.style.cssText="position:absolute;left:"+e.left+"px;top:"+e.top+"px;"}function i(e){e.tagName||(e=e.getDom()),a.left=parseInt(e.style.left),a.top=parseInt(e.style.top),a.top-=l.offsetHeight+15,n(a)}var o=this,a={},l=this.getDom(),d=r.getFixedLayer();if(o.eventType=e.type,l.style.cssText="display:block;left:-9999px","contextmenu"==e.type&&t){var c=s.getElementsByTagName(d,"div","edui-contextmenu")[0];c?i(c):o.editor.addListener("aftershowcontextmenu",function(e,t){i(t)})}else a=r.getViewportOffsetByEvent(e),a.top-=l.offsetHeight+o.SPACE,a.left+=o.SPACE+20,n(a),o.setOpacity(l,.2);o.isHidden=!1,o.left=e.screenX+l.offsetWidth/2-o.SPACE,o.top=e.screenY-l.offsetHeight/2-o.SPACE,o.editor&&(l.style.zIndex=1*o.editor.container.style.zIndex+10,d.style.zIndex=l.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none"),this.isHidden=!0},postRender:function(){if(a.isArray(this.items))for(var e,t=0;e=this.items[t++];)e.postRender()},getHtmlTpl:function(){var e;if(a.isArray(this.items)){e=[];for(var t=0;this.items.length>t;t++)e[t]=this.items[t].renderHtml();e=e.join("")}else e=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+e+"</div>"}},a.inherits(u,o),s.on(document,"mousedown",function(t){e(t)}),s.on(window,"scroll",function(t){e(t)}),n.exports=u})()}),define("ueditor/ui/breakline",["../baidu","../core/utils","../editor","../core/browser","./uibase","../core/domUtils","../dom","../core/dtd","./uiutils","./ui","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../core/utils"),r=e("./uibase");(function(){var e=i.editor.ui.Breakline=function(e){this.initOptions(e),this.initSeparator()};e.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}},o.inherits(e,r),n.exports=e})()}),define("ueditor/plugins/autoheight",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils"),r=e("../core/browser");i.plugins.autoheight=function(){function e(){var e=this;clearTimeout(l),d||(l=setTimeout(function(){(!e.queryCommandState||e.queryCommandState&&1!=e.queryCommandState("source"))&&(i||(i=e.document.createElement("span"),i.style.cssText="display:block;width:0;margin:0;padding:0;border:0;clear:both;",i.innerHTML="."),a=i.cloneNode(!0),e.body.appendChild(a),s=Math.max(o.getXY(a).y+a.offsetHeight,Math.max(u.minFrameHeight,u.initialFrameHeight)),s!=c&&(e.setHeight(s,!0),c=s),o.remove(a))},50))}var t=this;if(t.autoHeightEnabled=t.options.autoHeightEnabled!==!1,t.autoHeightEnabled){var n,i,a,s,l,d,c=0,u=t.options;t.addListener("fullscreenchanged",function(e,t){d=t}),t.addListener("destroy",function(){t.removeListener("contentchange afterinserthtml keyup mouseup",e)}),t.enableAutoHeight=function(){var t=this;if(t.autoHeightEnabled){var i=t.document;t.autoHeightEnabled=!0,n=i.body.style.overflowY,i.body.style.overflowY="hidden",t.addListener("contentchange afterinserthtml keyup mouseup",e),setTimeout(function(){e.call(t)},r.gecko?100:0),t.fireEvent("autoheightchanged",t.autoHeightEnabled)}},t.disableAutoHeight=function(){t.body.style.overflowY=n||"",t.removeListener("contentchange",e),t.removeListener("keyup",e),t.removeListener("mouseup",e),t.autoHeightEnabled=!1,t.fireEvent("autoheightchanged",t.autoHeightEnabled)},t.addListener("ready",function(){t.enableAutoHeight();var n;o.on(r.ie?t.body:t.document,r.webkit?"dragover":"drop",function(){clearTimeout(n),n=setTimeout(function(){e.call(this)},100)})})}},n.exports=i.plugins.autoheight}),define("ueditor/plugins/autolink",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("../core/browser");i.plugins.autolink=function(){var e=0;if(!a.ie){var t=this;t.addListener("reset",function(){e=0}),t.addListener("keydown",function(e,n){var i=n.keyCode||n.which;if(32==i||13==i){for(var a,s,l=t.selection.getNative(),d=l.getRangeAt(0).cloneRange(),c=d.startContainer;1==c.nodeType&&d.startOffset>0&&(c=d.startContainer.childNodes[d.startOffset-1]);)d.setStart(c,1==c.nodeType?c.childNodes.length:c.nodeValue.length),d.collapse(!0),c=d.startContainer;do{if(0==d.startOffset){for(c=d.startContainer.previousSibling;c&&1==c.nodeType;)c=c.lastChild;if(!c||r.isFillChar(c))break;a=c.nodeValue.length}else c=d.startContainer,a=d.startOffset;d.setStart(c,a-1),s=(""+d).charCodeAt(0)}while(160!=s&&32!=s);if((""+d).replace(RegExp(r.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;(""+d).length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(""+d);)try{d.setStart(d.startContainer,d.startOffset+1)}catch(u){for(var c=d.startContainer;!(next=c.nextSibling);){if(r.isBody(c))return;c=c.parentNode}d.setStart(next,0)}if(r.findParentByTagName(d.startContainer,"a",!0))return;var f,p=t.document.createElement("a"),m=t.document.createTextNode(" ");t.undoManger&&t.undoManger.save(),p.appendChild(d.extractContents()),p.href=p.innerHTML=p.innerHTML.replace(/<[^>]+>/g,""),f=p.getAttribute("href").replace(RegExp(r.fillChar,"g"),""),f=/^(?:https?:\/\/)/gi.test(f)?f:"http://"+f,p.setAttribute("_src",o.html(f)),p.href=o.html(f),d.insertNode(p),p.parentNode.insertBefore(m,p.nextSibling),d.setStart(m,0),d.collapse(!0),l.removeAllRanges(),l.addRange(d),t.undoManger&&t.undoManger.save()}}})}},n.exports=i.plugins.autolink}),define("ueditor/plugins/autotypeset",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("../core/dtd");i.plugins.autotypeset=function(){function e(e,t){return e&&3!=e.nodeType?r.isBr(e)?1:e&&e.parentNode&&u[e.tagName.toLowerCase()]?i&&i.contains(e)||e.getAttribute("pagebreak")?0:t?!r.isEmptyBlock(e):r.isEmptyBlock(e,RegExp("[\\s"+r.fillChar+"]","g")):void 0:0}function t(e){e.style.cssText||(r.removeAttributes(e,["style"]),"span"==e.tagName.toLowerCase()&&r.hasNoAttributes(e)&&r.remove(e,!0))}function n(n,o){var s,u=this;if(o){if(!l.pasteFilter)return;s=u.document.createElement("div"),s.innerHTML=o.html}else s=u.document.body;for(var f,p=r.getElementsByTagName(s,"*"),m=0;f=p[m++];)if(u.fireEvent("excludeNodeinautotype",f)!==!0){if(l.clearFontSize&&f.style.fontSize&&(r.removeStyle(f,"font-size"),t(f)),l.clearFontFamily&&f.style.fontFamily&&(r.removeStyle(f,"font-family"),t(f)),e(f)){if(l.mergeEmptyline)for(var h,g=f.nextSibling,v=r.isBr(f);e(g)&&(h=g,g=h.nextSibling,!v||g&&(!g||r.isBr(g)));)r.remove(h);if(l.removeEmptyline&&r.inDoc(f,s)&&!c[f.parentNode.tagName.toLowerCase()]){if(r.isBr(f)&&(g=f.nextSibling,g&&!r.isBr(g)))continue;r.remove(f);continue}}if(e(f,!0)&&"SPAN"!=f.tagName&&(l.indent&&(f.style.textIndent=l.indentValue),l.textAlign&&(f.style.textAlign=l.textAlign)),l.removeClass&&f.className&&!d[f.className.toLowerCase()]){if(i&&i.contains(f))continue;r.removeAttributes(f,["class"])}if(l.imageBlockLine&&"img"==f.tagName.toLowerCase()&&!f.getAttribute("emotion"))if(o){var b=f;switch(l.imageBlockLine){case"left":case"right":case"none":for(var h,y,g,x=b.parentNode;a.$inline[x.tagName]||"A"==x.tagName;)x=x.parentNode;if(h=x,"P"==h.tagName&&"center"==r.getStyle(h,"text-align")&&!r.isBody(h)&&1==r.getChildCount(h,function(e){return!r.isBr(e)&&!r.isWhitespace(e)}))if(y=h.previousSibling,g=h.nextSibling,y&&g&&1==y.nodeType&&1==g.nodeType&&y.tagName==g.tagName&&r.isBlockElm(y)){for(y.appendChild(h.firstChild);g.firstChild;)y.appendChild(g.firstChild);r.remove(h),r.remove(g)}else r.setStyle(h,"text-align","");r.setStyle(b,"float",l.imageBlockLine);break;case"center":if("center"!=u.queryCommandValue("imagefloat")){for(x=b.parentNode,r.setStyle(b,"float","none"),h=b;x&&1==r.getChildCount(x,function(e){return!r.isBr(e)&&!r.isWhitespace(e)})&&(a.$inline[x.tagName]||"A"==x.tagName);)h=x,x=x.parentNode;
var C=u.document.createElement("p");r.setAttributes(C,{style:"text-align:center"}),h.parentNode.insertBefore(C,h),C.appendChild(h),r.setStyle(h,"float","")}}}else{var N=u.selection.getRange();N.selectNode(f).select(),u.execCommand("imagefloat",l.imageBlockLine)}l.removeEmptyNode&&l.removeTagNames[f.tagName.toLowerCase()]&&r.hasNoAttributes(f)&&r.isEmptyBlock(f)&&r.remove(f)}o&&(o.html=s.innerHTML)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:o.extend({div:1},a.$removeEmpty),indent:!1,indentValue:"2em"}});var i,s=this,l=s.options.autotypeset,d={selectTdClass:1,pagebreak:1,anchorclass:1},c={li:1},u={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1};l&&(l.pasteFilter&&s.addListener("beforepaste",n),s.commands.autotypeset={execCommand:function(){s.removeListener("beforepaste",n),l.pasteFilter&&s.addListener("beforepaste",n),n.call(s)}})},n.exports=i.plugins.autotypeset}),define("ueditor/plugins/basestyle",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils");i.plugins.basestyle=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},t=function(e,t){return r.filterNodeList(e.selection.getStartElementPath(),t)},n=this;n.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"}),n.addInputRule(function(e){o.each(e.getNodesByTagName("b i"),function(e){switch(e.tagName){case"b":e.tagName="strong";break;case"i":e.tagName="em"}})});for(var i in e)(function(e,i){n.commands[e]={execCommand:function(e){var o=n.selection.getRange(),a=t(this,i);if(o.collapsed){if(a){var s=n.document.createTextNode("");o.insertNode(s).removeInlineStyle(i),o.setStartBefore(s),r.remove(s)}else{var l=o.document.createElement(i[0]);("superscript"==e||"subscript"==e)&&(s=n.document.createTextNode(""),o.insertNode(s).removeInlineStyle(["sub","sup"]).setStartBefore(s).collapse(!0)),o.insertNode(l).setStart(l,0)}o.collapse(!0)}else("superscript"==e||"subscript"==e)&&(a&&a.tagName.toLowerCase()==e||o.removeInlineStyle(["sub","sup"])),a?o.removeInlineStyle(i):o.applyInlineStyle(i[0]);o.select()},queryCommandState:function(){return t(this,i)?1:0}}})(i,e[i])},n.exports=i.plugins.basestyle}),define("ueditor/plugins/blockquote",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils"),r=e("../core/dtd");i.plugins.blockquote=function(){function e(e){return o.filterNodeList(e.selection.getStartElementPath(),"blockquote")}var t=this;t.commands.blockquote={execCommand:function(t,n){var i=this.selection.getRange(),a=e(this),s=r.blockquote,l=i.createBookmark();if(a){var d=i.startContainer,c=o.isBlockElm(d)?d:o.findParent(d,function(e){return o.isBlockElm(e)}),u=i.endContainer,f=o.isBlockElm(u)?u:o.findParent(u,function(e){return o.isBlockElm(e)});c=o.findParentByTagName(c,"li",!0)||c,f=o.findParentByTagName(f,"li",!0)||f,"LI"==c.tagName||"TD"==c.tagName||c===a||o.isBody(c)?o.remove(a,!0):o.breakParent(c,a),c!==f&&(a=o.findParentByTagName(f,"blockquote"),a&&("LI"==f.tagName||"TD"==f.tagName||o.isBody(f)?a.parentNode&&o.remove(a,!0):o.breakParent(f,a)));for(var p,m=o.getElementsByTagName(this.document,"blockquote"),h=0;p=m[h++];)p.childNodes.length?o.getPosition(p,c)&o.POSITION_FOLLOWING&&o.getPosition(p,f)&o.POSITION_PRECEDING&&o.remove(p,!0):o.remove(p)}else{for(var g=i.cloneRange(),v=1==g.startContainer.nodeType?g.startContainer:g.startContainer.parentNode,b=v,y=1;;){if(o.isBody(v)){b!==v?i.collapsed?(g.selectNode(b),y=0):g.setStartBefore(b):g.setStart(v,0);break}if(!s[v.tagName]){i.collapsed?g.selectNode(b):g.setStartBefore(b);break}b=v,v=v.parentNode}if(y)for(b=v=v=1==g.endContainer.nodeType?g.endContainer:g.endContainer.parentNode;;){if(o.isBody(v)){b!==v?g.setEndAfter(b):g.setEnd(v,v.childNodes.length);break}if(!s[v.tagName]){g.setEndAfter(b);break}b=v,v=v.parentNode}v=i.document.createElement("blockquote"),o.setAttributes(v,n),v.appendChild(g.extractContents()),g.insertNode(v);for(var x,C=o.getElementsByTagName(v,"blockquote"),h=0;x=C[h++];)x.parentNode&&o.remove(x,!0)}i.moveToBookmark(l).select()},queryCommandState:function(){return e(this)?1:0}}},n.exports=i.plugins.blockquote}),define("ueditor/plugins/cleardoc",["../editor","../baidu","../core/browser"],function(e,t,n){var i=e("../editor"),o=e("../core/browser"),r=o.ie;i.commands.cleardoc={execCommand:function(){var e=this,t=e.options.enterTag,n=e.selection.getRange();"br"==t?(e.body.innerHTML="<br/>",n.setStart(e.body,0).setCursor()):(e.body.innerHTML="<p>"+(r?"":"<br/>")+"</p>",n.setStart(e.body.firstChild,0).setCursor(!1,!0)),setTimeout(function(){e.fireEvent("clearDoc")},0)}},n.exports=i.commands.cleardoc}),define("ueditor/plugins/contextmenu",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd","../ui/uiutils","../ui/ui","../ui/menu","../ui/uibase","../core/EventBase","../ui/popup","../ui/stateful","../ui/cellalignpicker"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils"),r=e("../core/browser");e("../ui/uiutils"),e("../ui/menu"),i.plugins.contextmenu=function(){var e,t=this,n=t.getLang("contextMenu"),a=t.options.contextMenu||[{label:n.selectall,cmdName:"selectall"},{label:n.deletecode,cmdName:"highlightcode",icon:"deletehighlightcode"},{label:n.cleardoc,cmdName:"cleardoc",exec:function(){confirm(n.confirmclear)&&this.execCommand("cleardoc")}},"-",{label:n.unlink,cmdName:"unlink"},"-",{group:n.paragraph,icon:"justifyjustify",subMenu:[{label:n.justifyleft,cmdName:"justify",value:"left"},{label:n.justifyright,cmdName:"justify",value:"right"},{label:n.justifycenter,cmdName:"justify",value:"center"},{label:n.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:n.table,icon:"table",subMenu:[{label:n.inserttable,cmdName:"inserttable"},{label:n.deletetable,cmdName:"deletetable"},"-",{label:n.deleterow,cmdName:"deleterow"},{label:n.deletecol,cmdName:"deletecol"},{label:n.insertcol,cmdName:"insertcol"},{label:n.insertcolnext,cmdName:"insertcolnext"},{label:n.insertrow,cmdName:"insertrow"},{label:n.insertrownext,cmdName:"insertrownext"},"-",{label:n.insertcaption,cmdName:"insertcaption"},{label:n.deletecaption,cmdName:"deletecaption"},{label:n.inserttitle,cmdName:"inserttitle"},{label:n.deletetitle,cmdName:"deletetitle"},"-",{label:n.mergecells,cmdName:"mergecells"},{label:n.mergeright,cmdName:"mergeright"},{label:n.mergedown,cmdName:"mergedown"},"-",{label:n.splittorows,cmdName:"splittorows"},{label:n.splittocols,cmdName:"splittocols"},{label:n.splittocells,cmdName:"splittocells"},"-",{label:n.averageDiseRow,cmdName:"averagedistributerow"},{label:n.averageDisCol,cmdName:"averagedistributecol"},"-",{label:n.edittd,cmdName:"edittd",exec:function(){i.ui.edittd&&new i.ui.edittd(this),this.getDialog("edittd").open()}},{label:n.edittable,cmdName:"edittable",exec:function(){i.ui.edittable&&new i.ui.edittable(this),this.getDialog("edittable").open()}}]},{group:n.tablesort,icon:"tablesort",subMenu:[{label:n.reversecurrent,cmdName:"sorttable",value:1},{label:n.orderbyasc,cmdName:"sorttable"},{label:n.reversebyasc,cmdName:"sorttable",exec:function(){this.execCommand("sorttable",function(e,t){var n=e.innerHTML,i=t.innerHTML;return i.localeCompare(n)})}},{label:n.orderbynum,cmdName:"sorttable",exec:function(){this.execCommand("sorttable",function(e,t){var n=e[r.ie?"innerText":"textContent"].match(/\d+/),i=t[r.ie?"innerText":"textContent"].match(/\d+/);return n&&(n=+n[0]),i&&(i=+i[0]),(n||0)-(i||0)})}},{label:n.reversebynum,cmdName:"sorttable",exec:function(){this.execCommand("sorttable",function(e,t){var n=e[r.ie?"innerText":"textContent"].match(/\d+/),i=t[r.ie?"innerText":"textContent"].match(/\d+/);return n&&(n=+n[0]),i&&(i=+i[0]),(i||0)-(n||0)})}}]},{group:n.borderbk,icon:"borderBack",subMenu:[{label:n.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:n.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:n.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb","#ccc"]})}},{label:n.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:n.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:n.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:n.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:n.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:n.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:n.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:n.tableright,value:"right"}]},"-",{label:n.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:n.insertparagraphafter,cmdName:"insertparagraph"},{label:n.copy,cmdName:"copy",exec:function(){alert(n.copymsg)},query:function(){return 0}},{label:n.paste,cmdName:"paste",exec:function(){alert(n.pastemsg)},query:function(){return 0}},{label:n.highlightcode,cmdName:"highlightcode",exec:function(){i.ui.highlightcode&&new i.ui.highlightcode(this),this.ui._dialogs.highlightcodeDialog.open()}}];if(a.length){var s=i.ui.uiUtils;t.addListener("contextmenu",function(l,d){var c=s.getViewportOffsetByEvent(d);t.fireEvent("beforeselectionchange"),e&&e.destroy();for(var u,f=0,p=[];u=a[f];f++){var m;(function(e){function o(){switch(e.icon){case"table":return t.getLang("contextMenu.table");case"justifyjustify":return t.getLang("contextMenu.paragraph");case"aligntd":return t.getLang("contextMenu.aligntd");case"aligntable":return t.getLang("contextMenu.aligntable");case"tablesort":return n.tablesort;case"borderBack":return n.borderbk;default:return""}}if("-"==e)(m=p[p.length-1])&&"-"!==m&&p.push("-");else if(e.hasOwnProperty("group")){for(var r,a=0,s=[];r=e.subMenu[a];a++)(function(e){"-"==e?(m=s[s.length-1])&&"-"!==m?s.push("-"):s.splice(s.length-1):(t.commands[e.cmdName]||i.commands[e.cmdName]||e.query)&&(e.query?e.query():t.queryCommandState(e.cmdName))>-1&&s.push({label:e.label||t.getLang("contextMenu."+e.cmdName+(e.value||""))||"",className:"edui-for-"+e.cmdName+(e.className?" edui-for-"+e.cmdName+"-"+e.className:""),onclick:e.exec?function(){e.exec.call(t)}:function(){t.execCommand(e.cmdName,e.value)}})})(r);s.length&&p.push({label:o(),className:"edui-for-"+e.icon,subMenu:{items:s,editor:t}})}else if((t.commands[e.cmdName]||i.commands[e.cmdName]||e.query)&&(e.query?e.query.call(t):t.queryCommandState(e.cmdName))>-1){if("highlightcode"==e.cmdName){if(1==t.queryCommandState(e.cmdName)&&"deletehighlightcode"!=e.icon)return;if(1!=t.queryCommandState(e.cmdName)&&"deletehighlightcode"==e.icon)return}p.push({label:e.label||t.getLang("contextMenu."+e.cmdName),className:"edui-for-"+(e.icon?e.icon:e.cmdName+(e.value||"")),onclick:e.exec?function(){e.exec.call(t)}:function(){t.execCommand(e.cmdName,e.value)}})}})(u)}if("-"==p[p.length-1]&&p.pop(),e=new i.ui.Menu({items:p,className:"edui-contextmenu",editor:t}),e.render(),e.showAt(c),t.fireEvent("aftershowcontextmenu",e),o.preventDefault(d),r.ie){var h;try{h=t.selection.getNative().createRange()}catch(g){return}if(h.item){var v=new dom.Range(t.document);v.selectNode(h.item(0)).select(!0,!0)}}})}},n.exports=i.plugins.contextmenu}),define("ueditor/plugins/convertcase",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils");i.commands.touppercase=i.commands.tolowercase={execCommand:function(e){var t=this,n=t.selection.getRange();if(n.collapsed)return n;for(var i=n.createBookmark(),r=i.end,a=function(e){return!o.isBr(e)&&!o.isWhitespace(e)},s=o.getNextDomNode(i.start,!1,a);s&&o.getPosition(s,r)&o.POSITION_PRECEDING&&(3==s.nodeType&&(s.nodeValue=s.nodeValue["touppercase"==e?"toUpperCase":"toLowerCase"]()),s=o.getNextDomNode(s,!0,a),s!==r););n.moveToBookmark(i).select()}},n.exports=i.commands.touppercase}),define("ueditor/plugins/defaultfilter",["../editor","../baidu","../core/utils","../core/browser","../core/dtd","../dom"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/browser"),a=e("../core/dtd");i.plugins.defaultfilter=function(){var e=this;e.setOpt("allowDivTransToP",!0),e.addInputRule(function(t){var n,s=this.options.allowDivTransToP;t.traversal(function(t){if("element"==t.type){if(!a.$cdata[t.tagName]&&e.options.autoClearEmptyNode&&a.$inline[t.tagName]&&!a.$empty[t.tagName]&&(!t.attrs||o.isEmptyObject(t.attrs)))return t.firstChild()?"span"!=t.tagName||t.attrs&&!o.isEmptyObject(t.attrs)||t.parentNode.removeChild(t,!0):t.parentNode.removeChild(t),void 0;switch(t.tagName){case"style":case"script":t.setAttr({cdata_tag:t.tagName,cdata_data:encodeURIComponent(t.innerText()||"")}),t.tagName="div",t.removeChild(t.firstChild());break;case"a":(n=t.getAttr("href"))&&t.setAttr("_href",n);break;case"img":if((n=t.getAttr("src"))&&/^data:/.test(n)){t.parentNode.removeChild(t);break}t.setAttr("_src",t.getAttr("src"));break;case"span":r.webkit&&(n=t.getStyle("white-space"))&&/nowrap|normal/.test(n)&&(t.setStyle("white-space",""),e.options.autoClearEmptyNode&&o.isEmptyObject(t.attrs)&&t.parentNode.removeChild(t,!0));break;case"p":(n=t.getAttr("align"))&&(t.setAttr("align"),t.setStyle("text-align",n)),t.firstChild()||t.innerHTML(r.ie?"&nbsp;":"<br/>");break;case"div":if(t.getAttr("cdata_tag"))break;if(n=t.getAttr("class"),n&&/^line number\d+/.test(n))break;if(!s)break;for(var l,d=i.uNode.createElement("p");l=t.firstChild();)"text"!=l.type&&i.dom.dtd.$block[l.tagName]?d.firstChild()?(t.parentNode.insertBefore(d,t),d=i.uNode.createElement("p")):t.parentNode.insertBefore(l,t):d.appendChild(l);d.firstChild()&&t.parentNode.insertBefore(d,t),t.parentNode.removeChild(t);break;case"dl":t.tagName="ul";break;case"dt":case"dd":t.tagName="li";break;case"li":var c=t.getAttr("class");c&&/list\-/.test(c)||t.setAttr();var u=t.getNodesByTagName("ol ul");i.utils.each(u,function(e){t.parentNode.insertAfter(e,t)});break;case"td":case"th":case"caption":t.children&&t.children.length||t.appendChild(r.ie?i.uNode.createText(" "):i.uNode.createElement("br"))}}"comment"==t.type&&t.parentNode.removeChild(t)})}),e.addOutputRule(function(t){var n;t.traversal(function(t){if("element"==t.type){if(e.options.autoClearEmptyNode&&a.$inline[t.tagName]&&!a.$empty[t.tagName]&&(!t.attrs||o.isEmptyObject(t.attrs)))return t.firstChild()?"span"!=t.tagName||t.attrs&&!o.isEmptyObject(t.attrs)||t.parentNode.removeChild(t,!0):t.parentNode.removeChild(t),void 0;switch(t.tagName){case"div":(n=t.getAttr("cdata_tag"))&&(t.tagName=n,t.appendChild(i.uNode.createText(t.getAttr("cdata_data"))),t.setAttr({cdata_tag:"",cdata_data:""}));break;case"a":(n=t.getAttr("_href"))&&t.setAttr({href:n,_href:""});break;case"img":(n=t.getAttr("_src"))&&t.setAttr({src:t.getAttr("_src"),_src:""})}}})})},n.exports=i.plugins.defaultfilter}),define("ueditor/plugins/directionality",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils");(function(){var e=o.isBlockElm,t=function(e){return o.filterNodeList(e.selection.getStartElementPath(),function(e){return e.getAttribute("dir")})},r=function(n,i,r){var a,s=function(e){return 1==e.nodeType?!o.isBookmarkNode(e):!o.isWhitespace(e)},l=t(i);if(l&&n.collapsed)return l.setAttribute("dir",r),n;a=n.createBookmark(),n.enlarge(!0);for(var d,c=n.createBookmark(),u=o.getNextDomNode(c.start,!1,s),f=n.cloneRange();u&&!(o.getPosition(u,c.end)&o.POSITION_FOLLOWING);)if(3!=u.nodeType&&e(u))u=o.getNextDomNode(u,!0,s);else{for(f.setStartBefore(u);u&&u!==c.end&&!e(u);)d=u,u=o.getNextDomNode(u,!1,null,function(t){return!e(t)});f.setEndAfter(d);var p=f.getCommonAncestor();if(!o.isBody(p)&&e(p))p.setAttribute("dir",r),u=p;else{var m=n.document.createElement("p");m.setAttribute("dir",r);var h=f.extractContents();m.appendChild(h),f.insertNode(m),u=m}u=o.getNextDomNode(u,!1,s)}return n.moveToBookmark(c).moveToBookmark(a)};i.commands.directionality={execCommand:function(e,t){var n=this.selection.getRange();if(n.collapsed){var i=this.document.createTextNode("d");n.insertNode(i)}return r(n,this,t),i&&(n.setStartBefore(i).collapse(!0),o.remove(i)),n.select(),!0},queryCommandValue:function(){var e=t(this);return e?e.getAttribute("dir"):"ltr"}},n.exports=i.commands.directionality})()}),define("ueditor/plugins/elementpath",["../editor","../baidu"],function(e,t,n){var i=e("../editor");i.plugins.elementpath=function(){var e,t,n=this;n.setOpt("elementPathEnabled",!0),n.options.elementPathEnabled&&(n.commands.elementpath={execCommand:function(i,o){var r=t[o],a=n.selection.getRange();e=1*o,a.selectNode(r).select()},queryCommandValue:function(){var n=[].concat(this.selection.getStartElementPath()).reverse(),i=[];t=n;for(var o,r=0;o=n[r];r++)if(3!=o.nodeType){var a=o.tagName.toLowerCase();if("img"==a&&o.getAttribute("anchorname")&&(a="anchor"),i[r]=a,e==r){e=-1;break}}return i}})},n.exports=i.plugins.elementpath}),define("ueditor/plugins/undo",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("../core/browser");i.plugins.undo=function(){function e(e,t){if(e.length!=t.length)return 0;for(var n=0,i=e.length;i>n;n++)if(e[n]!=t[n])return 0;return 1}function t(t,n){return t.collapsed!=n.collapsed?0:e(t.startAddress,n.startAddress)&&e(t.endAddress,n.endAddress)?1:0}function n(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&1==this.list.length)return this.reset(),void 0;for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}},this.restore=function(){var e=this.editor,t=this.list[this.index],n=i.htmlparser(t.content.replace(f,""));e.options.autoClearEmptyNode=!1,e.filterInputRule(n),e.options.autoClearEmptyNode=m,e.document.body.innerHTML=n.toHtml(),e.fireEvent("afterscencerestore"),a.ie&&o.each(r.getElementsByTagName(e.document,"td th caption p"),function(t){r.isEmptyNode(t)&&r.fillNode(e.document,t)});try{var s=new dom.Range(e.document).moveToAddress(t.address);s.select(p[s.startContainer.nodeName.toLowerCase()])}catch(l){}this.update(),this.clearKey(),e.fireEvent("reset",!0)},this.getScene=function(){var e=this.editor,t=e.selection.getRange(),n=t.createAddress(!1,!0);e.fireEvent("beforegetscene");var o=i.htmlparser(e.body.innerHTML);e.options.autoClearEmptyNode=!1,e.filterOutputRule(o),e.options.autoClearEmptyNode=m;var r=o.toHtml();return e.fireEvent("aftergetscene"),{address:n,content:r}},this.save=function(e,n){clearTimeout(l);var i=this.getScene(n),o=this.list[this.index];o&&o.content==i.content&&(e?1:t(o.address,i.address))||(this.list=this.list.slice(0,this.index+1),this.list.push(i),this.list.length>c&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())},this.update=function(){this.hasRedo=!!this.list[this.index+1],this.hasUndo=!!this.list[this.index-1]},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){v=0,h=null}}function s(){this.undoManger.save()}var l,d=this,c=d.options.maxUndoCount||20,u=d.options.maxInputCount||20,f=RegExp(r.fillChar+"|</hr>","gi"),p={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},m=d.options.autoClearEmptyNode;d.undoManger=new n,d.undoManger.editor=d,d.addListener("saveScene",function(){var e=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,e)}),d.addListener("beforeexeccommand",s),d.addListener("afterexeccommand",s),d.addListener("reset",function(e,t){t||this.undoManger.reset()}),d.commands.redo=d.commands.undo={execCommand:function(e){this.undoManger[e]()},queryCommandState:function(e){return this.undoManger["has"+("undo"==e.toLowerCase()?"Undo":"Redo")]?0:-1},notNeedUndo:1};var h,g={16:1,17:1,18:1,37:1,38:1,39:1,40:1},v=0,b=!1;d.addListener("ready",function(){r.on(this.body,"compositionstart",function(){b=!0}),r.on(this.body,"compositionend",function(){b=!1})}),d.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var y=!0;d.addListener("keydown",function(e,t){function n(e){e.selection.getRange().collapsed&&e.fireEvent("contentchange"),e.undoManger.save(!1,!0),e.fireEvent("selectionchange")}var i=this,o=t.keyCode||t.which;if(!(g[o]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){if(b)return;if(!i.selection.getRange().collapsed)return i.undoManger.save(!1,!0),y=!1,void 0;0==i.undoManger.list.length&&i.undoManger.save(!0),clearTimeout(l),l=setTimeout(function(){if(b)var e=setInterval(function(){b||(n(i),clearInterval(e))},300);else n(i)},200),h=o,v++,v>=u&&n(i)}}),d.addListener("keyup",function(e,t){var n=t.keyCode||t.which;if(!(g[n]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){if(b)return;y||(this.undoManger.save(!1,!0),y=!0)}})},n.exports=i.plugins.undo}),define("ueditor/plugins/enterkey",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils"),r=e("../core/dtd"),a=e("../core/browser");i.plugins.enterkey=function(){var e,t=this,n=t.options.enterTag;t.addListener("keyup",function(n,i){var r=i.keyCode||i.which;if(13==r){var s,l=t.selection.getRange(),d=l.startContainer;if(a.ie)t.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(e)){if(a.gecko){var c=o.findParentByTagName(d,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],!0);c||(t.document.execCommand("formatBlock",!1,"<p>"),s=1)}else if(1==d.nodeType){var u,f=t.document.createTextNode("");if(l.insertNode(f),u=o.findParentByTagName(f,"div",!0)){for(var p=t.document.createElement("p");u.firstChild;)p.appendChild(u.firstChild);u.parentNode.insertBefore(p,u),o.remove(u),l.setStartBefore(f).setCursor(),s=1}o.remove(f)}t.undoManger&&s&&t.undoManger.save()}a.opera&&l.select()}}}),t.addListener("keydown",function(i,s){var l=s.keyCode||s.which;if(13==l){if(t.fireEvent("beforeenterkeydown"))return o.preventDefault(s),void 0;t.fireEvent("saveScene",!0,!0),e="";var d=t.selection.getRange();if(!d.collapsed){var c=d.startContainer,u=d.endContainer,f=o.findParentByTagName(c,"td",!0),p=o.findParentByTagName(u,"td",!0);if(f&&p&&f!==p||!f&&p||f&&!p)return s.preventDefault?s.preventDefault():s.returnValue=!1,void 0}if("p"==n)a.ie||(c=o.findParentByTagName(d.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],!0),c||a.opera?(e=c.tagName,"p"==c.tagName.toLowerCase()&&a.gecko&&o.removeDirtyAttr(c)):(t.document.execCommand("formatBlock",!1,"<p>"),a.gecko&&(d=t.selection.getRange(),c=o.findParentByTagName(d.startContainer,"p",!0),c&&o.removeDirtyAttr(c))));else if(s.preventDefault?s.preventDefault():s.returnValue=!1,d.collapsed){h=d.document.createElement("br"),d.insertNode(h);var m=h.parentNode;m.lastChild===h?(h.parentNode.insertBefore(h.cloneNode(!0),h),d.setStartBefore(h)):d.setStartAfter(h),d.setCursor()}else if(d.deleteContents(),c=d.startContainer,1==c.nodeType&&(c=c.childNodes[d.startOffset])){for(;1==c.nodeType;){if(r.$empty[c.tagName])return d.setStartBefore(c).setCursor(),t.undoManger&&t.undoManger.save(),!1;if(!c.firstChild){var h=d.document.createElement("br");return c.appendChild(h),d.setStart(c,0).setCursor(),t.undoManger&&t.undoManger.save(),!1}c=c.firstChild}c===d.startContainer.childNodes[d.startOffset]?(h=d.document.createElement("br"),d.insertNode(h).setCursor()):d.setStart(c,0).setCursor()}else h=d.document.createElement("br"),d.insertNode(h).setStartAfter(h).setCursor()}})},n.exports=i.plugins.enterkey}),define("ueditor/plugins/fiximgclick",["../editor","../baidu","../dom","../core/browser","../core/Range","../core/utils","../core/domUtils","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../dom"),r=e("../core/browser");e("../core/Range"),i.plugins.fiximgclick=function(){var e=this;r.webkit&&e.addListener("click",function(t,n){if("IMG"==n.target.tagName){var i=new o.Range(e.document);i.selectNode(n.target).select()}})},n.exports=i.plugins.fiximgclick}),define("ueditor/plugins/font",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("../core/dtd"),s=e("../core/browser"),l=RegExp(r.fillChar,"g");i.plugins.font=function(){function e(e){for(var t;(t=e.parentNode)&&"SPAN"==t.tagName&&1==r.getChildCount(t,function(e){return!r.isBookmarkNode(e)&&!r.isBr(e)});)t.style.cssText+=e.style.cssText,r.remove(e,!0),e=t}function t(e,t,n){if(f[t]&&(e.adjustmentBoundary(),!e.collapsed&&1==e.startContainer.nodeType)){var i=e.startContainer.childNodes[e.startOffset];if(i&&r.isTagNode(i,"span")){var a=e.createBookmark();o.each(r.getElementsByTagName(i,"span"),function(e){e.parentNode&&!r.isBookmarkNode(e)&&("backcolor"!=t||r.getComputedStyle(e,"background-color").toLowerCase()!==n)&&(r.removeStyle(e,f[t]),0==e.style.cssText.replace(/^\s+$/,"").length&&r.remove(e,!0))}),e.moveToBookmark(a)}}}function n(n,i,l){var d,c=n.collapsed,u=n.createBookmark();if(c)for(d=u.start.parentNode;a.$inline[d.tagName];)d=d.parentNode;else d=r.getCommonAncestor(u.start,u.end);o.each(r.getElementsByTagName(d,"span"),function(t){if(t.parentNode&&!r.isBookmarkNode(t)){if(/\s*border\s*:\s*none;?\s*/i.test(t.style.cssText))return/^\s*border\s*:\s*none;?\s*$/.test(t.style.cssText)?r.remove(t,!0):r.removeStyle(t,"border"),void 0;if(/border/i.test(t.style.cssText)&&"SPAN"==t.parentNode.tagName&&/border/i.test(t.parentNode.style.cssText)&&(t.style.cssText=t.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")),"fontborder"!=i||"none"!=l)for(var n=t.nextSibling;n&&1==n.nodeType&&"SPAN"==n.tagName;)if(r.isBookmarkNode(n)&&"fontborder"==i)t.appendChild(n),n=t.nextSibling;else{if(n.style.cssText==t.style.cssText&&(r.moveChild(n,t),r.remove(n)),t.nextSibling===n)break;n=t.nextSibling}if(e(t),s.ie&&s.version>8){var o=r.findParent(t,function(e){return"SPAN"==e.tagName&&/background-color/.test(e.style.cssText)});o&&!/background-color/.test(t.style.cssText)&&(t.style.backgroundColor=o.style.backgroundColor)}}}),n.moveToBookmark(u),t(n,i,l)}var d=this,c={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},u={underline:1,strikethrough:1,fontborder:1},f={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};d.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]}),d.addInputRule(function(e){o.each(e.getNodesByTagName("u s del font strike"),function(e){if("font"==e.tagName){var t=[];for(var n in e.attrs)switch(n){case"size":t.push("font-size:"+e.attrs[n]+"px");break;case"color":t.push("color:"+e.attrs[n]);break;case"face":t.push("font-family:"+e.attrs[n]);break;case"style":t.push(e.attrs[n])}e.attrs={style:t.join(";")}}else{var i="u"==e.tagName?"underline":"line-through";e.attrs={style:(e.getAttr("style")||"")+"text-decoration:"+i+";"}}e.tagName="span"})});for(var p in c)(function(e,t){i.commands[e]={execCommand:function(i,o){o=o||(this.queryCommandState(i)?"none":"underline"==i?"underline":"fontborder"==i?"1px solid #000":"line-through");var a,d=this,c=this.selection.getRange();if("default"==o)c.collapsed&&(a=d.document.createTextNode("font"),c.insertNode(a).select()),d.execCommand("removeFormat","span,a",t),a&&(c.setStartBefore(a).collapse(!0),r.remove(a)),n(c,i,o),c.select();else if(c.collapsed){var f=r.findParentByTagName(c.startContainer,"span",!0);if(a=d.document.createTextNode("font"),!f||f.children.length||f[s.ie?"innerText":"textContent"].replace(l,"").length){if(c.insertNode(a),c.selectNode(a).select(),f=c.document.createElement("span"),u[e]){if(r.findParentByTagName(a,"a",!0))return c.setStartBefore(a).setCursor(),r.remove(a),void 0;d.execCommand("removeFormat","span,a",t)}if(f.style.cssText=t+":"+o,a.parentNode.insertBefore(f,a),!s.ie||s.ie&&9==s.version)for(var p=f.parentNode;!r.isBlockElm(p);)"SPAN"==p.tagName&&(f.style.cssText=p.style.cssText+";"+f.style.cssText),p=p.parentNode;s.opera?setTimeout(function(){c.setStart(f,0).collapse(!0),n(c,i,o),c.select()}):(c.setStart(f,0).collapse(!0),n(c,i,o),c.select())}else c.insertNode(a),u[e]&&(c.selectNode(a).select(),d.execCommand("removeFormat","span,a",t,null),f=r.findParentByTagName(a,"span",!0),c.setStartBefore(a)),f&&(f.style.cssText+=";"+t+":"+o),c.collapse(!0).select();r.remove(a)}else u[e]&&d.queryCommandValue(e)&&d.execCommand("removeFormat","span,a",t),c=d.selection.getRange(),c.applyInlineStyle("span",{style:t+":"+o}),n(c,i,o),c.select();return!0},queryCommandValue:function(e){var n=this.selection.getStart();if("underline"==e||"strikethrough"==e){for(var i,o=n;o&&!r.isBlockElm(o)&&!r.isBody(o);){if(1==o.nodeType&&(i=r.getComputedStyle(o,t),"none"!=i))return i;o=o.parentNode}return"none"}if("fontborder"==e){for(var s,l=n;l&&a.$inline[l.tagName];){if((s=r.getComputedStyle(l,"border"))&&/1px/.test(s)&&/solid/.test(s))return s;l=l.parentNode}return""}if("FontSize"==e){var d=r.getComputedStyle(n,t),l=/^([\d\.]+)(\w+)$/.exec(d);return l?Math.floor(l[1])+l[2]:d}return r.getComputedStyle(n,t)},queryCommandState:function(e){if(!u[e])return 0;var t=this.queryCommandValue(e);return"fontborder"==e?/1px/.test(t)&&/solid/.test(t):t==("underline"==e?"underline":"line-through")}}})(p,c[p])},n.exports=i.plugins.font}),define("ueditor/plugins/formatmatch",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils"),r=e("../core/browser");i.plugins.formatmatch=function(){function e(s,l){function d(e){return m&&e.selectNode(m),e.applyInlineStyle(i[i.length-1].tagName,null,i)}if(r.webkit)var c="IMG"==l.target.tagName?l.target:null;n.undoManger&&n.undoManger.save();var u=n.selection.getRange(),f=c||u.getClosedNode();if(t&&f&&"IMG"==f.tagName)f.style.cssText+=";float:"+(t.style.cssFloat||t.style.styleFloat||"none")+";display:"+(t.style.display||"inline"),t=null;else if(!t){var p=u.collapsed;if(p){var m=n.document.createTextNode("match");u.insertNode(m).select()}n.__hasEnterExecCommand=!0;var h=n.options.removeFormatAttributes;n.options.removeFormatAttributes="",n.execCommand("removeformat"),n.options.removeFormatAttributes=h,n.__hasEnterExecCommand=!1,u=n.selection.getRange(),i.length&&d(u),m&&u.setStartBefore(m).collapse(!0),u.select(),m&&o.remove(m)
}n.undoManger&&n.undoManger.save(),n.removeListener("mouseup",e),a=0}var t,n=this,i=[],a=0;n.addListener("reset",function(){i=[],a=0}),n.commands.formatmatch={execCommand:function(){if(a)return a=0,i=[],n.removeListener("mouseup",e),void 0;var r=n.selection.getRange();if(t=r.getClosedNode(),!t||"IMG"!=t.tagName){r.collapse(!0).shrinkBoundary();var s=r.startContainer;i=o.findParents(s,!0,function(e){return!o.isBlockElm(e)&&1==e.nodeType});for(var l,d=0;l=i[d];d++)if("A"==l.tagName){i.splice(d,1);break}}n.addListener("mouseup",e),a=1},queryCommandState:function(){return a},notNeedUndo:1}},n.exports=i.plugins.formatmatch}),define("ueditor/plugins/inserthtml",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("../core/dtd"),s=e("../core/browser"),l=RegExp(r.fillChar,"g");i.commands.inserthtml={execCommand:function(e,t,n){var d,c,u=this;if(t&&u.fireEvent("beforeinserthtml",t)!==!0){if(d=u.selection.getRange(),c=d.document.createElement("div"),c.style.display="inline",!n){var f=i.htmlparser(t);u.options.filterRules&&i.filterNode(f,u.options.filterRules),u.filterInputRule(f),t=f.toHtml()}if(c.innerHTML=o.trim(t),!d.collapsed){var p=d.startContainer;if(r.isFillChar(p)&&d.setStartBefore(p),p=d.endContainer,r.isFillChar(p)&&d.setEndAfter(p),d.txtToElmBoundary(),d.endContainer&&1==d.endContainer.nodeType&&(p=d.endContainer.childNodes[d.endOffset],p&&r.isBr(p)&&d.setEndAfter(p)),0==d.startOffset&&(p=d.startContainer,r.isBoundaryNode(p,"firstChild")&&(p=d.endContainer,d.endOffset==(3==p.nodeType?p.nodeValue.length:p.childNodes.length)&&r.isBoundaryNode(p,"lastChild")&&(u.body.innerHTML="<p>"+(s.ie?"":"<br/>")+"</p>",d.setStart(u.body.firstChild,0).collapse(!0)))),!d.collapsed&&d.deleteContents(),1==d.startContainer.nodeType){var m,h=d.startContainer.childNodes[d.startOffset];if(h&&r.isBlockElm(h)&&(m=h.previousSibling)&&r.isBlockElm(m)){for(d.setEnd(m,m.childNodes.length).collapse();h.firstChild;)m.appendChild(h.firstChild);r.remove(h)}}}var h,g,m,v,b,y=0;d.inFillChar()&&(h=d.startContainer,r.isFillChar(h)?(d.setStartBefore(h).collapse(!0),r.remove(h)):r.isFillChar(h,!0)&&(h.nodeValue=h.nodeValue.replace(l,""),d.startOffset--,d.collapsed&&d.collapse(!0)));var x=r.findParentByTagName(d.startContainer,"li",!0);if(x){for(var C,N;h=c.firstChild;){for(;h&&(3==h.nodeType||!r.isBlockElm(h)||"HR"==h.tagName);)C=h.nextSibling,d.insertNode(h).collapse(),N=h,h=C;if(h)if(/^(ol|ul)$/i.test(h.tagName)){for(;h.firstChild;)N=h.firstChild,r.insertAfter(x,h.firstChild),x=x.nextSibling;r.remove(h)}else{var w;C=h.nextSibling,w=u.document.createElement("li"),r.insertAfter(x,w),w.appendChild(h),N=h,h=C,x=w}}x=r.findParentByTagName(d.startContainer,"li",!0),r.isEmptyBlock(x)&&r.remove(x),N&&d.setStartAfter(N).collapse(!0).select(!0)}else{for(;h=c.firstChild;){if(y){for(var T=u.document.createElement("p");h&&(3==h.nodeType||!a.$block[h.tagName]);)b=h.nextSibling,T.appendChild(h),h=b;T.firstChild&&(h=T)}if(d.insertNode(h),b=h.nextSibling,!y&&h.nodeType==r.NODE_ELEMENT&&r.isBlockElm(h)&&(g=r.findParent(h,function(e){return r.isBlockElm(e)}),g&&"body"!=g.tagName.toLowerCase()&&(!a[g.tagName][h.nodeName]||h.parentNode!==g))){if(a[g.tagName][h.nodeName])for(v=h.parentNode;v!==g;)m=v,v=v.parentNode;else m=g;r.breakParent(h,m||v);var m=h.previousSibling;r.trimWhiteTextNode(m),m.childNodes.length||r.remove(m),!s.ie&&(C=h.nextSibling)&&r.isBlockElm(C)&&C.lastChild&&!r.isBr(C.lastChild)&&C.appendChild(u.document.createElement("br")),y=1}var C=h.nextSibling;if(!c.firstChild&&C&&r.isBlockElm(C)){d.setStart(C,0).collapse(!0);break}d.setEndAfter(h).collapse()}if(h=d.startContainer,b&&r.isBr(b)&&r.remove(b),r.isBlockElm(h)&&r.isEmptyNode(h))if(b=h.nextSibling)r.remove(h),1==b.nodeType&&a.$block[b.tagName]&&d.setStart(b,0).collapse(!0).shrinkBoundary();else try{h.innerHTML=s.ie?r.fillChar:"<br/>"}catch(k){d.setStartBefore(h),r.remove(h)}try{d.select(!0)}catch(k){}}setTimeout(function(){d=u.selection.getRange(),d.scrollToView(u.autoHeightEnabled,u.autoHeightEnabled?r.getXY(u.iframe).y:0),u.fireEvent("afterinserthtml")},200)}}},n.exports=i.commands.inserthtml}),define("ueditor/plugins/horizontal",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils");e("../core/browser"),i.plugins.horizontal=function(){var e=this;e.commands.horizontal={execCommand:function(e){var t=this;if(-1!==t.queryCommandState(e)){t.execCommand("insertHtml","<hr>");var n=t.selection.getRange(),i=n.startContainer;if(1==i.nodeType&&!i.childNodes[n.startOffset]){var o;(o=i.childNodes[n.startOffset-1])&&1==o.nodeType&&"HR"==o.tagName&&("p"==t.options.enterTag?(o=t.document.createElement("p"),n.insertNode(o),n.setStart(o,0).setCursor()):(o=t.document.createElement("br"),n.insertNode(o),n.setStartBefore(o).setCursor()))}return!0}},queryCommandState:function(){return o.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}},e.addListener("delkeydown",function(e,t){var n=this.selection.getRange();if(n.txtToElmBoundary(!0),o.isStartInblock(n)){var i=n.startContainer,r=i.previousSibling;if(r&&o.isTagNode(r,"hr"))return o.remove(r),n.select(),o.preventDefault(t),!0}})},n.exports=i.plugins.horizontal}),define("ueditor/plugins/image",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e){var t=e("../editor"),n=e("../core/utils"),i=e("../core/domUtils"),o=e("../core/dtd");t.commands.imagefloat={execCommand:function(e,t){var n=this,r=n.selection.getRange();if(!r.collapsed){var a=r.getClosedNode();if(a&&"IMG"==a.tagName)switch(t){case"left":case"right":case"none":for(var s,l,d,c=a.parentNode;o.$inline[c.tagName]||"A"==c.tagName;)c=c.parentNode;if(s=c,"P"==s.tagName&&"center"==i.getStyle(s,"text-align")){if(!i.isBody(s)&&1==i.getChildCount(s,function(e){return!i.isBr(e)&&!i.isWhitespace(e)}))if(l=s.previousSibling,d=s.nextSibling,l&&d&&1==l.nodeType&&1==d.nodeType&&l.tagName==d.tagName&&i.isBlockElm(l)){for(l.appendChild(s.firstChild);d.firstChild;)l.appendChild(d.firstChild);i.remove(s),i.remove(d)}else i.setStyle(s,"text-align","");r.selectNode(a).select()}i.setStyle(a,"float","none"==t?"":t),"none"==t&&i.removeAttributes(a,"align");break;case"center":if("center"!=n.queryCommandValue("imagefloat")){for(c=a.parentNode,i.setStyle(a,"float",""),i.removeAttributes(a,"align"),s=a;c&&1==i.getChildCount(c,function(e){return!i.isBr(e)&&!i.isWhitespace(e)})&&(o.$inline[c.tagName]||"A"==c.tagName);)s=c,c=c.parentNode;r.setStartBefore(s).setCursor(!1),c=n.document.createElement("div"),c.appendChild(s),i.setStyle(s,"float",""),n.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+c.innerHTML+"</p>"),s=n.document.getElementById("_img_parent_tmp"),s.removeAttribute("id"),s=s.firstChild,r.selectNode(s).select(),d=s.parentNode.nextSibling,d&&i.isEmptyNode(d)&&i.remove(d)}}}},queryCommandValue:function(){var e,t,n=this.selection.getRange();return n.collapsed?"none":(e=n.getClosedNode(),e&&1==e.nodeType&&"IMG"==e.tagName?(t=e.getAttribute("align")||i.getComputedStyle(e,"float"),"none"==t&&(t="center"==i.getComputedStyle(e.parentNode,"text-align")?"center":t),{left:1,right:1,center:1}[t]?t:"none"):"none")},queryCommandState:function(){var e,t=this.selection.getRange();return t.collapsed?-1:(e=t.getClosedNode(),e&&1==e.nodeType&&"IMG"==e.tagName?0:-1)}},t.commands.insertimage={execCommand:function(e,t){if(t=n.isArray(t)?t:[t],t.length){var o=this,r=o.selection.getRange(),a=r.getClosedNode();if(a&&/img/i.test(a.tagName)&&"edui-faked-video"!=a.className&&!a.getAttribute("word_img")){var s=t.shift(),l=s.floatStyle;delete s.floatStyle,i.setAttributes(a,s),o.execCommand("imagefloat",l),t.length>0&&(r.setStartAfter(a).setCursor(!1,!0),o.execCommand("insertimage",t))}else{var d,c=[],u="";if(d=t[0],1==t.length)u='<img src="'+d.src+'" '+(d._src?' _src="'+d._src+'" ':"")+(d.width?'width="'+d.width+'" ':"")+(d.height?' height="'+d.height+'" ':"")+("left"==d.floatStyle||"right"==d.floatStyle?' style="float:'+d.floatStyle+';"':"")+(d.title&&""!=d.title?' title="'+d.title+'"':"")+(d.border&&"0"!=d.border?' border="'+d.border+'"':"")+(d.alt&&""!=d.alt?' alt="'+d.alt+'"':"")+(d.hspace&&"0"!=d.hspace?' hspace = "'+d.hspace+'"':"")+(d.vspace&&"0"!=d.vspace?' vspace = "'+d.vspace+'"':"")+"/>","center"==d.floatStyle&&(u='<p style="text-align: center">'+u+"</p>"),c.push(u);else for(var f=0;d=t[f++];)u="<p "+("center"==d.floatStyle?'style="text-align: center" ':"")+'><img src="'+d.src+'" '+(d.width?'width="'+d.width+'" ':"")+(d._src?' _src="'+d._src+'" ':"")+(d.height?' height="'+d.height+'" ':"")+' style="'+(d.floatStyle&&"center"!=d.floatStyle?"float:"+d.floatStyle+";":"")+(d.border||"")+'" '+(d.title?' title="'+d.title+'"':"")+" /></p>",c.push(u);o.execCommand("insertHtml",c.join(""))}}}}}),define("ueditor/plugins/paragraph",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("../core/browser");i.plugins.paragraph=function(){var e=this,t=r.isBlockElm,n=["TD","LI","PRE"],i=function(e,i,a,s){var l,d=e.createBookmark(),c=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!r.isBookmarkNode(e):!r.isWhitespace(e)};e.enlarge(!0);for(var u,f=e.createBookmark(),p=r.getNextDomNode(f.start,!1,c),m=e.cloneRange();p&&!(r.getPosition(p,f.end)&r.POSITION_FOLLOWING);)if(3!=p.nodeType&&t(p))p=r.getNextDomNode(p,!0,c);else{for(m.setStartBefore(p);p&&p!==f.end&&!t(p);)u=p,p=r.getNextDomNode(p,!1,null,function(e){return!t(e)});m.setEndAfter(u),l=e.document.createElement(i),a&&(r.setAttributes(l,a),s&&"customstyle"==s&&a.style&&(l.style.cssText=a.style)),l.appendChild(m.extractContents()),r.isEmptyNode(l)&&r.fillChar(e.document,l),m.insertNode(l);var h=l.parentNode;t(h)&&!r.isBody(l.parentNode)&&-1==o.indexOf(n,h.tagName)&&(s&&"customstyle"==s||(h.getAttribute("dir")&&l.setAttribute("dir",h.getAttribute("dir")),h.style.cssText&&(l.style.cssText=h.style.cssText+";"+l.style.cssText),h.style.textAlign&&!l.style.textAlign&&(l.style.textAlign=h.style.textAlign),h.style.textIndent&&!l.style.textIndent&&(l.style.textIndent=h.style.textIndent),h.style.padding&&!l.style.padding&&(l.style.padding=h.style.padding)),a&&/h\d/i.test(h.tagName)&&!/h\d/i.test(l.tagName)?(r.setAttributes(h,a),s&&"customstyle"==s&&a.style&&(h.style.cssText=a.style),r.remove(l,!0),l=h):r.remove(l.parentNode,!0)),p=-1!=o.indexOf(n,h.tagName)?h:l,p=r.getNextDomNode(p,!1,c)}return e.moveToBookmark(f).moveToBookmark(d)};e.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""}),e.commands.paragraph={execCommand:function(e,t,n,o){var s=this.selection.getRange();if(s.collapsed){var l=this.document.createTextNode("p");if(s.insertNode(l),a.ie){var d=l.previousSibling;d&&r.isWhitespace(d)&&r.remove(d),d=l.nextSibling,d&&r.isWhitespace(d)&&r.remove(d)}}if(s=i(s,t,n,o),l&&(s.setStartBefore(l).collapse(!0),pN=l.parentNode,r.remove(l),r.isBlockElm(pN)&&r.isEmptyNode(pN)&&r.fillNode(this.document,pN)),a.gecko&&s.collapsed&&1==s.startContainer.nodeType){var c=s.startContainer.childNodes[s.startOffset];c&&1==c.nodeType&&c.tagName.toLowerCase()==t&&s.setStart(c,0).collapse(!0)}return s.select(),!0},queryCommandValue:function(){var e=r.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e?e.tagName.toLowerCase():""}}},n.exports=i.plugins.paragraph}),define("ueditor/plugins/indent",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils");i.commands.indent={execCommand:function(){var e=this,t=e.queryCommandState("indent")?"0em":e.options.indentValue||"2em";e.execCommand("Paragraph","p",{style:"text-indent:"+t})},queryCommandState:function(){var e=o.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e&&e.style.textIndent&&parseInt(e.style.textIndent)?1:0}},n.exports=i.commands.indent}),define("ueditor/plugins/justify",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils");i.plugins.justify=function(){var e=r.isBlockElm,t={left:1,right:1,center:1,justify:1},n=function(t,n){var i=t.createBookmark(),a=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!r.isBookmarkNode(e):!r.isWhitespace(e)};t.enlarge(!0);for(var s,l=t.createBookmark(),d=r.getNextDomNode(l.start,!1,a),c=t.cloneRange();d&&!(r.getPosition(d,l.end)&r.POSITION_FOLLOWING);)if(3!=d.nodeType&&e(d))d=r.getNextDomNode(d,!0,a);else{for(c.setStartBefore(d);d&&d!==l.end&&!e(d);)s=d,d=r.getNextDomNode(d,!1,null,function(t){return!e(t)});c.setEndAfter(s);var u=c.getCommonAncestor();if(!r.isBody(u)&&e(u))r.setStyles(u,o.isString(n)?{"text-align":n}:n),d=u;else{var f=t.document.createElement("p");r.setStyles(f,o.isString(n)?{"text-align":n}:n);var p=c.extractContents();f.appendChild(p),c.insertNode(f),d=f}d=r.getNextDomNode(d,!1,a)}return t.moveToBookmark(l).moveToBookmark(i)};i.commands.justify={execCommand:function(e,t){var i,o=this.selection.getRange();return o.collapsed&&(i=this.document.createTextNode("p"),o.insertNode(i)),n(o,t),i&&(o.setStartBefore(i).collapse(!0),r.remove(i)),o.select(),!0},queryCommandValue:function(){var e=this.selection.getStart(),n=r.getComputedStyle(e,"text-align");return t[n]?n:"left"},queryCommandState:function(){var e=this.selection.getStart(),t=e&&r.findParentByTagName(e,["td","th","caption"],!0);return t?-1:0}}},n.exports=i.plugins.justify}),define("ueditor/plugins/keystrokes",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils"),r=e("../core/browser");i.plugins.keystrokes=function(){var e=this,t=!0;e.addListener("keydown",function(n,i){var a=i.keyCode||i.which,s=e.selection.getRange();if(!s.collapsed&&!(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)&&(a>=65&&90>=a||a>=48&&57>=a||a>=96&&111>=a||{13:1,8:1,46:1}[a])){var l=s.startContainer;if(o.isFillChar(l)&&s.setStartBefore(l),l=s.endContainer,o.isFillChar(l)&&s.setEndAfter(l),s.txtToElmBoundary(),s.endContainer&&1==s.endContainer.nodeType&&(l=s.endContainer.childNodes[s.endOffset],l&&o.isBr(l)&&s.setEndAfter(l)),0==s.startOffset&&(l=s.startContainer,o.isBoundaryNode(l,"firstChild")&&(l=s.endContainer,s.endOffset==(3==l.nodeType?l.nodeValue.length:l.childNodes.length)&&o.isBoundaryNode(l,"lastChild"))))return e.fireEvent("saveScene"),e.body.innerHTML="<p>"+(r.ie?"":"<br/>")+"</p>",s.setStart(e.body.firstChild,0).setCursor(!1,!0),e._selectionChange(),void 0}if(8==a){if(s=e.selection.getRange(),t=s.collapsed,e.fireEvent("delkeydown",i))return;var d,c;if(s.collapsed&&s.inFillChar()&&(d=s.startContainer,o.isFillChar(d)?(s.setStartBefore(d).shrinkBoundary(!0).collapse(!0),o.remove(d)):(d.nodeValue=d.nodeValue.replace(RegExp("^"+o.fillChar),""),s.startOffset--,s.collapse(!0).select(!0))),d=s.getClosedNode())return e.fireEvent("saveScene"),s.setStartBefore(d),o.remove(d),s.setCursor(),e.fireEvent("saveScene"),o.preventDefault(i),void 0;if(!r.ie&&(d=o.findParentByTagName(s.startContainer,"table",!0),c=o.findParentByTagName(s.endContainer,"table",!0),d&&!c||!d&&c||d!==c))return i.preventDefault(),void 0}if(9==a){var u={ol:1,ul:1,table:1};if(e.fireEvent("tabkeydown",i))return o.preventDefault(i),void 0;var f=e.selection.getRange();e.fireEvent("saveScene");for(var p=0,m="",h=e.options.tabSize||4,g=e.options.tabNode||"&nbsp;";h>p;p++)m+=g;var v=e.document.createElement("span");if(v.innerHTML=m+o.fillChar,f.collapsed)f.insertNode(v.cloneNode(!0).firstChild).setCursor(!0);else if(d=o.findParent(f.startContainer,y),c=o.findParent(f.endContainer,y),d&&c&&d===c)f.deleteContents(),f.insertNode(v.cloneNode(!0).firstChild).setCursor(!0);else{var b=f.createBookmark(),y=function(e){return o.isBlockElm(e)&&!u[e.tagName.toLowerCase()]};f.enlarge(!0);for(var x=f.createBookmark(),C=o.getNextDomNode(x.start,!1,y);C&&!(o.getPosition(C,x.end)&o.POSITION_FOLLOWING);)C.insertBefore(v.cloneNode(!0).firstChild,C.firstChild),C=o.getNextDomNode(C,!1,y);f.moveToBookmark(x).moveToBookmark(b).select()}o.preventDefault(i)}if(r.gecko&&46==a&&(f=e.selection.getRange(),f.collapsed&&(d=f.startContainer,o.isEmptyBlock(d)))){for(var N=d.parentNode;1==o.getChildCount(N)&&!o.isBody(N);)d=N,N=N.parentNode;return d===N.lastChild&&i.preventDefault(),void 0}}),e.addListener("keyup",function(e,n){var i,a=n.keyCode||n.which,s=this;if(8==a){if(s.fireEvent("delkeyup"))return;if(i=s.selection.getRange(),i.collapsed){var l,d=["h1","h2","h3","h4","h5","h6"];if((l=o.findParentByTagName(i.startContainer,d,!0))&&o.isEmptyBlock(l)){var c=l.previousSibling;if(c&&"TABLE"!=c.nodeName)return o.remove(l),i.setStartAtLast(c).setCursor(!1,!0),void 0;var u=l.nextSibling;if(u&&"TABLE"!=u.nodeName)return o.remove(l),i.setStartAtFirst(u).setCursor(!1,!0),void 0}if(o.isBody(i.startContainer)){var l=o.createElement(s.document,"p",{innerHTML:r.ie?o.fillChar:"<br/>"});i.insertNode(l).setStart(l,0).setCursor(!1,!0)}}if(!t&&(3==i.startContainer.nodeType||1==i.startContainer.nodeType&&o.isEmptyBlock(i.startContainer)))if(r.ie){var f=i.document.createElement("span");i.insertNode(f).setStartBefore(f).collapse(!0),i.select(),o.remove(f)}else i.select()}})},n.exports=i.plugins.keystrokes}),define("ueditor/plugins/lineheight",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils");i.plugins.lineheight=function(){var e=this;e.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]}),e.commands.lineheight={execCommand:function(e,t){return this.execCommand("paragraph","p",{style:"line-height:"+("1"==t?"normal":t+"em")}),!0},queryCommandValue:function(){var e=o.filterNodeList(this.selection.getStartElementPath(),function(e){return o.isBlockElm(e)});if(e){var t=o.getComputedStyle(e,"line-height");return"normal"==t?1:t.replace(/[^\d.]*/gi,"")}}}},n.exports=i.plugins.lineheight}),define("ueditor/plugins/list",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("../core/dtd"),s=e("../core/browser");i.plugins.list=function(){function e(e){var t=[];for(var n in e)t.push(n);return t}function t(e){var t=e.className;return r.hasClass(e,/custom_/)?t.match(/custom_(\w+)/)[1]:r.getStyle(e,"list-style-type")}function n(e,n){o.each(r.getElementsByTagName(e,"ol ul"),function(i){if(r.inDoc(i,e)){var a=i.parentNode;if(a.tagName==i.tagName){var s=t(i)||("OL"==i.tagName?"decimal":"disc"),c=t(a)||("OL"==a.tagName?"decimal":"disc");if(s==c){var u=o.indexOf(h[i.tagName],s);u=u+1==h[i.tagName].length?0:u+1,d(i,h[i.tagName][u])}}var f=0,p=2;r.hasClass(i,/custom_/)?/[ou]l/i.test(a.tagName)&&r.hasClass(a,/custom_/)||(p=1):/[ou]l/i.test(a.tagName)&&r.hasClass(a,/custom_/)&&(p=3);var g=r.getStyle(i,"list-style-type");g&&(i.style.cssText="list-style-type:"+g),i.className=o.trim(i.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+p,o.each(r.getElementsByTagName(i,"li"),function(e){if(e.style.cssText&&(e.style.cssText=""),!e.firstChild)return r.remove(e),void 0;if(e.parentNode===i){if(f++,r.hasClass(i,/custom_/)){var n=1,o=t(i);if("OL"==i.tagName){if(o)switch(o){case"cn":case"cn1":case"cn2":f>10&&(0==f%10||f>10&&20>f)?n=2:f>20&&(n=3);break;case"num2":f>9&&(n=2)}e.className="list-"+m[o]+f+" "+"list-"+o+"-paddingleft-"+n}else e.className="list-"+m[o]+" "+"list-"+o+"-paddingleft"}else e.className=e.className.replace(/list-[\w\-]+/gi,"");var a=e.getAttribute("class");null===a||a.replace(/\s/g,"")||r.removeAttributes(e,"class")}}),!n&&l(i,i.tagName.toLowerCase(),t(i)||r.getStyle(i,"list-style-type"),!0)}})}function l(e,i,o,a){var s=e.nextSibling;s&&1==s.nodeType&&s.tagName.toLowerCase()==i&&(t(s)||r.getStyle(s,"list-style-type")||("ol"==i?"decimal":"disc"))==o&&(r.moveChild(s,e),0==s.childNodes.length&&r.remove(s)),s&&r.isFillChar(s)&&r.remove(s);var l=e.previousSibling;l&&1==l.nodeType&&l.tagName.toLowerCase()==i&&(t(l)||r.getStyle(l,"list-style-type")||("ol"==i?"decimal":"disc"))==o&&r.moveChild(e,l),l&&r.isFillChar(l)&&r.remove(l),!a&&r.isEmptyBlock(e)&&r.remove(e),t(e)&&n(e.ownerDocument,!0)}function d(e,t){m[t]&&(e.className="custom_"+t);try{r.setStyle(e,"list-style-type",t)}catch(n){}}function c(e){var t=e.previousSibling;t&&r.isEmptyBlock(t)&&r.remove(t),t=e.nextSibling,t&&r.isEmptyBlock(t)&&r.remove(t)}function u(e){for(;e&&!r.isBody(e);){if("TABLE"==e.nodeName)return null;if("LI"==e.nodeName)return e;e=e.parentNode}}var f=this,p={TD:1,PRE:1,BLOCKQUOTE:1},m={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};f.setOpt({insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1});var h={OL:e(f.options.insertorderedlist),UL:e(f.options.insertunorderedlist)},g=f.options.listiconpath;for(var v in m)f.options.insertorderedlist.hasOwnProperty(v)||f.options.insertunorderedlist.hasOwnProperty(v)||delete m[v];f.ready(function(){var e=[];for(var t in m){if("dash"==t||"dot"==t)e.push("li.list-"+m[t]+"{background-image:url("+g+m[t]+".gif)}"),e.push("ul.custom_"+t+"{list-style:none;}ul.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var n=0;99>n;n++)e.push("li.list-"+m[t]+n+"{background-image:url("+g+"list-"+m[t]+n+".gif)}");e.push("ol.custom_"+t+"{list-style:none;}ol.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(t){case"cn":e.push("li.list-"+t+"-paddingleft-1{padding-left:25px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn1":e.push("li.list-"+t+"-paddingleft-1{padding-left:30px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn2":e.push("li.list-"+t+"-paddingleft-1{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:55px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":e.push("li.list-"+t+"-paddingleft-1{padding-left:25px}");break;case"num2":e.push("li.list-"+t+"-paddingleft-1{padding-left:35px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}");break;case"dash":e.push("li.list-"+t+"-paddingleft{padding-left:35px}");break;case"dot":e.push("li.list-"+t+"-paddingleft{padding-left:20px}")}}e.push(".list-paddingleft-1{padding-left:0}"),e.push(".list-paddingleft-2{padding-left:"+f.options.listDefaultPaddingLeft+"px}"),e.push(".list-paddingleft-3{padding-left:"+2*f.options.listDefaultPaddingLeft+"px}"),o.cssRule("list","ol,ul{margin:0;pading:0;"+(s.ie?"":"width:95%")+"}li{clear:both;}"+e.join("\n"),f.document)}),f.ready(function(){r.on(f.body,"cut",function(){setTimeout(function(){var e,t=f.selection.getRange();if(!t.collapsed&&(e=r.findParentByTagName(t.startContainer,"li",!0))&&!e.nextSibling&&r.isEmptyBlock(e)){var n,i=e.parentNode;if(n=i.previousSibling)r.remove(i),t.setStartAtLast(n).collapse(!0),t.select(!0);else if(n=i.nextSibling)r.remove(i),t.setStartAtFirst(n).collapse(!0),t.select(!0);else{var o=f.document.createElement("p");r.fillNode(f.document,o),i.parentNode.insertBefore(o,i),r.remove(i),t.setStart(o,0).collapse(!0),t.select(!0)}}})})}),f.addListener("beforepaste",function(e,n){var a,s=this,l=s.selection.getRange(),d=i.htmlparser(n.html,!0);if(a=r.findParentByTagName(l.startContainer,"li",!0)){var c=a.parentNode,u="OL"==c.tagName?"ul":"ol";o.each(d.getNodesByTagName(u),function(n){if(n.tagName=c.tagName,n.setAttr(),n.parentNode===d)e=t(c)||("OL"==c.tagName?"decimal":"disc");else{var i=n.parentNode.getAttr("class");e=i&&/custom_/.test(i)?i.match(/custom_(\w+)/)[1]:n.parentNode.getStyle("list-style-type"),e||(e="OL"==c.tagName?"decimal":"disc")}var r=o.indexOf(h[c.tagName],e);n.parentNode!==d&&(r=r+1==h[c.tagName].length?0:r+1);var a=h[c.tagName][r];m[a]?n.setAttr("class","custom_"+a):n.setStyle("list-style-type",a)})}n.html=d.toHtml()}),f.addInputRule(function(e){function t(e,t){var i=t.firstChild();if(i&&"element"==i.type&&"span"==i.tagName&&/Wingdings|Symbol/.test(i.getStyle("font-family"))){for(var o in r)if(r[o]==i.data)return o;return"disc"}for(var o in n)if(n[o].test(e))return o}o.each(e.getNodesByTagName("li"),function(e){for(var t,n=i.uNode.createElement("p"),o=0;t=e.children[o];)"text"==t.type||a.p[t.tagName]?n.appendChild(t):n.firstChild()?(e.insertBefore(n,t),n=i.uNode.createElement("p"),o+=2):o++;(n.firstChild()&&!n.parentNode||!e.firstChild())&&e.appendChild(n),n.firstChild()||n.innerHTML(s.ie?"&nbsp;":"<br/>");var r=e.firstChild(),l=r.lastChild();l&&"text"==l.type&&/^\s*$/.test(l.data)&&r.removeChild(l)});var n={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},r={square:"n"};o.each(e.getNodesByTagName("p"),function(e){function o(e,t,o){if("ol"==e.tagName)if(s.ie){var r=t.firstChild();"element"==r.type&&"span"==r.tagName&&n[o].test(r.innerText())&&t.removeChild(r)}else t.innerHTML(t.innerHTML().replace(n[o],""));else t.removeChild(t.firstChild());var a=i.uNode.createElement("li");a.appendChild(t),e.appendChild(a)}if("MsoListParagraph"==e.getAttr("class")){e.setStyle("margin",""),e.setStyle("margin-left",""),e.setAttr("class","");var r,a=e,l=e;if("li"!=e.parentNode.tagName&&(r=t(e.innerText(),e))){var d=i.uNode.createElement(f.options.insertorderedlist.hasOwnProperty(r)?"ol":"ul");for(m[r]?d.setAttr("class","custom_"+r):d.setStyle("list-style-type",r);e&&"li"!=e.parentNode.tagName&&t(e.innerText(),e);)a=e.nextSibling(),a||e.parentNode.insertBefore(d,e),o(d,e,r),e=a;!d.parentNode&&e&&e.parentNode&&e.parentNode.insertBefore(d,e)}var c=l.firstChild();c&&"element"==c.type&&"span"==c.tagName&&/^\s*(&nbsp;)+\s*$/.test(c.innerText())&&c.parentNode.removeChild(c)}})}),f.addListener("contentchange",function(){n(f.document)}),f.addListener("keydown",function(e,t){function n(){t.preventDefault?t.preventDefault():t.returnValue=!1,f.fireEvent("contentchange"),f.undoManger&&f.undoManger.save()}function i(e,t){for(;e&&!r.isBody(e);){if(t(e))return null;if(1==e.nodeType&&/[ou]l/i.test(e.tagName))return e;e=e.parentNode}return null}var o=t.keyCode||t.which;if(13==o&&!t.shiftKey){var s=f.selection.getRange(),l=r.findParent(s.startContainer,function(e){return r.isBlockElm(e)},!0),d=r.findParentByTagName(s.startContainer,"li",!0);if(l&&"PRE"!=l.tagName&&!d){var u=l.innerHTML.replace(RegExp(r.fillChar,"g"),"");/^\s*1\s*\.[^\d]/.test(u)&&(l.innerHTML=u.replace(/^\s*1\s*\./,""),s.setStartAtLast(l).collapse(!0).select(),f.__hasEnterExecCommand=!0,f.execCommand("insertorderedlist"),f.__hasEnterExecCommand=!1)}var p=f.selection.getRange(),m=i(p.startContainer,function(e){return"TABLE"==e.tagName}),h=p.collapsed?m:i(p.endContainer,function(e){return"TABLE"==e.tagName});if(m&&h&&m===h){if(!p.collapsed){if(m=r.findParentByTagName(p.startContainer,"li",!0),h=r.findParentByTagName(p.endContainer,"li",!0),!m||!h||m!==h){var g=p.cloneRange(),v=g.collapse(!1).createBookmark();p.deleteContents(),g.moveToBookmark(v);var d=r.findParentByTagName(g.startContainer,"li",!0);return c(d),g.select(),n(),void 0}if(p.deleteContents(),d=r.findParentByTagName(p.startContainer,"li",!0),d&&r.isEmptyBlock(d))return w=d.previousSibling,next=d.nextSibling,x=f.document.createElement("p"),r.fillNode(f.document,x),b=d.parentNode,w&&next?(p.setStart(next,0).collapse(!0).select(!0),r.remove(d)):((w||next)&&w?d.parentNode.parentNode.insertBefore(x,b.nextSibling):b.parentNode.insertBefore(x,b),r.remove(d),b.firstChild||r.remove(b),p.setStart(x,0).setCursor()),n(),void 0}if(d=r.findParentByTagName(p.startContainer,"li",!0)){if(r.isEmptyBlock(d)){v=p.createBookmark();var b=d.parentNode;if(d!==b.lastChild?(r.breakParent(d,b),c(d)):(b.parentNode.insertBefore(d,b.nextSibling),r.isEmptyNode(b)&&r.remove(b)),!a.$list[d.parentNode.tagName])if(r.isBlockElm(d.firstChild))r.remove(d,!0);else{for(x=f.document.createElement("p"),d.parentNode.insertBefore(x,d);d.firstChild;)x.appendChild(d.firstChild);r.remove(d)}p.moveToBookmark(v).select()}else{var y=d.firstChild;if(!y||!r.isBlockElm(y)){var x=f.document.createElement("p");for(!d.firstChild&&r.fillNode(f.document,x);d.firstChild;)x.appendChild(d.firstChild);d.appendChild(x),y=x}var C=f.document.createElement("span");p.insertNode(C),r.breakParent(C,d);var N=C.nextSibling;y=N.firstChild,y||(x=f.document.createElement("p"),r.fillNode(f.document,x),N.appendChild(x),y=x),r.isEmptyNode(y)&&(y.innerHTML="",r.fillNode(f.document,y)),p.setStart(y,0).collapse(!0).shrinkBoundary().select(),r.remove(C);var w=N.previousSibling;w&&r.isEmptyBlock(w)&&(w.innerHTML="<p></p>",r.fillNode(f.document,w.firstChild))}n()}}}if(8==o&&(p=f.selection.getRange(),p.collapsed&&r.isStartInblock(p)&&(g=p.cloneRange().trimBoundary(),d=r.findParentByTagName(p.startContainer,"li",!0),d&&r.isStartInblock(g)))){if(m=r.findParentByTagName(p.startContainer,"p",!0),m&&m!==d.firstChild){var b=r.findParentByTagName(m,["ol","ul"]);return r.breakParent(m,b),c(m),f.fireEvent("contentchange"),p.setStart(m,0).setCursor(!1,!0),f.fireEvent("saveScene"),r.preventDefault(t),void 0}if(d&&(w=d.previousSibling)){if(46==o&&d.childNodes.length)return;if(a.$list[w.tagName]&&(w=w.lastChild),f.undoManger&&f.undoManger.save(),y=d.firstChild,r.isBlockElm(y))if(r.isEmptyNode(y))for(w.appendChild(y),p.setStart(y,0).setCursor(!1,!0);d.firstChild;)w.appendChild(d.firstChild);else C=f.document.createElement("span"),p.insertNode(C),r.isEmptyBlock(w)&&(w.innerHTML=""),r.moveChild(d,w),p.setStartBefore(C).collapse(!0).select(!0),r.remove(C);else if(r.isEmptyNode(d)){var x=f.document.createElement("p");w.appendChild(x),p.setStart(x,0).setCursor()}else for(p.setEnd(w,w.childNodes.length).collapse().select(!0);d.firstChild;)w.appendChild(d.firstChild);return r.remove(d),f.fireEvent("contentchange"),f.fireEvent("saveScene"),r.preventDefault(t),void 0}if(d&&!d.previousSibling){var b=d.parentNode,v=p.createBookmark();if(r.isTagNode(b.parentNode,"ol ul"))b.parentNode.insertBefore(d,b),r.isEmptyNode(b)&&r.remove(b);else{for(;d.firstChild;)b.parentNode.insertBefore(d.firstChild,b);r.remove(d),r.isEmptyNode(b)&&r.remove(b)}return p.moveToBookmark(v).setCursor(!1,!0),f.fireEvent("contentchange"),f.fireEvent("saveScene"),r.preventDefault(t),void 0}}}),f.addListener("keyup",function(e,n){var i=n.keyCode||n.which;if(8==i){var o,a=f.selection.getRange();(o=r.findParentByTagName(a.startContainer,["ol","ul"],!0))&&l(o,o.tagName.toLowerCase(),t(o)||r.getComputedStyle(o,"list-style-type"),!0)}}),f.addListener("tabkeydown",function(){function e(e){if(-1!=f.options.maxListLevel){for(var t=e.parentNode,n=0;/[ou]l/i.test(t.tagName);)n++,t=t.parentNode;if(n>=f.options.maxListLevel)return!0}}var n=f.selection.getRange(),i=r.findParentByTagName(n.startContainer,"li",!0);if(i){var a;if(!n.collapsed){f.fireEvent("saveScene"),a=n.createBookmark();for(var s,c,u=0,p=r.findParents(i);c=p[u++];)if(r.isTagNode(c,"ol ul")){s=c;break}var m=i;if(a.end)for(;m&&!(r.getPosition(m,a.end)&r.POSITION_FOLLOWING);)if(e(m))m=r.getNextDomNode(m,!1,null,function(e){return e!==s});else{var g=m.parentNode,v=f.document.createElement(g.tagName),b=o.indexOf(h[v.tagName],t(g)||r.getComputedStyle(g,"list-style-type")),y=b+1==h[v.tagName].length?0:b+1,x=h[v.tagName][y];for(d(v,x),g.insertBefore(v,m);m&&!(r.getPosition(m,a.end)&r.POSITION_FOLLOWING);){if(i=m.nextSibling,v.appendChild(m),!i||r.isTagNode(i,"ol ul")){if(i)for(;(i=i.firstChild)&&"LI"!=i.tagName;);else i=r.getNextDomNode(m,!1,null,function(e){return e!==s
});break}m=i}l(v,v.tagName.toLowerCase(),x),m=i}return f.fireEvent("contentchange"),n.moveToBookmark(a).select(),!0}if(e(i))return!0;var g=i.parentNode,v=f.document.createElement(g.tagName),b=o.indexOf(h[v.tagName],t(g)||r.getComputedStyle(g,"list-style-type"));b=b+1==h[v.tagName].length?0:b+1;var x=h[v.tagName][b];if(d(v,x),r.isStartInblock(n))return f.fireEvent("saveScene"),a=n.createBookmark(),g.insertBefore(v,i),v.appendChild(i),l(v,v.tagName.toLowerCase(),x),f.fireEvent("contentchange"),n.moveToBookmark(a).select(!0),!0}}),f.commands.insertorderedlist=f.commands.insertunorderedlist={execCommand:function(e,n){n||(n="insertorderedlist"==e.toLowerCase()?"decimal":"disc");var i=this,s=this.selection.getRange(),c=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!r.isWhitespace(e)},f="insertorderedlist"==e.toLowerCase()?"ol":"ul",m=i.document.createDocumentFragment();s.adjustmentBoundary().shrinkBoundary();var h,g,v,b,y=s.createBookmark(!0),x=u(i.document.getElementById(y.start)),C=0,N=u(i.document.getElementById(y.end)),w=0;if(x||N){if(x&&(h=x.parentNode),y.end||(N=x),N&&(g=N.parentNode),h===g){for(;x!==N;){if(b=x,x=x.nextSibling,!r.isBlockElm(b.firstChild)){for(var T=i.document.createElement("p");b.firstChild;)T.appendChild(b.firstChild);b.appendChild(T)}m.appendChild(b)}if(b=i.document.createElement("span"),h.insertBefore(b,N),!r.isBlockElm(N.firstChild)){for(T=i.document.createElement("p");N.firstChild;)T.appendChild(N.firstChild);N.appendChild(T)}m.appendChild(N),r.breakParent(b,h),r.isEmptyNode(b.previousSibling)&&r.remove(b.previousSibling),r.isEmptyNode(b.nextSibling)&&r.remove(b.nextSibling);var k=t(h)||r.getComputedStyle(h,"list-style-type")||("insertorderedlist"==e.toLowerCase()?"decimal":"disc");if(h.tagName.toLowerCase()==f&&k==n){for(var S,E=0,B=i.document.createDocumentFragment();S=m.childNodes[E++];)if(r.isTagNode(S,"ol ul"))o.each(r.getElementsByTagName(S,"li"),function(e){for(;e.firstChild;)B.appendChild(e.firstChild)});else for(;S.firstChild;)B.appendChild(S.firstChild);b.parentNode.insertBefore(B,b)}else v=i.document.createElement(f),d(v,n),v.appendChild(m),b.parentNode.insertBefore(v,b);return r.remove(b),v&&l(v,f,n),s.moveToBookmark(y).select(),void 0}if(x){for(;x;){if(b=x.nextSibling,r.isTagNode(x,"ol ul"))m.appendChild(x);else{for(var _=i.document.createDocumentFragment(),L=0;x.firstChild;)r.isBlockElm(x.firstChild)&&(L=1),_.appendChild(x.firstChild);if(L)m.appendChild(_);else{var A=i.document.createElement("p");A.appendChild(_),m.appendChild(A)}r.remove(x)}x=b}h.parentNode.insertBefore(m,h.nextSibling),r.isEmptyNode(h)?(s.setStartBefore(h),r.remove(h)):s.setStartAfter(h),C=1}if(N&&r.inDoc(g,i.document)){for(x=g.firstChild;x&&x!==N;){if(b=x.nextSibling,r.isTagNode(x,"ol ul"))m.appendChild(x);else{for(_=i.document.createDocumentFragment(),L=0;x.firstChild;)r.isBlockElm(x.firstChild)&&(L=1),_.appendChild(x.firstChild);L?m.appendChild(_):(A=i.document.createElement("p"),A.appendChild(_),m.appendChild(A)),r.remove(x)}x=b}var I=r.createElement(i.document,"div",{tmpDiv:1});r.moveChild(N,I),m.appendChild(I),r.remove(N),g.parentNode.insertBefore(m,g),s.setEndBefore(g),r.isEmptyNode(g)&&r.remove(g),w=1}}C||s.setStartBefore(i.document.getElementById(y.start)),y.end&&!w&&s.setEndAfter(i.document.getElementById(y.end)),s.enlarge(!0,function(e){return p[e.tagName]}),m=i.document.createDocumentFragment();for(var R,D=s.createBookmark(),M=r.getNextDomNode(D.start,!1,c),H=s.cloneRange(),O=r.isBlockElm;M&&M!==D.end&&r.getPosition(M,D.end)&r.POSITION_PRECEDING;)if(3==M.nodeType||a.li[M.tagName]){if(1==M.nodeType&&a.$list[M.tagName]){for(;M.firstChild;)m.appendChild(M.firstChild);R=r.getNextDomNode(M,!1,c),r.remove(M),M=R;continue}for(R=M,H.setStartBefore(M);M&&M!==D.end&&(!O(M)||r.isBookmarkNode(M));)R=M,M=r.getNextDomNode(M,!1,null,function(e){return!p[e.tagName]});M&&O(M)&&(b=r.getNextDomNode(R,!1,c),b&&r.isBookmarkNode(b)&&(M=r.getNextDomNode(b,!1,c),R=b)),H.setEndAfter(R),M=r.getNextDomNode(R,!1,c);var P=s.document.createElement("li");if(P.appendChild(H.extractContents()),r.isEmptyNode(P)){for(var R=s.document.createElement("p");P.firstChild;)R.appendChild(P.firstChild);P.appendChild(R)}m.appendChild(P)}else M=r.getNextDomNode(M,!0,c);s.moveToBookmark(D).collapse(!0),v=i.document.createElement(f),d(v,n),v.appendChild(m),s.insertNode(v),l(v,f,n);for(var S,E=0,F=r.getElementsByTagName(v,"div");S=F[E++];)S.getAttribute("tmpDiv")&&r.remove(S,!0);s.moveToBookmark(y).select()},queryCommandState:function(e){for(var t,n="insertorderedlist"==e.toLowerCase()?"ol":"ul",i=this.selection.getStartElementPath(),o=0;t=i[o++];){if("TABLE"==t.nodeName)return 0;if(n==t.nodeName.toLowerCase())return 1}return 0},queryCommandValue:function(e){for(var n,i,o="insertorderedlist"==e.toLowerCase()?"ol":"ul",a=this.selection.getStartElementPath(),s=0;i=a[s++];){if("TABLE"==i.nodeName){n=null;break}if(o==i.nodeName.toLowerCase()){n=i;break}}return n?t(n)||r.getComputedStyle(n,"list-style-type"):null}}},n.exports=i.plugins.list}),define("ueditor/plugins/paste",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd","../core/filterword","../core/filternode"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("../core/browser");e("../core/filterword"),e("../core/filternode"),i.plugins.paste=function(){function e(e){var t=this.document;if(!t.getElementById("baidu_pastebin")){var n=this.selection.getRange(),i=n.createBookmark(),o=t.createElement("div");o.id="baidu_pastebin",a.webkit&&o.appendChild(t.createTextNode(r.fillChar+r.fillChar)),t.body.appendChild(o),i.start.style.display="",o.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+r.getXY(i.start).y+"px",n.selectNodeContents(o).select(!0),setTimeout(function(){if(a.webkit)for(var s,l=0,d=t.querySelectorAll("#baidu_pastebin");s=d[l++];){if(!r.isEmptyNode(s)){o=s;break}r.remove(s)}try{o.parentNode.removeChild(o)}catch(c){}n.moveToBookmark(i).select(!0),e(o)},0)}}function t(e){var t;if(e.firstChild){for(var c,u=r.getElementsByTagName(e,"span"),f=0;c=u[f++];)("_baidu_cut_start"==c.id||"_baidu_cut_end"==c.id)&&r.remove(c);if(a.webkit){for(var p,m=e.querySelectorAll("div br"),f=0;p=m[f++];){var h=p.parentNode;"DIV"==h.tagName&&1==h.childNodes.length&&(h.innerHTML="<p><br/></p>",r.remove(h))}for(var g,v=e.querySelectorAll("#baidu_pastebin"),f=0;g=v[f++];){var b=d.document.createElement("p");for(g.parentNode.insertBefore(b,g);g.firstChild;)b.appendChild(g.firstChild);r.remove(g)}for(var y,x=e.querySelectorAll("meta"),f=0;y=x[f++];)r.remove(y);var m=e.querySelectorAll("br");for(f=0;y=m[f++];)/^apple-/i.test(y.className)&&r.remove(y)}if(a.gecko){var C=e.querySelectorAll("[_moz_dirty]");for(f=0;y=C[f++];)y.removeAttribute("_moz_dirty")}if(!a.ie)for(var y,N=e.querySelectorAll("span.Apple-style-span"),f=0;y=N[f++];)r.remove(y,!0);t=e.innerHTML,t=i.filterWord(t);var w=i.htmlparser(t);if(d.options.filterRules&&i.filterNode(w,d.options.filterRules),d.filterInputRule(w),a.webkit){var T=w.lastChild();T&&"element"==T.type&&"br"==T.tagName&&w.removeChild(T),o.each(d.body.querySelectorAll("div"),function(e){r.isEmptyBlock(e)&&r.remove(e)})}if(t={html:w.toHtml()},d.fireEvent("beforepaste",t,w),!t.html)return;w=i.htmlparser(t.html,!0),1===d.queryCommandState("pasteplain")?d.execCommand("insertHtml",i.filterNode(w,d.options.filterTxtRules).toHtml(),!0):(i.filterNode(w,d.options.filterTxtRules),n=w.toHtml(),s=t.html,l=d.selection.getRange().createAddress(!0),d.execCommand("insertHtml",s,!0)),d.fireEvent("afterpaste",t)}}var n,s,l,d=this;d.addListener("pasteTransfer",function(e,t){if(l&&n&&s&&n!=s){var i=d.selection.getRange();if(i.moveToAddress(l,!0),!i.collapsed){for(;!r.isBody(i.startContainer);){var a=i.startContainer;if(1==a.nodeType){if(a=a.childNodes[i.startOffset],!a){i.setStartBefore(i.startContainer);continue}var c=a.previousSibling;c&&3==c.nodeType&&RegExp("^[\n\r	 "+r.fillChar+"]*$").test(c.nodeValue)&&i.setStartBefore(c)}if(0!=i.startOffset)break;i.setStartBefore(i.startContainer)}for(;!r.isBody(i.endContainer);){var u=i.endContainer;if(1==u.nodeType){if(u=u.childNodes[i.endOffset],!u){i.setEndAfter(i.endContainer);continue}var f=u.nextSibling;f&&3==f.nodeType&&RegExp("^[\n\r	"+r.fillChar+"]*$").test(f.nodeValue)&&i.setEndAfter(f)}if(i.endOffset!=i.endContainer[3==i.endContainer.nodeType?"nodeValue":"childNodes"].length)break;i.setEndAfter(i.endContainer)}}i.deleteContents(),i.select(!0),d.__hasEnterExecCommand=!0;var p=s;2===t?p=p.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(e,t,n,i){return n=n.toLowerCase(),{img:1}[n]?e:(i=i.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(e,t,n){return{src:1,href:1,name:1}[t.toLowerCase()]?t+"="+n+" ":""}),{span:1,div:1}[n]?"":"<"+t+n+" "+o.trim(i)+">")}):t&&(p=n),d.execCommand("inserthtml",p,!0),d.__hasEnterExecCommand=!1;for(var m=d.selection.getRange();!r.isBody(m.startContainer)&&!m.startOffset&&m.startContainer[3==m.startContainer.nodeType?"nodeValue":"childNodes"].length;)m.setStartBefore(m.startContainer);var h=m.createAddress(!0);l.endAddress=h.startAddress}}),d.addListener("ready",function(){r.on(d.body,"cut",function(){var e=d.selection.getRange();!e.collapsed&&d.undoManger&&d.undoManger.save()}),r.on(d.body,a.ie||a.opera?"keydown":"paste",function(n){(!a.ie&&!a.opera||(n.ctrlKey||n.metaKey)&&"86"==n.keyCode)&&e.call(d,function(e){t(e)})})})},n.exports=i.plugins.paste}),define("ueditor/core/filterword",["../editor","../baidu","./utils","./browser"],function(e,t,n){var i=e("../editor"),o=e("./utils"),r=e("./browser"),a=i.filterWord=function(){function e(e){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<v:)/gi.test(e)}function t(e){return e=e.replace(/[\d.]+\w+/g,function(e){return o.transUnitToPx(e)})}function n(e){return e.replace(/[\t\r\n]+/g,"").replace(/<!--[\s\S]*?-->/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(e){if(r.opera)return"";try{var n=e.match(/width:([ \d.]*p[tx])/i)[1],i=e.match(/height:([ \d.]*p[tx])/i)[1],o=e.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+t(n)+'" height="'+t(i)+'" src="'+o+'" />'}catch(a){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(e,t,n,i){return"class"==t&&"MsoListParagraph"==i?e:""}).replace(/<(font|span)[^>]*>\s*<\/\1>/gi,"").replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(e,n,i,o){for(var r,a=[],s=o.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").split(/;\s*/g),l=0;r=s[l];l++){var d,c,u=r.split(":");if(2==u.length){if(d=u[0].toLowerCase(),c=u[1].toLowerCase(),/^(background)\w*/.test(d)&&0==c.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(d)&&/^0\w+$/.test(c))continue;switch(d){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(n)||(a[l]=d.replace(/^mso-|-alt$/g,"")+":"+t(c));continue;case"horiz-align":a[l]="text-align:"+c;continue;case"vert-align":a[l]="vertical-align:"+c;continue;case"font-color":case"mso-foreground":a[l]="color:"+c;continue;case"mso-background":case"mso-highlight":a[l]="background:"+c;continue;case"mso-default-height":a[l]="min-height:"+t(c);continue;case"mso-default-width":a[l]="min-width:"+t(c);continue;case"mso-padding-between-alt":a[l]="border-collapse:separate;border-spacing:"+t(c);continue;case"text-line-through":("single"==c||"double"==c)&&(a[l]="text-decoration:line-through");continue;case"mso-zero-height":"yes"==c&&(a[l]="display:none");continue;case"background":break;case"margin":if(!/[1-9]/.test(c))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(d)||/text\-indent|padding|margin/.test(d)&&/\-[\d.]+/.test(c))continue;a[l]=d+":"+u[1]}}return n+(a.length?' style="'+a.join(";").replace(/;{2,}/g,";")+'"':"")}).replace(/[\d.]+(cm|pt)/g,function(e){return o.transUnitToPx(e)})}return function(t){return e(t)?n(t):t}}();n.exports=a}),define("ueditor/core/filternode",["../editor","../baidu","./utils","./browser","./dtd","../dom"],function(e,t,n){var i=e("../editor"),o=e("./utils"),r=e("./dtd"),a=i.filterNode=function(){function e(t,n){switch(t.type){case"text":break;case"element":var i;if(i=n[t.tagName])if("-"===i)t.parentNode.removeChild(t);else if(o.isFunction(i)){var a=t.parentNode,s=t.getIndex();if(i(t),t.parentNode){if(t.children)for(var l,d=0;l=t.children[d];)e(l,n),l.parentNode&&d++}else for(var l,d=s;l=a.children[d];)e(l,n),l.parentNode&&d++}else{var c=i.$;if(c&&t.attrs){var u,f={};for(var p in c){if(u=t.getAttr(p),"style"==p&&o.isArray(c[p])){var m=[];o.each(c[p],function(e){var n;(n=t.getStyle(e))&&m.push(e+":"+n)}),u=m.join(";")}u&&(f[p]=u)}t.attrs=f}if(t.children)for(var l,d=0;l=t.children[d];)e(l,n),l.parentNode&&d++}else if(r.$cdata[t.tagName])t.parentNode.removeChild(t);else{var a=t.parentNode,s=t.getIndex();t.parentNode.removeChild(t,!0);for(var l,d=s;l=a.children[d];)e(l,n),l.parentNode&&d++}break;case"comment":t.parentNode.removeChild(t)}}return function(t,n){if(o.isEmptyObject(n))return t;var i;(i=n["-"])&&o.each(i.split(" "),function(e){n[e]="-"});for(var r,a=0;r=t.children[a];)e(r,n),r.parentNode&&a++;return t}}();n.exports=a}),define("ueditor/plugins/preview",["../editor","../baidu"],function(e,t,n){var i=e("../editor");i.commands.preview={execCommand:function(){var e=window.open("","_blank",""),t=e.document;t.open(),t.write("<html><head></head><body><div>"+this.getContent(null,null,!0)+"</div></body></html>"),t.close()},notNeedUndo:1},n.exports=i.commands.preview}),define("ueditor/plugins/print",["../editor","../baidu"],function(e,t,n){var i=e("../editor");i.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1},n.exports=i.commands.print}),define("ueditor/plugins/puretxtpaste",["../editor","../baidu","../core/dtd","../dom","../core/utils","../core/browser","../core/node","../core/domUtils"],function(e,t,n){var i=e("../editor");e("../core/dtd"),e("../core/node"),i.plugins.pasteplain=function(){var e=this;e.setOpt({pasteplain:!1,filterTxtRules:function(){function e(e){e.tagName="p",e.setStyle()}function t(e){e.parentNode.removeChild(e,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(e){for(var t,n=i.uNode.createElement("p");t=e.firstChild();)"text"!=t.type&&i.dom.dtd.$block[t.tagName]?n.firstChild()?(e.parentNode.insertBefore(n,e),n=i.uNode.createElement("p")):e.parentNode.insertBefore(t,e):n.appendChild(t);n.firstChild()&&e.parentNode.insertBefore(n,e),e.parentNode.removeChild(e)},ol:t,ul:t,dl:t,dt:t,dd:t,li:t,caption:e,th:e,tr:e,h1:e,h2:e,h3:e,h4:e,h5:e,h6:e,td:function(e){var t=!!e.innerText();t&&e.parentNode.insertAfter(i.uNode.createText(" &nbsp; &nbsp;"),e),e.parentNode.removeChild(e,e.innerText())}}}()});var t=e.options.pasteplain;e.commands.pasteplain={queryCommandState:function(){return t?1:0},execCommand:function(){t=0|!t},notNeedUndo:1}},n.exports=i.plugins.pasteplain}),define("ueditor/plugins/removeformat",["../editor","../baidu","../dom","../core/domUtils","../core/utils","../core/browser","../core/dtd","../core/Range"],function(e,t,n){var i=e("../editor"),o=e("../dom"),r=e("../core/domUtils"),a=e("../core/dtd"),s=e("../core/browser");e("../core/Range"),i.plugins.removeformat=function(){var e=this;e.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"}),e.commands.removeformat={execCommand:function(e,t,n,i,l){function d(e){if(3==e.nodeType||"span"!=e.tagName.toLowerCase())return 0;if(s.ie){var t=e.attributes;if(t.length){for(var n=0,i=t.length;i>n;n++)if(t[n].specified)return 0;return 1}}return!e.attributes.length}function c(e){var t=e.createBookmark();if(e.collapsed&&e.enlarge(!0),!l){var i=r.findParentByTagName(e.startContainer,"a",!0);i&&e.setStartBefore(i),i=r.findParentByTagName(e.endContainer,"a",!0),i&&e.setEndAfter(i)}for(u=e.createBookmark(),v=u.start;(f=v.parentNode)&&!r.isBlockElm(f);)r.breakParent(v,f),r.clearEmptySibling(v);if(u.end){for(v=u.end;(f=v.parentNode)&&!r.isBlockElm(f);)r.breakParent(v,f),r.clearEmptySibling(v);for(var o,s=r.getNextDomNode(u.start,!1,g);s&&s!=u.end;)o=r.getNextDomNode(s,!0,g),a.$empty[s.tagName.toLowerCase()]||r.isBookmarkNode(s)||(p.test(s.tagName)?n?(r.removeStyle(s,n),d(s)&&"text-decoration"!=n&&r.remove(s,!0)):r.remove(s,!0):a.$tableContent[s.tagName]||a.$list[s.tagName]||(r.removeAttributes(s,m),d(s)&&r.remove(s,!0))),s=o}var c=u.start.parentNode;!r.isBlockElm(c)||a.$tableContent[c.tagName]||a.$list[c.tagName]||r.removeAttributes(c,m),c=u.end.parentNode,u.end&&r.isBlockElm(c)&&!a.$tableContent[c.tagName]&&!a.$list[c.tagName]&&r.removeAttributes(c,m),e.moveToBookmark(u).moveToBookmark(t);for(var h,v=e.startContainer,b=e.collapsed;1==v.nodeType&&r.isEmptyNode(v)&&a.$removeEmpty[v.tagName];)h=v.parentNode,e.setStartBefore(v),e.startContainer===e.endContainer&&e.endOffset--,r.remove(v),v=h;if(!b)for(v=e.endContainer;1==v.nodeType&&r.isEmptyNode(v)&&a.$removeEmpty[v.tagName];)h=v.parentNode,e.setEndBefore(v),r.remove(v),v=h}var u,f,p=RegExp("^(?:"+(t||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),m=n?[]:(i||this.options.removeFormatAttributes).split(","),h=new o.Range(this.document),g=function(e){return 1==e.nodeType};h=this.selection.getRange(),c(h),h.select()}}},n.exports=i.plugins.removeformat}),define("ueditor/plugins/rowspacing",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils");i.plugins.rowspacing=function(){var e=this;e.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]}),e.commands.rowspacing={execCommand:function(e,t,n){return this.execCommand("paragraph","p",{style:"margin-"+n+":"+t+"px"}),!0},queryCommandValue:function(e,t){var n,i=o.filterNodeList(this.selection.getStartElementPath(),function(e){return o.isBlockElm(e)});return i?(n=o.getComputedStyle(i,"margin-"+t).replace(/[^\d]/g,""),n?n:0):0}}},n.exports=i.plugins.rowspacing}),define("ueditor/plugins/selectall",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils"),r=e("../core/browser");i.plugins.selectall=function(){var e=this;e.commands.selectall={execCommand:function(){var e=this,t=e.body,n=e.selection.getRange();n.selectNodeContents(t),o.isEmptyBlock(t)&&(r.opera&&t.firstChild&&1==t.firstChild.nodeType&&n.setStartAtFirst(t.firstChild),n.collapse(!0)),n.select(!0)},notNeedUndo:1},e.addshortcutkey({selectAll:"ctrl+65"})},n.exports=i.plugins.selectall}),define("ueditor/plugins/shortcutmenu",["../baidu","../editor","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd","../ui/shortcutmenu","../ui/ui","../ui/uibase","../ui/uiutils","../core/EventBase"],function(e,t,n){var i=e("../baidu"),o=e("../editor"),r=e("../core/domUtils"),a=e("../core/browser");e("../ui/shortcutmenu"),o.plugins.shortcutmenu=function(){var e,t=this,n=t.options.shortcutMenu||[];n.length&&(t.addListener("contextmenu mouseup",function(t,s){var l=this,d={type:t,target:s.target||s.srcElement,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY};if(setTimeout(function(){var r=l.selection.getRange();(r.collapsed===!1||"contextmenu"==t)&&(e||(e=new i.editor.ui.ShortCutMenu({editor:l,items:n,theme:l.options.theme,className:"edui-shortcutmenu"}),e.render(),l.fireEvent("afterrendershortcutmenu",e)),e.show(d,!!o.plugins.contextmenu))}),"contextmenu"==t&&(r.preventDefault(s),a.ie)){var c;try{c=l.selection.getNative().createRange()}catch(s){return}if(c.item){var u=new dom.Range(l.document);u.selectNode(c.item(0)).select(!0,!0)}}"keydown"==t&&e&&!e.isHidden&&e.hide()}),t.addListener("keydown",function(t){"keydown"==t&&e&&!e.isHidden&&e.hide()}))},n.exports=o.plugins.shortcutmenu}),define("ueditor/plugins/source",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd","../core/node"],function(e,t,n){var i=e("../editor");e("../core/utils");var o=e("../core/domUtils"),r=e("../core/dtd"),a=e("../core/browser");e("../core/node"),function(){var e={textarea:function(e,t){var n=t.ownerDocument.createElement("textarea");return n.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;",a.ie&&8>a.version&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px",t.onresize=function(){n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px"}),t.appendChild(n),{setContent:function(e){n.value=e},getContent:function(){return n.value},select:function(){var e;a.ie?(e=n.createTextRange(),e.collapse(!0),e.select()):(n.setSelectionRange(0,0),n.focus())},dispose:function(){t.removeChild(n),t.onresize=null,n=null,t=null}}},codemirror:function(e,t){var n=window.CodeMirror(t,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0}),i=n.getWrapperElement();return i.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;',n.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;",n.refresh(),{getCodeMirror:function(){return n},setContent:function(e){n.setValue(e)},getContent:function(){return n.getValue()},select:function(){n.focus()},dispose:function(){t.removeChild(i),i=null,n=null}}}};i.plugins.source=function(){function t(t){return e["codemirror"==l.sourceEditor&&window.CodeMirror?"codemirror":"textarea"](s,t)}var n,s=this,l=this.options,d=!1;l.sourceEditor=a.ie?"textarea":l.sourceEditor||"codemirror",s.setOpt({sourceEditorFirst:!1});var c,u,f=s.getContent;s.commands.source={execCommand:function(){if(d=!d){u=s.selection.getRange().createAddress(!1,!0),s.undoManger&&s.undoManger.save(!0),a.gecko&&(s.body.contentEditable=!1),c=s.iframe.style.cssText,s.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;",s.fireEvent("beforegetcontent");var e=i.htmlparser(s.body.innerHTML);s.filterOutputRule(e),e.traversal(function(e){if("element"==e.type)switch(e.tagName){case"td":case"th":case"caption":e.children&&1==e.children.length&&"br"==e.firstChild().tagName&&e.removeChild(e.firstChild());break;case"pre":e.innerText(e.innerText().replace(/&nbsp;/g," "))}}),s.fireEvent("aftergetcontent");var l=e.toHtml(!0);n=t(s.iframe.parentNode),n.setContent(l),setTimeout(function(){n.select(),s.addListener("fullscreenchanged",function(){try{n.getCodeMirror().refresh()}catch(e){}})}),s.getContent=function(){return n.getContent()||"<p>"+(a.ie?"":"<br/>")+"</p>"}}else{s.iframe.style.cssText=c;var p=n.getContent()||"<p>"+(a.ie?"":"<br/>")+"</p>";p=p.replace(RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(e,t){return t&&!r.$inlineWithA[t.toLowerCase()]?e.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):e.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),s.setContent(p),n.dispose(),n=null,s.getContent=f;var m=s.body.firstChild;if(m||(s.body.innerHTML="<p>"+(a.ie?"":"<br/>")+"</p>",m=s.body.firstChild),s.undoManger&&s.undoManger.save(!0),a.gecko){var h=document.createElement("input");h.style.cssText="position:absolute;left:0;top:-32768px",document.body.appendChild(h),s.body.contentEditable=!1,setTimeout(function(){o.setViewportOffset(h,{left:-32768,top:0}),h.focus(),setTimeout(function(){s.body.contentEditable=!0,s.selection.getRange().moveToAddress(u).select(!0),o.remove(h)})})}else try{s.selection.getRange().moveToAddress(u).select(!0)}catch(g){}}this.fireEvent("sourcemodechanged",d)},queryCommandState:function(){return 0|d},notNeedUndo:1};var p=s.queryCommandState;s.queryCommandState=function(e){return e=e.toLowerCase(),d?e in{source:1,fullscreen:1}?1:-1:p.apply(this,arguments)},"codemirror"==l.sourceEditor&&s.addListener("ready",function(){})},n.exports=i.plugins.source}()}),define("ueditor/plugins/link",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e){var t=e("../editor"),n=e("../core/domUtils"),i=e("../core/browser"),o=e("../core/utils");t.plugins.link=function(){function e(e){var t=e.startContainer,i=e.endContainer;(t=n.findParentByTagName(t,"a",!0))&&e.setStartBefore(t),(i=n.findParentByTagName(i,"a",!0))&&e.setEndAfter(i)}function r(t,r,a){var s=t.cloneRange(),l=a.queryCommandValue("link");e(t=t.adjustmentBoundary());var d=t.startContainer;if(1==d.nodeType&&l&&(d=d.childNodes[t.startOffset],d&&1==d.nodeType&&"A"==d.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(d[i.ie?"innerText":"textContent"])&&(d[i.ie?"innerText":"textContent"]=o.html(r.textValue||r.href))),(!s.collapsed||l)&&(t.removeInlineStyle("a"),s=t.cloneRange()),s.collapsed){var c=t.document.createElement("a"),u="";r.textValue?(u=o.html(r.textValue),delete r.textValue):u=o.html(r.href),n.setAttributes(c,r),d=n.findParentByTagName(s.startContainer,"a",!0),d&&n.isInNodeEndBoundary(s,d)&&t.setStartAfter(d).collapse(!0),c[i.ie?"innerText":"textContent"]=u,t.insertNode(c).selectNode(c)}else t.applyInlineStyle("a",r)}t.commands.unlink={execCommand:function(){var t,i=this.selection.getRange();(!i.collapsed||n.findParentByTagName(i.startContainer,"a",!0))&&(t=i.createBookmark(),e(i),i.removeInlineStyle("a").moveToBookmark(t).select())},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}},t.commands.link={execCommand:function(e,t){var n;t._href&&(t._href=o.unhtml(t._href,/[<">]/g)),t.href&&(t.href=o.unhtml(t.href,/[<">]/g)),t.textValue&&(t.textValue=o.unhtml(t.textValue,/[<">]/g)),r(n=this.selection.getRange(),t,this),n.collapse().select(!0)},queryCommandValue:function(){var e,t=this.selection.getRange();if(!t.collapsed){t.shrinkBoundary();var i=3!=t.startContainer.nodeType&&t.startContainer.childNodes[t.startOffset]?t.startContainer.childNodes[t.startOffset]:t.startContainer,o=3==t.endContainer.nodeType||0==t.endOffset?t.endContainer:t.endContainer.childNodes[t.endOffset-1],r=t.getCommonAncestor();if(e=n.findParentByTagName(r,"a",!0),!e&&1==r.nodeType)for(var a,s,l,d=r.getElementsByTagName("a"),c=0;l=d[c++];)if(a=n.getPosition(l,i),s=n.getPosition(l,o),(a&n.POSITION_FOLLOWING||a&n.POSITION_CONTAINS)&&(s&n.POSITION_PRECEDING||s&n.POSITION_CONTAINS)){e=l;break}return e}return e=t.startContainer,e=1==e.nodeType?e:e.parentNode,e&&(e=n.findParentByTagName(e,"a",!0))&&!n.isInNodeEndBoundary(t,e)?e:void 0},queryCommandState:function(){var e=this.selection.getRange().getClosedNode(),t=e&&"edui-faked-video"==e.className;return t?-1:0}}}}),define("ueditor/plugins/table.core",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/utils"),r=e("../core/domUtils"),a=e("../core/dtd"),s=e("../core/browser");(function(){function e(){}var t=i.UETable=function(e){this.table=e,this.indexTable=[],this.selectedTds=[],this.cellsRange={},this.update(e)};t.removeSelectedClass=function(e){o.each(e,function(e){r.removeClasses(e,"selectTdClass")})},t.addSelectedClass=function(e){o.each(e,function(e){r.addClass(e,"selectTdClass")})},t.isEmptyBlock=function(e){var t=RegExp(r.fillChar,"g");if(e[s.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length>0)return 0;for(var n in a.$isNotEmpty)if(a.$isNotEmpty.hasOwnProperty(n)&&e.getElementsByTagName(n).length)return 0;return 1},t.getWidth=function(e){return e?parseInt(r.getComputedStyle(e,"width"),10):0},t.getTableCellAlignState=function(e){!o.isArray(e)&&(e=[e]);var t={},n=["align","valign"],i=null,r=!0;return o.each(e,function(e){return o.each(n,function(n){if(i=e.getAttribute(n),!t[n]&&i)t[n]=i;else if(!t[n]||i!==t[n])return r=!1,!1}),r}),r?t:null},t.getTableItemsByRange=function(e){var t=e.selection.getStart();t&&t.id&&0===t.id.indexOf("_baidu_bookmark_start_")&&(t=t.nextSibling);var n=t&&r.findParentByTagName(t,["td","th"],!0),i=n&&n.parentNode,o=t&&r.findParentByTagName(t,"caption",!0),a=o?o.parentNode:i&&i.parentNode.parentNode;return{cell:n,tr:i,table:a,caption:o}},t.getUETableBySelected=function(e){var n=t.getTableItemsByRange(e).table;return n&&n.ueTable&&n.ueTable.selectedTds.length?n.ueTable:null},t.getDefaultValue=function(e,t){var n,i,o,a,s={thin:"0px",medium:"1px",thick:"2px"};if(t)return l=t.getElementsByTagName("td")[0],a=r.getComputedStyle(t,"border-left-width"),n=parseInt(s[a]||a,10),a=r.getComputedStyle(l,"padding-left"),i=parseInt(s[a]||a,10),a=r.getComputedStyle(l,"border-left-width"),o=parseInt(s[a]||a,10),{tableBorder:n,tdPadding:i,tdBorder:o};t=e.document.createElement("table"),t.insertRow(0).insertCell(0).innerHTML="xxx",e.body.appendChild(t);var l=t.getElementsByTagName("td")[0];return a=r.getComputedStyle(t,"border-left-width"),n=parseInt(s[a]||a,10),a=r.getComputedStyle(l,"padding-left"),i=parseInt(s[a]||a,10),a=r.getComputedStyle(l,"border-left-width"),o=parseInt(s[a]||a,10),r.remove(t),{tableBorder:n,tdPadding:i,tdBorder:o}},t.getUETable=function(e){var n=e.tagName.toLowerCase();return e="td"==n||"th"==n||"caption"==n?r.findParentByTagName(e,"table",!0):e,e.ueTable||(e.ueTable=new t(e)),e.ueTable},t.cloneCell=function(e,t,n){if(!e||o.isString(e))return this.table.ownerDocument.createElement(e||"td");var i=r.hasClass(e,"selectTdClass");i&&r.removeClasses(e,"selectTdClass");var a=e.cloneNode(!0);return t&&(a.rowSpan=a.colSpan=1),!n&&r.removeAttributes(a,"width height"),!n&&r.removeAttributes(a,"style"),a.style.borderLeftStyle="",a.style.borderTopStyle="",a.style.borderLeftColor=e.style.borderRightColor,a.style.borderLeftWidth=e.style.borderRightWidth,a.style.borderTopColor=e.style.borderBottomColor,a.style.borderTopWidth=e.style.borderBottomWidth,i&&r.addClass(e,"selectTdClass"),a},t.prototype={getMaxRows:function(){for(var e,t=this.table.rows,n=1,i=0;e=t[i];i++){for(var o,r=1,a=0;o=e.cells[a++];)r=Math.max(o.rowSpan||1,r);n=Math.max(r+i,n)}return n},getMaxCols:function(){for(var e,t=this.table.rows,n=0,i={},o=0;e=t[o];o++){for(var r,a=0,s=0;r=e.cells[s++];)if(a+=r.colSpan||1,r.rowSpan&&r.rowSpan>1)for(var l=1;r.rowSpan>l;l++)i["row_"+(o+l)]?i["row_"+(o+l)]++:i["row_"+(o+l)]=r.colSpan||1;a+=i["row_"+o]||0,n=Math.max(a,n)}return n},getCellColIndex:function(){},getHSideCell:function(t,n){try{var i,o,r=this.getCellInfo(t),a=this.selectedTds.length,s=this.cellsRange;return!n&&(a?!s.beginColIndex:!r.colIndex)||n&&(a?s.endColIndex==this.colsNum-1:r.colIndex==this.colsNum-1)?null:(i=a?s.beginRowIndex:r.rowIndex,o=n?a?s.endColIndex+1:r.colIndex+1:a?s.beginColIndex-1:1>r.colIndex?0:r.colIndex-1,this.getCell(this.indexTable[i][o].rowIndex,this.indexTable[i][o].cellIndex))}catch(l){e(l)}},getTabNextCell:function(e,t){var n,i=this.getCellInfo(e),o=t||i.rowIndex,r=i.colIndex+1+(i.colSpan-1);try{n=this.getCell(this.indexTable[o][r].rowIndex,this.indexTable[o][r].cellIndex)}catch(a){try{o=1*o+1,r=0,n=this.getCell(this.indexTable[o][r].rowIndex,this.indexTable[o][r].cellIndex)}catch(a){}}return n},getVSideCell:function(t,n,i){try{var o,r,a=this.getCellInfo(t),s=this.selectedTds.length&&!i,l=this.cellsRange;return!n&&0==a.rowIndex||n&&(s?l.endRowIndex==this.rowsNum-1:a.rowIndex+a.rowSpan>this.rowsNum-1)?null:(o=n?s?l.endRowIndex+1:a.rowIndex+a.rowSpan:s?l.beginRowIndex-1:a.rowIndex-1,r=s?l.beginColIndex:a.colIndex,this.getCell(this.indexTable[o][r].rowIndex,this.indexTable[o][r].cellIndex))}catch(d){e(d)}},getSameEndPosCells:function(t,n){try{for(var i="x"===n.toLowerCase(),o=r.getXY(t)[i?"x":"y"]+t["offset"+(i?"Width":"Height")],a=this.table.rows,s=null,l=[],d=0;this.rowsNum>d;d++){s=a[d].cells;
for(var c,u=0;c=s[u++];){var f=r.getXY(c)[i?"x":"y"]+c["offset"+(i?"Width":"Height")];if(f>o&&i)break;if((t==c||o==f)&&(1==c[i?"colSpan":"rowSpan"]&&l.push(c),i))break}}return l}catch(p){e(p)}},setCellContent:function(e,t){e.innerHTML=t||(s.ie?r.fillChar:"<br />")},cloneCell:t.cloneCell,getSameStartPosXCells:function(t){try{for(var n,i=r.getXY(t).x+t.offsetWidth,o=this.table.rows,a=[],s=0;this.rowsNum>s;s++){n=o[s].cells;for(var l,d=0;l=n[d++];){var c=r.getXY(l).x;if(c>i)break;if(c==i&&1==l.colSpan){a.push(l);break}}}return a}catch(u){e(u)}},update:function(e){this.table=e||this.table,this.selectedTds=[],this.cellsRange={},this.indexTable=[];for(var t=this.table.rows,n=this.getMaxRows(),i=n-t.length,a=this.getMaxCols();i--;)this.table.insertRow(t.length);this.rowsNum=n,this.colsNum=a;for(var s=0,l=t.length;l>s;s++)this.indexTable[s]=Array(a);for(var d,c=0;d=t[c];c++)for(var u,f=0,p=d.cells;u=p[f];f++){u.rowSpan>n&&(u.rowSpan=n);for(var m=f,h=u.rowSpan||1,g=u.colSpan||1;this.indexTable[c][m];)m++;for(var v=0;h>v;v++)for(var b=0;g>b;b++)this.indexTable[c+v][m+b]={rowIndex:c,cellIndex:f,colIndex:m,rowSpan:h,colSpan:g}}for(v=0;n>v;v++)for(b=0;a>b;b++)void 0===this.indexTable[v][b]&&(d=t[v],u=d.cells[d.cells.length-1],u=u?u.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(u),1!==u.colSpan&&(u.colSpan=1),1!==u.rowSpan&&(u.rowSpan=1),d.appendChild(u),this.indexTable[v][b]={rowIndex:v,cellIndex:u.cellIndex,colIndex:b,rowSpan:1,colSpan:1});var y=r.getElementsByTagName(this.table,"td"),x=[];if(o.each(y,function(e){r.hasClass(e,"selectTdClass")&&x.push(e)}),x.length){var C=x[0],N=x[x.length-1],w=this.getCellInfo(C),T=this.getCellInfo(N);this.selectedTds=x,this.cellsRange={beginRowIndex:w.rowIndex,beginColIndex:w.colIndex,endRowIndex:T.rowIndex+T.rowSpan-1,endColIndex:T.colIndex+T.colSpan-1}}},getCellInfo:function(e){if(e)for(var t=e.cellIndex,n=e.parentNode.rowIndex,i=this.indexTable[n],o=this.colsNum,r=t;o>r;r++){var a=i[r];if(a.rowIndex===n&&a.cellIndex===t)return a}},getCell:function(e,t){return this.rowsNum>e&&this.table.rows[e].cells[t]||null},deleteCell:function(e,t){t="number"==typeof t?t:e.parentNode.rowIndex;var n=this.table.rows[t];n.deleteCell(e.cellIndex)},getCellsRange:function(e,t){function n(e,t,o,r){var a,s,l,d=e,c=t,u=o,f=r;if(e>0)for(s=t;r>s;s++)a=i.indexTable[e][s],l=a.rowIndex,e>l&&(d=Math.min(l,d));if(i.colsNum>r)for(l=e;o>l;l++)a=i.indexTable[l][r],s=a.colIndex+a.colSpan-1,s>r&&(f=Math.max(s,f));if(i.rowsNum>o)for(s=t;r>s;s++)a=i.indexTable[o][s],l=a.rowIndex+a.rowSpan-1,l>o&&(u=Math.max(l,u));if(t>0)for(l=e;o>l;l++)a=i.indexTable[l][t],s=a.colIndex,t>s&&(c=Math.min(a.colIndex,c));return d!=e||c!=t||u!=o||f!=r?n(d,c,u,f):{beginRowIndex:e,beginColIndex:t,endRowIndex:o,endColIndex:r}}try{var i=this,o=i.getCellInfo(e);if(e===t)return{beginRowIndex:o.rowIndex,beginColIndex:o.colIndex,endRowIndex:o.rowIndex+o.rowSpan-1,endColIndex:o.colIndex+o.colSpan-1};var r=i.getCellInfo(t),a=Math.min(o.rowIndex,r.rowIndex),s=Math.min(o.colIndex,r.colIndex),l=Math.max(o.rowIndex+o.rowSpan-1,r.rowIndex+r.rowSpan-1),d=Math.max(o.colIndex+o.colSpan-1,r.colIndex+r.colSpan-1);return n(a,s,l,d)}catch(c){}},getCells:function(e){this.clearSelected();for(var t,n,i,o=e.beginRowIndex,r=e.beginColIndex,a=e.endRowIndex,s=e.endColIndex,l={},d=[],c=o;a>=c;c++)for(var u=r;s>=u;u++){t=this.indexTable[c][u],n=t.rowIndex,i=t.colIndex;var f=n+"|"+i;if(!l[f]){if(l[f]=1,c>n||u>i||n+t.rowSpan-1>a||i+t.colSpan-1>s)return null;d.push(this.getCell(n,t.cellIndex))}}return d},clearSelected:function(){t.removeSelectedClass(this.selectedTds),this.selectedTds=[],this.cellsRange={}},setSelected:function(e){var n=this.getCells(e);t.addSelectedClass(n),this.selectedTds=n,this.cellsRange=e},isFullRow:function(){var e=this.cellsRange;return e.endColIndex-e.beginColIndex+1==this.colsNum},isFullCol:function(){var e=this.cellsRange,t=this.table,n=t.getElementsByTagName("th"),i=e.endRowIndex-e.beginRowIndex+1;return n.length?i==this.rowsNum||i==this.rowsNum-1:i==this.rowsNum},getNextCell:function(t,n,i){try{var o,r,a=this.getCellInfo(t),s=this.selectedTds.length&&!i,l=this.cellsRange;return!n&&0==a.rowIndex||n&&(s?l.endRowIndex==this.rowsNum-1:a.rowIndex+a.rowSpan>this.rowsNum-1)?null:(o=n?s?l.endRowIndex+1:a.rowIndex+a.rowSpan:s?l.beginRowIndex-1:a.rowIndex-1,r=s?l.beginColIndex:a.colIndex,this.getCell(this.indexTable[o][r].rowIndex,this.indexTable[o][r].cellIndex))}catch(d){e(d)}},getPreviewCell:function(t,n){try{var i,o,r=this.getCellInfo(t),a=this.selectedTds.length,s=this.cellsRange;return!n&&(a?!s.beginColIndex:!r.colIndex)||n&&(a?s.endColIndex==this.colsNum-1:r.rowIndex>this.colsNum-1)?null:(i=n?a?s.beginRowIndex:1>r.rowIndex?0:r.rowIndex-1:a?s.beginRowIndex:r.rowIndex,o=n?a?s.endColIndex+1:r.colIndex:a?s.beginColIndex-1:1>r.colIndex?0:r.colIndex-1,this.getCell(this.indexTable[i][o].rowIndex,this.indexTable[i][o].cellIndex))}catch(l){e(l)}},moveContent:function(e,n){if(!t.isEmptyBlock(n)){if(t.isEmptyBlock(e))return e.innerHTML=n.innerHTML,void 0;var i=e.lastChild;for(3!=i.nodeType&&a.$block[i.tagName]||e.appendChild(e.ownerDocument.createElement("br"));i=n.firstChild;)e.appendChild(i)}},mergeRight:function(e){var t=this.getCellInfo(e),n=t.colIndex+t.colSpan,i=this.indexTable[t.rowIndex][n],o=this.getCell(i.rowIndex,i.cellIndex);e.colSpan=t.colSpan+i.colSpan,e.removeAttribute("width"),this.moveContent(e,o),this.deleteCell(o,i.rowIndex),this.update()},mergeDown:function(e){var t=this.getCellInfo(e),n=t.rowIndex+t.rowSpan,i=this.indexTable[n][t.colIndex],o=this.getCell(i.rowIndex,i.cellIndex);e.rowSpan=t.rowSpan+i.rowSpan,e.removeAttribute("height"),this.moveContent(e,o),this.deleteCell(o,i.rowIndex),this.update()},mergeRange:function(){var e=this.cellsRange,t=this.getCell(e.beginRowIndex,this.indexTable[e.beginRowIndex][e.beginColIndex].cellIndex);if("TH"==t.tagName&&e.endRowIndex!==e.beginRowIndex){var n=this.indexTable,i=this.getCellInfo(t);t=this.getCell(1,n[1][i.colIndex].cellIndex),e=this.getCellsRange(t,this.getCell(n[this.rowsNum-1][i.colIndex].rowIndex,n[this.rowsNum-1][i.colIndex].cellIndex))}for(var o,r=this.getCells(e),a=0;o=r[a++];)o!==t&&(this.moveContent(t,o),this.deleteCell(o));if(t.rowSpan=e.endRowIndex-e.beginRowIndex+1,t.rowSpan>1&&t.removeAttribute("height"),t.colSpan=e.endColIndex-e.beginColIndex+1,t.colSpan>1&&t.removeAttribute("width"),t.rowSpan==this.rowsNum&&1!=t.colSpan&&(t.colSpan=1),t.colSpan==this.colsNum&&1!=t.rowSpan){var s=t.parentNode.rowIndex;if(this.table.deleteRow)for(var a=s+1,l=s+1,d=t.rowSpan;d>a;a++)this.table.deleteRow(l);else for(var a=0,d=t.rowSpan-1;d>a;a++){var c=this.table.rows[s+1];c.parentNode.removeChild(c)}t.rowSpan=1}this.update()},insertRow:function(e,t){var n,i=this.colsNum,o=this.table,r=o.insertRow(e);if(parseInt((o.offsetWidth-20*i-i-1)/i,10),0==e||e==this.rowsNum)for(var a=0;i>a;a++)n=this.cloneCell(t,!0),this.setCellContent(n),n.getAttribute("vAlign")&&n.setAttribute("vAlign",n.getAttribute("vAlign")),r.appendChild(n);else{var s=this.indexTable[e];for(a=0;i>a;a++){var l=s[a];e>l.rowIndex?(n=this.getCell(l.rowIndex,l.cellIndex),n.rowSpan=l.rowSpan+1):(n=this.cloneCell(t,!0),this.setCellContent(n),r.appendChild(n))}}return this.update(),r},deleteRow:function(e){for(var t=this.table.rows[e],n=this.indexTable[e],i=this.colsNum,a=0,s=0;i>s;){var l=n[s],d=this.getCell(l.rowIndex,l.cellIndex);if(d.rowSpan>1&&l.rowIndex==e){var c=d.cloneNode(!0);c.rowSpan=d.rowSpan-1,c.innerHTML="",d.rowSpan=1;var u,f=e+1,p=this.table.rows[f],m=this.getPreviewMergedCellsNum(f,s)-a;s>m?(u=s-m-1,r.insertAfter(p.cells[u],c)):p.cells.length&&p.insertBefore(c,p.cells[0]),a+=1}s+=d.colSpan||1}var h=[],g={};for(s=0;i>s;s++){var v=n[s].rowIndex,b=n[s].cellIndex,y=v+"_"+b;g[y]||(g[y]=1,d=this.getCell(v,b),h.push(d))}var x=[];o.each(h,function(e){1==e.rowSpan?e.parentNode.removeChild(e):x.push(e)}),o.each(x,function(e){e.rowSpan--}),t.parentNode.removeChild(t),this.update()},insertCol:function(e,t,n){function i(e,t,n){if(0==e){var i=t.nextSibling||t.previousSibling;"TH"==i.tagName&&(i=t.ownerDocument.createElement("th"),i.appendChild(t.firstChild),n.insertBefore(i,t),r.remove(t))}else if("TH"==t.tagName){var o=t.ownerDocument.createElement("td");o.appendChild(t.firstChild),n.insertBefore(o,t),r.remove(t)}}var o,a,s,l=this.rowsNum,d=0,c=parseInt((this.table.offsetWidth-20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10);if(0==e||e==this.colsNum)for(;l>d;d++)o=this.table.rows[d],s=o.cells[0==e?e:o.cells.length],a=this.cloneCell(t,!0),this.setCellContent(a),a.setAttribute("vAlign",a.getAttribute("vAlign")),s&&a.setAttribute("width",s.getAttribute("width")),e?r.insertAfter(o.cells[o.cells.length-1],a):o.insertBefore(a,o.cells[0]),i(d,a,o);else for(;l>d;d++){var u=this.indexTable[d][e];e>u.colIndex?(a=this.getCell(u.rowIndex,u.cellIndex),a.colSpan=u.colSpan+1):(o=this.table.rows[d],s=o.cells[u.cellIndex],a=this.cloneCell(t,!0),this.setCellContent(a),a.setAttribute("vAlign",a.getAttribute("vAlign")),s&&a.setAttribute("width",s.getAttribute("width")),s?o.insertBefore(a,s):o.appendChild(a)),i(d,a,o)}this.update(),this.updateWidth(c,n||{tdPadding:10,tdBorder:1})},updateWidth:function(e,n){var i=this.table,a=t.getWidth(i)-2*n.tdPadding-n.tdBorder+e;if(i.ownerDocument.body.offsetWidth>a)return i.setAttribute("width",a),void 0;var s=r.getElementsByTagName(this.table,"td");o.each(s,function(t){t.setAttribute("width",e)})},deleteCol:function(e){for(var t=this.indexTable,n=this.table.rows,i=this.table.getAttribute("width"),o=0,r=this.rowsNum,a={},s=0;r>s;){var l=t[s],d=l[e],c=d.rowIndex+"_"+d.colIndex;if(!a[c]){a[c]=1;var u=this.getCell(d.rowIndex,d.cellIndex);o||(o=u&&parseInt(u.offsetWidth/u.colSpan,10).toFixed(0)),u.colSpan>1?u.colSpan--:n[s].deleteCell(d.cellIndex),s+=d.rowSpan||1}}this.table.setAttribute("width",i-o),this.update()},splitToCells:function(e){var t=this,n=this.splitToRows(e);o.each(n,function(e){t.splitToCols(e)})},splitToRows:function(e){var t=this.getCellInfo(e),n=t.rowIndex,i=t.colIndex,o=[];e.rowSpan=1,o.push(e);for(var r=n,a=n+t.rowSpan;a>r;r++)if(r!=n){var s=this.table.rows[r],l=s.insertCell(i-this.getPreviewMergedCellsNum(r,i));l.colSpan=t.colSpan,this.setCellContent(l),l.setAttribute("vAlign",e.getAttribute("vAlign")),l.setAttribute("align",e.getAttribute("align")),e.style.cssText&&(l.style.cssText=e.style.cssText),o.push(l)}return this.update(),o},getPreviewMergedCellsNum:function(e,t){for(var n=this.indexTable[e],i=0,o=0;t>o;){var r=n[o].colSpan,a=n[o].rowIndex;i+=r-(a==e?1:0),o+=r}return i},splitToCols:function(e){var t=(e.offsetWidth/e.colSpan-22).toFixed(0),n=this.getCellInfo(e),i=n.rowIndex,o=n.colIndex,a=[];e.colSpan=1,e.setAttribute("width",t),a.push(e);for(var s=o,l=o+n.colSpan;l>s;s++)if(s!=o){var d=this.table.rows[i],c=d.insertCell(this.indexTable[i][s].cellIndex+1);if(c.rowSpan=n.rowSpan,this.setCellContent(c),c.setAttribute("vAlign",e.getAttribute("vAlign")),c.setAttribute("align",e.getAttribute("align")),c.setAttribute("width",t),e.style.cssText&&(c.style.cssText=e.style.cssText),"TH"==e.tagName){var u=e.ownerDocument.createElement("th");u.appendChild(c.firstChild),u.setAttribute("vAlign",e.getAttribute("vAlign")),u.rowSpan=c.rowSpan,d.insertBefore(u,c),r.remove(c)}a.push(c)}return this.update(),a},isLastCell:function(e,t,n){t=t||this.rowsNum,n=n||this.colsNum;var i=this.getCellInfo(e);return i.rowIndex+i.rowSpan==t&&i.colIndex+i.colSpan==n},getLastCell:function(e){e=e||this.table.getElementsByTagName("td"),this.getCellInfo(e[0]);var t,n=this,i=e[0],r=i.parentNode,a=0,s=0;return o.each(e,function(e){e.parentNode==r&&(s+=e.colSpan||1),a+=e.rowSpan*e.colSpan||1}),t=a/s,o.each(e,function(e){return n.isLastCell(e,t,s)?(i=e,!1):void 0}),i},selectRow:function(e){var t=this.indexTable[e],n=this.getCell(t[0].rowIndex,t[0].cellIndex),i=this.getCell(t[this.colsNum-1].rowIndex,t[this.colsNum-1].cellIndex),o=this.getCellsRange(n,i);this.setSelected(o)},selectTable:function(){var e=this.table.getElementsByTagName("td"),t=this.getCellsRange(e[0],e[e.length-1]);this.setSelected(t)},sortTable:function(e,t){var n=this.table,i=n.rows,r=[],a="TH"===i[0].cells[0].tagName,s=0;if(this.selectedTds.length){for(var l=this.cellsRange,d=l.endRowIndex+1,c=l.beginRowIndex;d>c;c++)r[c]=i[c];r.splice(0,l.beginRowIndex),s=l.endRowIndex+1===this.rowsNum?0:l.endRowIndex+1}else for(var c=0,d=i.length;d>c;c++)r[c]=i[c];a&&r.splice(0,1),r=o.sort(r,function(n,i){var o=function(e){return e.innerText||e.textContent};return t?"number"==typeof t?t:t.call(this,n.cells[e],i.cells[e]):function(){var t=o(n.cells[e]),r=o(i.cells[e]);return t.localeCompare(r)}()});for(var u=n.ownerDocument.createDocumentFragment(),f=0,d=r.length;d>f;f++)u.appendChild(r[f]);var p=n.getElementsByTagName("tbody")[0];s?p.insertBefore(u,i[s-l.endRowIndex+l.beginRowIndex-1]):p.appendChild(u)},setBackground:function(e,t){if("string"==typeof t)o.each(e,function(e){e.style.backgroundColor=t});else if("object"==typeof t){t=o.extend({repeat:!0,colorList:["#ddd","#fff"]},t);for(var n,i=this.getCellInfo(e[0]).rowIndex,r=0,a=t.colorList,s=function(e,t,n){return e[t]?e[t]:n?e[t%e.length]:""},l=0;n=e[l++];){var d=this.getCellInfo(n);n.style.backgroundColor=s(a,i+r==d.rowIndex?r:++r,t.repeat)}}},removeBackground:function(e){o.each(e,function(e){e.style.backgroundColor=""})}},n.exports=t})()}),define("ueditor/plugins/table.cmds",["../editor","../baidu","../core/utils","../core/browser","../core/domUtils","../dom","../core/dtd"],function(e){var t=e("../editor"),n=e("../core/utils"),i=e("../core/domUtils"),o=e("../core/browser");t.UETable=e("./table.core"),function(){function e(e,t){var i=e.getElementsByTagName("td");n.each(i,function(e){e.removeAttribute("width")}),e.setAttribute("width",r(t,!0,c(t,e))),setTimeout(function(){n.each(i,function(e){1==e.colSpan&&e.setAttribute("width",e.offsetWidth+"")})},0)}function r(e,t,n){var o=e.body;return o.offsetWidth-(t?2*parseInt(i.getComputedStyle(o,"margin-left"),10):0)-2*n.tableBorder-(e.options.offsetWidth||0)}function a(e){var t=l(e).cell;if(t){var n=u(t);return n.selectedTds.length?n.selectedTds:[t]}return[]}var s=t.UETable,l=function(e){return s.getTableItemsByRange(e)},d=function(e){return s.getUETableBySelected(e)},c=function(e,t){return s.getDefaultValue(e,t)},u=function(e){return s.getUETable(e)};t.commands.inserttable={queryCommandState:function(){return l(this).table?-1:0},execCommand:function(e,t){function r(e,t){for(var n=[],r=e.numRows,a=e.numCols,s=0;r>s;s++){n.push("<tr>");for(var l=0;a>l;l++)n.push('<td width="'+t+'"  vAlign="'+e.tdvalign+'" >'+(o.ie?i.fillChar:"<br/>")+"</td>");n.push("</tr>")}return"<table><tbody>"+n.join("")+"</tbody></table>"}t||(t=n.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var a=this,s=this.selection.getRange(),l=s.startContainer,d=i.findParent(l,function(e){return i.isBlockElm(e)},!0)||a.body,u=c(a),f=d.offsetWidth,p=Math.floor(f/t.numCols-2*u.tdPadding-u.tdBorder);!t.tdvalign&&(t.tdvalign=a.options.tdvalign),a.execCommand("inserthtml",r(t,p))}},t.commands.insertparagraphbeforetable={queryCommandState:function(){return l(this).cell?0:-1},execCommand:function(){var e=l(this).table;if(e){var t=this.document.createElement("p");t.innerHTML=o.ie?"&nbsp;":"<br />",e.parentNode.insertBefore(t,e),this.selection.getRange().setStart(t,0).setCursor()}}},t.commands.deletetable={queryCommandState:function(){var e=this.selection.getRange();return i.findParentByTagName(e.startContainer,"table",!0)?0:-1},execCommand:function(e,t){var n=this.selection.getRange();if(t=t||i.findParentByTagName(n.startContainer,"table",!0)){var r=t.nextSibling;r||(r=i.createElement(this.document,"p",{innerHTML:o.ie?i.fillChar:"<br/>"}),t.parentNode.insertBefore(r,t)),i.remove(t),n=this.selection.getRange(),3==r.nodeType?n.setStartBefore(r):n.setStart(r,0),n.setCursor(!1,!0),this.fireEvent("tablehasdeleted")}}},t.commands.cellalign={queryCommandState:function(){return a(this).length?0:-1},execCommand:function(e,t){var n=a(this);if(n.length)for(var i,o=0;i=n[o++];)i.setAttribute("align",t)}},t.commands.cellvalign={queryCommandState:function(){return a(this).length?0:-1},execCommand:function(e,t){var n=a(this);if(n.length)for(var i,o=0;i=n[o++];)i.setAttribute("vAlign",t)}},t.commands.insertcaption={queryCommandState:function(){var e=l(this).table;return e?0==e.getElementsByTagName("caption").length?1:-1:-1},execCommand:function(){var e=l(this).table;if(e){var t=this.document.createElement("caption");t.innerHTML=o.ie?i.fillChar:"<br/>",e.insertBefore(t,e.firstChild);var n=this.selection.getRange();n.setStart(t,0).setCursor()}}},t.commands.deletecaption={queryCommandState:function(){var e=this.selection.getRange(),t=i.findParentByTagName(e.startContainer,"table");return t?0==t.getElementsByTagName("caption").length?-1:1:-1},execCommand:function(){var e=this.selection.getRange(),t=i.findParentByTagName(e.startContainer,"table");if(t){i.remove(t.getElementsByTagName("caption")[0]);var n=this.selection.getRange();n.setStart(t.rows[0].cells[0],0).setCursor()}}},t.commands.inserttitle={queryCommandState:function(){var e=l(this).table;if(e){var t=e.rows[0];return 0==t.getElementsByTagName("th").length?0:-1}return-1},execCommand:function(){var e=l(this).table;e&&u(e).insertRow(0,"th");var t=e.getElementsByTagName("th")[0];this.selection.getRange().setStart(t,0).setCursor(!1,!0)}},t.commands.deletetitle={queryCommandState:function(){var e=l(this).table;if(e){var t=e.rows[0];return t.getElementsByTagName("th").length?0:-1}return-1},execCommand:function(){var e=l(this).table;e&&i.remove(e.rows[0]);var t=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(t,0).setCursor(!1,!0)}},t.commands.mergeright={queryCommandState:function(){var e=l(this);if(!e.cell)return-1;var t=u(e.table);if(t.selectedTds.length)return-1;var n=t.getCellInfo(e.cell),i=n.colIndex+n.colSpan;if(i>=t.colsNum)return-1;var o=t.indexTable[n.rowIndex][i];return o.rowIndex==n.rowIndex&&o.rowSpan==n.rowSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell,i=u(n);i.mergeRight(n),e.moveToBookmark(t).select()}},t.commands.mergedown={queryCommandState:function(){var e=l(this),t=e.cell;if(!t||"TH"==t.tagName)return-1;var n=u(e.table);if(n.selectedTds.length)return-1;var i=n.getCellInfo(e.cell),o=i.rowIndex+i.rowSpan;if(o>=n.rowsNum)return-1;var r=n.indexTable[o][i.colIndex];return r.colIndex==i.colIndex&&r.colSpan==i.colSpan&&"TH"!==e.cell.tagName?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell,i=u(n);i.mergeDown(n),e.moveToBookmark(t).select()}},t.commands.mergecells={queryCommandState:function(){return d(this)?0:-1},execCommand:function(){var e=d(this);if(e&&e.selectedTds.length){var t=e.selectedTds[0];e.mergeRange();var n=this.selection.getRange();i.isEmptyBlock(t)?n.setStart(t,0).collapse(!0):n.selectNodeContents(t),n.select()}}},t.commands.insertrow={queryCommandState:function(){var e=l(this),t=e.cell;return t&&"TD"==t.tagName&&u(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this),i=n.cell,o=n.table,r=u(o),a=r.getCellInfo(i);if(r.selectedTds.length)for(var s=r.cellsRange,d=0,c=s.endRowIndex-s.beginRowIndex+1;c>d;d++)r.insertRow(s.beginRowIndex,i);else r.insertRow(a.rowIndex,i);e.moveToBookmark(t).select(),"enabled"===o.getAttribute("interlaced")&&this.fireEvent("interlacetable",o)}},t.commands.insertrownext={queryCommandState:function(){var e=l(this),t=e.cell;return t&&"TD"==t.tagName&&u(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this),i=n.cell,o=n.table,r=u(o),a=r.getCellInfo(i);if(r.selectedTds.length)for(var s=r.cellsRange,d=0,c=s.endRowIndex-s.beginRowIndex+1;c>d;d++)r.insertRow(s.endRowIndex+1,i);else r.insertRow(a.rowIndex+a.rowSpan,i);e.moveToBookmark(t).select(),"enabled"===o.getAttribute("interlaced")&&this.fireEvent("interlacetable",o)}},t.commands.deleterow={queryCommandState:function(){var e=l(this);return e.cell?void 0:-1},execCommand:function(){var e=l(this).cell,t=u(e),o=t.cellsRange,r=t.getCellInfo(e),a=t.getVSideCell(e),s=t.getVSideCell(e,!0),d=this.selection.getRange();if(n.isEmptyObject(o))t.deleteRow(r.rowIndex);else for(var c=o.beginRowIndex;o.endRowIndex+1>c;c++)t.deleteRow(o.beginRowIndex);var f=t.table;if(f.getElementsByTagName("td").length)if(1==r.rowSpan||r.rowSpan==o.endRowIndex-o.beginRowIndex+1)(s||a)&&d.selectNodeContents(s||a).setCursor(!1,!0);else{var p=t.getCell(r.rowIndex,t.indexTable[r.rowIndex][r.colIndex].cellIndex);p&&d.selectNodeContents(p).setCursor(!1,!0)}else{var m=f.nextSibling;i.remove(f),m&&d.setStart(m,0).setCursor(!1,!0)}"enabled"===f.getAttribute("interlaced")&&this.fireEvent("interlacetable",f)}},t.commands.insertcol={queryCommandState:function(){var e=l(this),t=e.cell;return t&&("TD"==t.tagName||"TH"==t.tagName)&&u(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(e){var t=this.selection.getRange(),n=t.createBookmark(!0);if(-1!=this.queryCommandState(e)){var i=l(this).cell,o=u(i),r=o.getCellInfo(i);if(o.selectedTds.length)for(var a=o.cellsRange,s=0,d=a.endColIndex-a.beginColIndex+1;d>s;s++)o.insertCol(a.beginColIndex,i);else o.insertCol(r.colIndex,i);t.moveToBookmark(n).select(!0)}}},t.commands.insertcolnext={queryCommandState:function(){var e=l(this),t=e.cell;return t&&u(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell,i=u(n),o=i.getCellInfo(n);if(i.selectedTds.length)for(var r=i.cellsRange,a=0,s=r.endColIndex-r.beginColIndex+1;s>a;a++)i.insertCol(r.endColIndex+1,n);else i.insertCol(o.colIndex+o.colSpan,n);e.moveToBookmark(t).select()}},t.commands.deletecol={queryCommandState:function(){var e=l(this);return e.cell?void 0:-1},execCommand:function(){var e=l(this).cell,t=u(e),o=t.cellsRange,r=t.getCellInfo(e),a=t.getHSideCell(e),s=t.getHSideCell(e,!0);if(n.isEmptyObject(o))t.deleteCol(r.colIndex);else for(var d=o.beginColIndex;o.endColIndex+1>d;d++)t.deleteCol(o.beginColIndex);var c=t.table,f=this.selection.getRange();if(c.getElementsByTagName("td").length)i.inDoc(e,this.document)?f.setStart(e,0).setCursor(!1,!0):s&&i.inDoc(s,this.document)?f.selectNodeContents(s).setCursor(!1,!0):a&&i.inDoc(a,this.document)&&f.selectNodeContents(a).setCursor(!0,!0);else{var p=c.nextSibling;i.remove(c),p&&f.setStart(p,0).setCursor(!1,!0)}}},t.commands.splittocells={queryCommandState:function(){var e=l(this),t=e.cell;if(!t)return-1;var n=u(e.table);return n.selectedTds.length>0?-1:t&&(t.colSpan>1||t.rowSpan>1)?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell,i=u(n);i.splitToCells(n),e.moveToBookmark(t).select()}},t.commands.splittorows={queryCommandState:function(){var e=l(this),t=e.cell;if(!t)return-1;var n=u(e.table);return n.selectedTds.length>0?-1:t&&t.rowSpan>1?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell,i=u(n);i.splitToRows(n),e.moveToBookmark(t).select()}},t.commands.splittocols={queryCommandState:function(){var e=l(this),t=e.cell;if(!t)return-1;var n=u(e.table);return n.selectedTds.length>0?-1:t&&t.colSpan>1?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell,i=u(n);i.splitToCols(n),e.moveToBookmark(t).select()}},t.commands.adaptbytext=t.commands.adaptbywindow={queryCommandState:function(){return l(this).table?0:-1},execCommand:function(t){var o=l(this),r=o.table;if(r)if("adaptbywindow"==t)e(r,this);else{var a=i.getElementsByTagName(r,"td th");n.each(a,function(e){e.removeAttribute("width")}),r.removeAttribute("width")}}},t.commands.averagedistributecol={queryCommandState:function(){var e=d(this);return e?e.isFullRow()||e.isFullCol()?0:-1:-1},execCommand:function(){function e(){var e,t=r.table,n=0,i=0,a=c(o,t);if(r.isFullRow())n=t.offsetWidth,i=r.colsNum;else for(var s,l=r.cellsRange.beginColIndex,d=r.cellsRange.endColIndex,u=l;d>=u;)s=r.selectedTds[u],n+=s.offsetWidth,u+=s.colSpan,i+=1;return e=Math.ceil(n/i)-2*a.tdBorder-2*a.tdPadding}function t(e){n.each(i.getElementsByTagName(r.table,"th"),function(e){e.setAttribute("width","")});var t=r.isFullRow()?i.getElementsByTagName(r.table,"td"):r.selectedTds;n.each(t,function(t){1==t.colSpan&&t.setAttribute("width",e)})}var o=this,r=d(o);r&&r.selectedTds.length&&t(e())}},t.commands.averagedistributerow={queryCommandState:function(){var e=d(this);return e?e.selectedTds&&/th/gi.test(e.selectedTds[0].tagName)?-1:e.isFullRow()||e.isFullCol()?0:-1:-1},execCommand:function(){function e(){var e,t,n=0,s=a.table,l=c(r,s),d=parseInt(i.getComputedStyle(s.getElementsByTagName("td")[0],"padding-top"));if(a.isFullCol()){var u,f,p=i.getElementsByTagName(s,"caption"),m=i.getElementsByTagName(s,"th");p.length>0&&(u=p[0].offsetHeight),m.length>0&&(f=m[0].offsetHeight),n=s.offsetHeight-(u||0)-(f||0),t=0==m.length?a.rowsNum:a.rowsNum-1}else{for(var h=a.cellsRange.beginRowIndex,g=a.cellsRange.endRowIndex,v=0,b=i.getElementsByTagName(s,"tr"),y=h;g>=y;y++)n+=b[y].offsetHeight,v+=1;t=v}return e=o.ie&&9>o.version?Math.ceil(n/t):Math.ceil(n/t)-2*l.tdBorder-2*d}function t(e){var t=a.isFullCol()?i.getElementsByTagName(a.table,"td"):a.selectedTds;n.each(t,function(t){1==t.rowSpan&&t.setAttribute("height",e)})}var r=this,a=d(r);a&&a.selectedTds.length&&t(e())}},t.commands.cellalignment={queryCommandState:function(){return l(this).table?0:-1},execCommand:function(e,t){var o=this,r=d(o);if(r)n.each(r.selectedTds,function(e){i.setAttributes(e,t)});else{var a=o.selection.getStart(),s=a&&i.findParentByTagName(a,["td","th","caption"],!0);/caption/gi.test(s.tagName)?(s.style.textAlign=t.align,s.style.verticalAlign=t.vAlign):i.setAttributes(s,t),o.selection.getRange().setCursor(!0)}},queryCommandValue:function(){var e=l(this).cell;if(e||(e=a(this)[0]),e){var n=t.UETable.getUETable(e).selectedTds;return!n.length&&(n=e),t.UETable.getTableCellAlignState(n)}return null}},t.commands.tablealignment={queryCommandState:function(){return o.ie&&8>o.version?-1:l(this).table?0:-1},execCommand:function(e,t){var n=this,o=n.selection.getStart(),r=o&&i.findParentByTagName(o,["table"],!0);r&&r.setAttribute("align",t)}},t.commands.edittable={queryCommandState:function(){return l(this).table?0:-1},execCommand:function(e,t){var o=this.selection.getRange(),r=i.findParentByTagName(o.startContainer,"table");if(r){var a=i.getElementsByTagName(r,"td").concat(i.getElementsByTagName(r,"th"),i.getElementsByTagName(r,"caption"));n.each(a,function(e){e.style.borderColor=t})}}},t.commands.edittd={queryCommandState:function(){return l(this).table?0:-1},execCommand:function(e,t){var o=this,r=d(o);if(r)n.each(r.selectedTds,function(e){e.style.backgroundColor=t});else{var a=o.selection.getStart(),s=a&&i.findParentByTagName(a,["td","th","caption"],!0);s&&(s.style.backgroundColor=t)}}},t.commands.sorttable={queryCommandState:function(){var e=this,t=l(e);if(!t.cell)return-1;for(var n,i=t.table,o=i.getElementsByTagName("td"),r=0;n=o[r++];)if(1!=n.rowSpan||1!=n.colSpan)return-1;return 0},execCommand:function(e,t){var n=this,i=n.selection.getRange(),o=i.createBookmark(!0),r=l(n),a=r.cell,s=u(r.table),d=s.getCellInfo(a);s.sortTable(d.cellIndex,t),i.moveToBookmark(o).select()}},t.commands.enablesort=t.commands.disablesort={queryCommandState:function(){return l(this).table?0:-1},execCommand:function(e){var t=l(this).table;t.setAttribute("data-sort","enablesort"==e?"sortEnabled":"sortDisabled")}},t.commands.settablebackground={queryCommandState:function(){return a(this).length>1?0:-1},execCommand:function(e,t){var n,i;n=a(this),i=u(n[0]),i.setBackground(n,t)}},t.commands.cleartablebackground={queryCommandState:function(){var e=a(this);if(!e.length)return-1;for(var t,n=0;t=e[n++];)if(""!==t.style.backgroundColor)return 0;return-1},execCommand:function(){var e=a(this),t=u(e[0]);t.removeBackground(e)}},t.commands.interlacetable=t.commands.uninterlacetable={queryCommandState:function(e){var t=l(this).table;if(!t)return-1;var n=t.getAttribute("interlaced");return"interlacetable"==e?"enabled"===n?-1:0:n&&"disabled"!==n?0:-1},execCommand:function(e,t){var n=l(this).table;"interlacetable"==e?(n.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",n,t)):(n.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",n))}}}()}),define("ueditor/plugins/table.action",["../editor","../baidu","../dom","../core/utils","../core/browser","../core/domUtils","../core/dtd","../core/Range"],function(e,t,n){var i=e("../editor"),o=e("../dom"),r=e("../core/utils"),a=e("../core/domUtils"),s=e("../core/dtd"),l=e("../core/browser");i.UETable=e("./table.core"),e("../core/Range"),i.plugins.table=function(){function e(){}function t(e){n(e,"width",!0),n(e,"height",!0)}function n(e,t,n){e.style[t]&&(n&&e.setAttribute(t,parseInt(e.style[t],10)),e.style[t]="")}function d(e){if("TD"==e.tagName||"TH"==e.tagName)return e;var t;return(t=a.findParentByTagName(e,"td",!0)||a.findParentByTagName(e,"th",!0))?t:null}function c(e){var t=RegExp(a.fillChar,"g");if(e[l.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length>0)return 0;for(var n in s.$isNotEmpty)if(e.getElementsByTagName(n).length)return 0;return 1}function u(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+V.document.body.scrollLeft-V.document.body.clientLeft,y:e.clientY+V.document.body.scrollTop-V.document.body.clientTop}}function f(t){if(!I())try{var n,i=d(t.target||t.srcElement);if(K&&(V.body.style.webkitUserSelect="none",(Math.abs(Z.x-t.clientX)>J||Math.abs(Z.y-t.clientY)>J)&&(k(),K=!1,Q=0,E(t))),lt&&mt)return Q=0,V.body.style.webkitUserSelect="none",V.selection.getNative()[l.ie?"empty":"removeAllRanges"](),n=u(t),b(V,!0,lt,n,i),"h"==lt?pt.style.left=g(mt,t)+"px":"v"==lt&&(pt.style.top=v(mt,t)+"px"),void 0;if(i){if(V.fireEvent("excludetable",i)===!0)return;n=u(t);var o=y(i,n),r=a.findParentByTagName(i,"table",!0);if(h(r,i,t,!0)){if(V.fireEvent("excludetable",r)===!0)return;V.body.style.cursor="url("+V.options.cursorpath+"h.png),pointer"}else if(h(r,i,t)){if(V.fireEvent("excludetable",r)===!0)return;V.body.style.cursor="url("+V.options.cursorpath+"v.png),pointer"}else V.body.style.cursor="text",/\d/.test(o)&&(o=o.replace(/\d/,""),i=nt(i).getPreviewCell(i,"v"==o)),b(V,i?!!o:!1,i?o:"",n,i)}else p(!1,r,V)}catch(s){e(s)}}function p(e,t,n){if(e)m(t,n);else{if(ft)return;bt=setTimeout(function(){!ft&&ct&&ct.parentNode&&ct.parentNode.removeChild(ct)},2e3)}}function m(e,t){function n(n,i){clearTimeout(s),s=setTimeout(function(){t.fireEvent("tableClicked",e,i)},300)}function i(){clearTimeout(s);var n=nt(e),i=e.rows[0].cells[0],o=n.getLastCell(),r=n.getCellsRange(i,o);t.selection.getRange().setStart(i,0).setCursor(!1,!0),n.setSelected(r)}var o=a.getXY(e),r=e.ownerDocument;if(ct&&ct.parentNode)return ct;ct=r.createElement("div"),ct.contentEditable=!1,ct.innerHTML="",ct.style.cssText="width:15px;height:15px;background-image:url("+t.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(o.y-15)+"px;left:"+o.x+"px;",a.unSelectable(ct),ct.onmouseover=function(){ft=!0},ct.onmouseout=function(){ft=!1},a.on(ct,"click",function(e,t){n(t,this)}),a.on(ct,"dblclick",function(e,t){i(t)}),a.on(ct,"dragstart",function(e,t){a.preventDefault(t)});var s;r.body.appendChild(ct)}function h(e,t,n,i){var o=u(n),r=y(t,o);if(i){var s=e.getElementsByTagName("caption")[0],l=s?s.offsetHeight:0;return"v1"==r&&8>o.y-a.getXY(e).y-l}return"h1"==r&&8>o.x-a.getXY(e).x}function g(e,t){var n=nt(e);if(n){var i=n.getSameEndPosCells(e,"x")[0],o=n.getSameStartPosXCells(e)[0],r=u(t).x,s=(i?a.getXY(i).x:a.getXY(n.table).x)+20,l=o?a.getXY(o).x+o.offsetWidth-20:V.body.offsetWidth+5||parseInt(a.getComputedStyle(V.body,"width"),10);return s+=Y,l-=Y,s>r?s:r>l?l:r}}function v(t,n){try{var i=a.getXY(t).y,o=u(n).y;return i>o?i:o}catch(r){e(r)}}function b(t,n,i,o,r){try{t.body.style.cursor="h"==i?"col-resize":"v"==i?"row-resize":"text",l.ie&&(!i||ht||it(t)?q(t):(F(t,t.document),U(i,r))),dt=n
}catch(a){e(a)}}function y(e,t){var n=a.getXY(e);return n?G>n.x+e.offsetWidth-t.x?"h":G>t.x-n.x?"h1":G>n.y+e.offsetHeight-t.y?"v":G>t.y-n.y?"v1":"":""}function x(e,t){if(!I())if(Z={x:t.clientX,y:t.clientY},2==t.button){var n=it(V),i=!1;if(n){var o=W(V,t);r.each(n.selectedTds,function(e){e===o&&(i=!0)}),i?(o=n.selectedTds[0],setTimeout(function(){V.selection.getRange().setStart(o,0).setCursor(!1,!0)},0)):(rt(a.getElementsByTagName(V.body,"th td")),n.clearSelected())}}else N(t)}function C(e){Q=0,e=e||V.window.event;var t=d(e.target||e.srcElement);if(t){var n;if(n=y(t,u(e))){if(q(V),"h1"==n)if(n="h",h(a.findParentByTagName(t,"table"),t,e))V.execCommand("adaptbywindow");else if(t=nt(t).getPreviewCell(t)){var i=V.selection.getRange();i.selectNodeContents(t).setCursor(!0,!0)}if("h"==n){var o=nt(t),s=o.table,l=D(t,s,!0);l=T(l,"left"),o.width=o.offsetWidth;var c=[],f=[];r.each(l,function(e){c.push(e.offsetWidth)}),r.each(l,function(e){e.removeAttribute("width")}),window.setTimeout(function(){var e=!0;r.each(l,function(t,n){var i=t.offsetWidth;return i>c[n]?(e=!1,!1):(f.push(i),void 0)});var t=e?f:c;r.each(l,function(e,n){e.width=t[n]-P()})},0)}}}}function N(e){if(rt(a.getElementsByTagName(V.body,"td th")),r.each(V.document.getElementsByTagName("table"),function(e){e.ueTable=null}),at=W(V,e)){var t=a.findParentByTagName(at,"table",!0);ut=nt(t),ut&&ut.clearSelected(),dt?w(e):(V.document.body.style.webkitUserSelect="",ht=!0,V.addListener("mouseover",_))}}function w(e){l.ie&&(e=S(e)),k(),K=!0,z=setTimeout(function(){E(e)},et)}function T(e,t){for(var n=[],i=null,o=0,r=e.length;r>o;o++)i=e[o][t],i&&n.push(i);return n}function k(){z&&clearTimeout(z),z=null}function S(e){var t=["pageX","pageY","clientX","clientY","srcElement","target"],n={};if(e)for(var i,o,r=0;i=t[r];r++)o=e[i],o&&(n[i]=o);return n}function E(e){if(K=!1,at){var t=Math.abs(Z.x-e.clientX)>=Math.abs(Z.y-e.clientY)?"h":"v";/\d/.test(t)&&(t=t.replace(/\d/,""),at=nt(at).getPreviewCell(at,"v"==t)),q(V),F(V,V.document),V.fireEvent("saveScene"),U(t,at),ht=!0,lt=t,mt=at}}function B(e,t){if(!I()){if(k(),K=!1,dt&&(Q=++Q%3,Z={x:t.clientX,y:t.clientY},X=setTimeout(function(){Q>0&&Q--},et),2===Q))return Q=0,C(t),void 0;if(2!=t.button){var n=this,i=n.selection.getRange(),r=a.findParentByTagName(i.startContainer,"table",!0),s=a.findParentByTagName(i.endContainer,"table",!0);if((r||s)&&(r===s?(r=a.findParentByTagName(i.startContainer,["td","th","caption"],!0),s=a.findParentByTagName(i.endContainer,["td","th","caption"],!0),r!==s&&n.selection.clearRange()):n.selection.clearRange()),ht=!1,n.document.body.style.webkitUserSelect="",lt&&mt){n.selection.getNative()[l.ie?"empty":"removeAllRanges"](),Q=0,pt=n.document.getElementById("ue_tableDragLine");var d=a.getXY(mt),c=a.getXY(pt);switch(lt){case"h":A(mt,c.x-d.x);break;case"v":R(mt,c.y-d.y-mt.offsetHeight);break;default:}return lt="",mt=null,q(n),n.fireEvent("saveScene"),void 0}if(at){var u=nt(at),f=u?u.selectedTds[0]:null;if(f)i=new o.Range(n.document),a.isEmptyBlock(f)?i.setStart(f,0).setCursor(!1,!0):i.selectNodeContents(f).shrinkBoundary().setCursor(!1,!0);else if(i=n.selection.getRange().shrinkBoundary(),!i.collapsed){var r=a.findParentByTagName(i.startContainer,["td","th"],!0),s=a.findParentByTagName(i.endContainer,["td","th"],!0);(r&&!s||!r&&s||r&&s&&r!==s)&&i.setCursor(!1,!0)}at=null,n.removeListener("mouseover",_)}else{var p=a.findParentByTagName(t.target||t.srcElement,"td",!0);if(p||(p=a.findParentByTagName(t.target||t.srcElement,"th",!0)),p&&("TD"==p.tagName||"TH"==p.tagName)){if(n.fireEvent("excludetable",p)===!0)return;i=new o.Range(n.document),i.setStart(p,0).setCursor(!1,!0)}}n._selectionChange(250,t)}}}function _(e,t){if(!I()){var n=this,i=t.target||t.srcElement;if(st=a.findParentByTagName(i,"td",!0)||a.findParentByTagName(i,"th",!0),at&&st&&("TD"==at.tagName&&"TD"==st.tagName||"TH"==at.tagName&&"TH"==st.tagName)&&a.findParentByTagName(at,"table")==a.findParentByTagName(st,"table")){var o=nt(st);if(at!=st){n.document.body.style.webkitUserSelect="none",n.selection.getNative()[l.ie?"empty":"removeAllRanges"]();var r=o.getCellsRange(at,st);o.setSelected(r)}else n.document.body.style.webkitUserSelect="",o.clearSelected()}t.preventDefault?t.preventDefault():t.returnValue=!1}}function L(e,t,n){var i=parseInt(a.getComputedStyle(e,"line-height"),10),o=n+t;t=i>o?i:o,e.style.height&&(e.style.height=""),1==e.rowSpan?e.setAttribute("height",t):e.removeAttribute&&e.removeAttribute("height")}function A(e,t){var n=nt(e);if(n){var i=n.table,o=D(e,i);i.style.width="",i.removeAttribute("width"),t=M(t,e,o),e.nextSibling?r.each(o,function(e){e.left.width=+e.left.width+t,e.right&&(e.right.width=+e.right.width-t)}):r.each(o,function(e){e.left.width-=-t})}}function I(){return"false"===V.body.contentEditable}function R(e,t){if(!(10>Math.abs(t))){var n=nt(e);if(n)for(var i,o=n.getSameEndPosCells(e,"y"),r=o[0]?o[0].offsetHeight:0,a=0;i=o[a++];)L(i,t,r)}}function D(e,t,n){if(t||(t=a.findParentByTagName(e,"table")),!t)return null;for(var i=(a.getNodeIndex(e),e),o=t.rows,s=0;i;)1===i.nodeType&&(s+=i.colSpan||1),i=i.previousSibling;i=null;var l=[];return r.each(o,function(e){var t=e.cells,i=0;r.each(t,function(e){return i+=e.colSpan||1,i===s?(l.push({left:e,right:e.nextSibling||null}),!1):i>s?(n&&l.push({left:e}),!1):void 0})}),l}function M(e,t,n){if(e-=P(),0>e)return 0;e-=H(t);var i=0>e?"left":"right";return e=Math.abs(e),r.each(n,function(t){var n=t[i];n&&(e=Math.min(e,H(n)-Y))}),e=0>e?0:e,"left"===i?-e:e}function H(e){var t=0,t=e.offsetWidth-P();e.nextSibling||(t-=O(e)),t=0>t?0:t;try{e.width=t}catch(n){}return t}function O(e){if(tab=a.findParentByTagName(e,"table",!1),void 0===tab.offsetVal){var t=e.previousSibling;tab.offsetVal=t?e.offsetWidth-t.offsetWidth===tt.borderWidth?tt.borderWidth:0:0}return tab.offsetVal}function P(){if(void 0===tt.tabcellSpace){var e=V.document.createElement("table"),t=V.document.createElement("tbody"),n=V.document.createElement("tr"),i=V.document.createElement("td"),o=null;i.style.cssText="border: 0;",i.width=1,n.appendChild(i),n.appendChild(o=i.cloneNode(!1)),t.appendChild(n),e.appendChild(t),e.style.cssText="visibility: hidden;",V.body.appendChild(e),tt.paddingSpace=i.offsetWidth-1;var r=e.offsetWidth;i.style.cssText="",o.style.cssText="",tt.borderWidth=(e.offsetWidth-r)/3,tt.tabcellSpace=tt.paddingSpace+tt.borderWidth,V.body.removeChild(e)}return P=function(){return tt.tabcellSpace},tt.tabcellSpace}function F(e){ht||(pt=e.document.createElement("div"),a.setAttributes(pt,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),e.body.appendChild(pt))}function q(e){if(!ht)for(var t;t=e.document.getElementById("ue_tableDragLine");)a.remove(t)}function U(e,t){if(t){var n,i=a.findParentByTagName(t,"table"),o=i.getElementsByTagName("caption"),r=i.offsetWidth,s=i.offsetHeight-(o.length>0?o[0].offsetHeight:0),l=a.getXY(i),d=a.getXY(t);switch(e){case"h":n="height:"+s+"px;top:"+(l.y+(o.length>0?o[0].offsetHeight:0))+"px;left:"+(d.x+t.offsetWidth),pt.style.cssText=n+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":n="width:"+r+"px;left:"+l.x+"px;top:"+(d.y+t.offsetHeight),pt.style.cssText=n+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)";break;default:}}}function $(e,t){for(var n,i,o=a.getElementsByTagName(e.body,"table"),r=0;i=o[r++];){var s=a.getElementsByTagName(i,"td");s[0]&&(t?(n=s[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,f55,255\))/gi.test(n)&&a.addClass(i,"noBorderTable")):a.removeClasses(i,"noBorderTable"))}}function j(e,t,n){var i=e.body;return i.offsetWidth-(t?2*parseInt(a.getComputedStyle(i,"margin-left"),10):0)-2*n.tableBorder-(e.options.offsetWidth||0)}function W(e,t){var n=a.findParentByTagName(t.target||t.srcElement,["td","th"],!0),i=null;if(!n)return null;if(i=y(n,u(t)),!n)return null;if("h1"===i&&n.previousSibling){var o=a.getXY(n),r=n.offsetWidth;Math.abs(o.x+r-t.clientX)>r/3&&(n=n.previousSibling)}else if("v1"===i&&n.parentNode.previousSibling){var o=a.getXY(n),s=n.offsetHeight;Math.abs(o.y+s-t.clientY)>s/3&&(n=n.parentNode.previousSibling.firstChild)}return n&&e.fireEvent("excludetable",n)!==!0?n:null}var V=this,z=null,X=null,Y=5,K=!1,G=5,J=10,Q=0,Z=null,et=360,tt=i.UETable,nt=function(e){return tt.getUETable(e)},it=function(e){return tt.getUETableBySelected(e)},ot=function(e,t){return tt.getDefaultValue(e,t)},rt=function(e){return tt.removeSelectedClass(e)};V.ready(function(){var e=this,t=e.selection.getText;e.selection.getText=function(){var n=it(e);if(n){var i="";return r.each(n.selectedTds,function(e){i+=e[l.ie?"innerText":"textContent"]}),i}return t.call(e.selection)}});var at=null,st=null,lt="",dt=!1,ct=null,ft=!1,pt=null,mt=null,ht=!1,gt=!0;V.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:V.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]}),V.getUETable=nt;var vt={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};V.ready(function(){r.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:2px solid #BBB;background:#F7F7F7;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",V.document);var e,n,s;V.addListener("keydown",function(t,i){var o=this,r=i.keyCode||i.which;if(8==r){var l=it(o);l&&l.selectedTds.length&&(l.isFullCol()?o.execCommand("deletecol"):l.isFullRow()?o.execCommand("deleterow"):o.fireEvent("delcells"),a.preventDefault(i));var d=a.findParentByTagName(o.selection.getStart(),"caption",!0),u=o.selection.getRange();if(u.collapsed&&d&&c(d)){o.fireEvent("saveScene");var f=d.parentNode;a.remove(d),f&&u.setStart(f.rows[0].cells[0],0).setCursor(!1,!0),o.fireEvent("saveScene")}}if(46==r&&(l=it(o))){o.fireEvent("saveScene");for(var p,m=0;p=l.selectedTds[m++];)a.fillNode(o.document,p);o.fireEvent("saveScene"),a.preventDefault(i)}if(13==r){var h=o.selection.getRange(),d=a.findParentByTagName(h.startContainer,"caption",!0);if(d){var f=a.findParentByTagName(d,"table");return h.collapsed?d&&h.setStart(f.rows[0].cells[0],0).setCursor(!1,!0):(h.deleteContents(),o.fireEvent("saveScene")),a.preventDefault(i),void 0}if(h.collapsed){var f=a.findParentByTagName(h.startContainer,"table");if(f){var g=f.rows[0].cells[0],v=a.findParentByTagName(o.selection.getStart(),["td","th"],!0),b=f.previousSibling;if(g===v&&(!b||1==b.nodeType&&"TABLE"==b.tagName)&&a.isStartInblock(h)){var y=a.findParent(o.selection.getStart(),function(e){return a.isBlockElm(e)},!0);y&&(/t(h|d)/i.test(y.tagName)||y===v.firstChild)&&(o.execCommand("insertparagraphbeforetable"),a.preventDefault(i))}}}}if((i.ctrlKey||i.metaKey)&&"67"==i.keyCode){e=null;var l=it(o);if(l){var x=l.selectedTds;n=l.isFullCol(),s=l.isFullRow(),e=[[l.cloneCell(x[0],null,!0)]];for(var p,m=1;p=x[m];m++)p.parentNode!==x[m-1].parentNode?e.push([l.cloneCell(p,null,!0)]):e[e.length-1].push(l.cloneCell(p,null,!0))}}}),V.addListener("tablehasdeleted",function(){b(this,!1,"",null),ct&&a.remove(ct)}),V.addListener("beforepaste",function(i,o){var d=this,u=d.selection.getRange();if(a.findParentByTagName(u.startContainer,"caption",!0)){var f=d.document.createElement("div");return f.innerHTML=o.html,o.html=f[l.ie?"innerText":"textContent"],void 0}var p=it(d);if(e){d.fireEvent("saveScene");var m,h,u=d.selection.getRange(),g=a.findParentByTagName(u.startContainer,["td","th"],!0);if(g){var v=nt(g);if(s){var b=v.getCellInfo(g).rowIndex;"TH"==g.tagName&&b++;for(var y,x=0;y=e[x++];){for(var C,N=v.insertRow(b++,"td"),w=0;C=y[w];w++){var T=N.cells[w];T||(T=N.insertCell(w)),T.innerHTML=C.innerHTML,C.getAttribute("width")&&T.setAttribute("width",C.getAttribute("width")),C.getAttribute("vAlign")&&T.setAttribute("vAlign",C.getAttribute("vAlign")),C.getAttribute("align")&&T.setAttribute("align",C.getAttribute("align")),C.style.cssText&&(T.style.cssText=C.style.cssText)}for(var C,w=0;(C=N.cells[w])&&y[w];w++)C.innerHTML=y[w].innerHTML,y[w].getAttribute("width")&&C.setAttribute("width",y[w].getAttribute("width")),y[w].getAttribute("vAlign")&&C.setAttribute("vAlign",y[w].getAttribute("vAlign")),y[w].getAttribute("align")&&C.setAttribute("align",y[w].getAttribute("align")),y[w].style.cssText&&(C.style.cssText=y[w].style.cssText)}}else{if(n){E=v.getCellInfo(g);for(var C,k=0,w=0,y=e[0];C=y[w++];)k+=C.colSpan||1;for(d.__hasEnterExecCommand=!0,x=0;k>x;x++)d.execCommand("insertcol");d.__hasEnterExecCommand=!1,g=v.table.rows[0].cells[E.cellIndex],"TH"==g.tagName&&(g=v.table.rows[1].cells[E.cellIndex])}for(var y,x=0;y=e[x++];){m=g;for(var C,w=0;C=y[w++];)if(g)g.innerHTML=C.innerHTML,C.getAttribute("width")&&g.setAttribute("width",C.getAttribute("width")),C.getAttribute("vAlign")&&g.setAttribute("vAlign",C.getAttribute("vAlign")),C.getAttribute("align")&&g.setAttribute("align",C.getAttribute("align")),C.style.cssText&&(g.style.cssText=C.style.cssText),h=g,g=g.nextSibling;else{var S=C.cloneNode(!0);a.removeAttributes(S,["class","rowSpan","colSpan"]),h.parentNode.appendChild(S)}if(g=v.getNextCell(m,!0,!0),!e[x])break;if(!g){var E=v.getCellInfo(m);v.table.insertRow(v.table.rows.length),v.update(),g=v.getVSideCell(m,!0)}}}v.update()}else{p=d.document.createElement("table");for(var y,x=0;y=e[x++];){for(var C,N=p.insertRow(p.rows.length),w=0;C=y[w++];)S=tt.cloneCell(C,null,!0),a.removeAttributes(S,["class"]),N.appendChild(S);2==w&&S.rowSpan>1&&(S.rowSpan=1)}var B=ot(d),_=d.body.offsetWidth-(gt?2*parseInt(a.getComputedStyle(d.body,"margin-left"),10):0)-2*B.tableBorder-(d.options.offsetWidth||0);d.execCommand("insertHTML","<table  "+(n&&s?'width="'+_+'"':"")+">"+p.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}return d.fireEvent("contentchange"),d.fireEvent("saveScene"),o.html="",!0}var L,f=d.document.createElement("div");f.innerHTML=o.html,L=f.getElementsByTagName("table"),a.findParentByTagName(d.selection.getStart(),"table")?(r.each(L,function(e){a.remove(e)}),a.findParentByTagName(d.selection.getStart(),"caption",!0)&&(f.innerHTML=f[l.ie?"innerText":"textContent"])):r.each(L,function(e){t(e,!0),a.removeAttributes(e,["style","border"]),r.each(a.getElementsByTagName(e,"td"),function(e){c(e)&&a.fillNode(d.document,e),t(e,!0)})}),o.html=f.innerHTML}),V.addListener("afterpaste",function(){r.each(a.getElementsByTagName(V.body,"table"),function(e){if(e.offsetWidth>V.body.offsetWidth){var t=ot(V,e);e.style.width=V.body.offsetWidth-(gt?2*parseInt(a.getComputedStyle(V.body,"margin-left"),10):0)-2*t.tableBorder-(V.options.offsetWidth||0)+"px"}})}),V.addListener("blur",function(){e=null});var u;V.addListener("keydown",function(){clearTimeout(u),u=setTimeout(function(){var e=V.selection.getRange(),t=a.findParentByTagName(e.startContainer,["th","td"],!0);if(t){var n=t.parentNode.parentNode.parentNode;n.offsetWidth>n.getAttribute("width")&&(t.style.wordBreak="break-all")}},100)}),V.addListener("selectionchange",function(){b(V,!1,"",null)}),V.addListener("contentchange",function(){var e=this;if(q(e),!it(e)){var t=e.selection.getRange(),n=t.startContainer;n=a.findParentByTagName(n,["td","th"],!0),r.each(a.getElementsByTagName(e.document,"table"),function(t){e.fireEvent("excludetable",t)!==!0&&(t.ueTable=new tt(t),r.each(a.getElementsByTagName(e.document,"td"),function(t){a.isEmptyBlock(t)&&t!==n&&(a.fillNode(e.document,t),l.ie&&6==l.version&&(t.innerHTML="&nbsp;"))}),r.each(a.getElementsByTagName(e.document,"th"),function(t){a.isEmptyBlock(t)&&t!==n&&(a.fillNode(e.document,t),l.ie&&6==l.version&&(t.innerHTML="&nbsp;"))}),t.onmouseover=function(){e.fireEvent("tablemouseover",t)},t.onmousemove=function(){e.fireEvent("tablemousemove",t),e.options.tableDragable&&p(!0,this,e)},t.onmouseout=function(){e.fireEvent("tablemouseout",t),b(e,!1,"",null),q(e)},t.onclick=function(t){t=e.window.event||t;var n=d(t.target||t.srcElement);if(n){var i,o=nt(n),r=o.table,a=o.getCellInfo(n),s=e.selection.getRange();if(h(r,n,t,!0)){var l=o.getCell(o.indexTable[o.rowsNum-1][a.colIndex].rowIndex,o.indexTable[o.rowsNum-1][a.colIndex].cellIndex);return t.shiftKey&&o.selectedTds.length?o.selectedTds[0]!==l?(i=o.getCellsRange(o.selectedTds[0],l),o.setSelected(i)):s&&s.selectNodeContents(l).select():n!==l?(i=o.getCellsRange(n,l),o.setSelected(i)):s&&s.selectNodeContents(l).select(),void 0}if(h(r,n,t)){var c=o.getCell(o.indexTable[a.rowIndex][o.colsNum-1].rowIndex,o.indexTable[a.rowIndex][o.colsNum-1].cellIndex);t.shiftKey&&o.selectedTds.length?o.selectedTds[0]!==c?(i=o.getCellsRange(o.selectedTds[0],c),o.setSelected(i)):s&&s.selectNodeContents(c).select():n!==c?(i=o.getCellsRange(n,c),o.setSelected(i)):s&&s.selectNodeContents(c).select()}}})}),$(e,!0)}}),a.on(V.document,"mousemove",f),a.on(V.document,"mouseout",function(e){var t=e.target||e.srcElement;"TABLE"==t.tagName&&b(V,!1,"",null)}),V.addListener("interlacetable",function(e,t,n){if(t)for(var i=this,o=t.rows,r=o.length,a=function(e,t,n){return e[t]?e[t]:n?e[t%e.length]:""},s=0;r>s;s++)o[s].className=a(n||i.options.classList,s,!0)}),V.addListener("uninterlacetable",function(e,t){if(t)for(var n=this,i=t.rows,o=n.options.classList,r=i.length,s=0;r>s;s++)a.removeClasses(i[s],o)}),V.addListener("mousedown",x),V.addListener("mouseup",B),a.on(V.body,"dragstart",function(e){B.call(V,"dragstart",e)});var m=0;V.addListener("mousedown",function(){m=0}),V.addListener("tabkeydown",function(){var e=this.selection.getRange(),t=e.getCommonAncestor(!0,!0),n=a.findParentByTagName(t,"table");if(n){if(a.findParentByTagName(t,"caption",!0)){var i=a.getElementsByTagName(n,"th td");i&&i.length&&e.setStart(i[0],0).setCursor(!1,!0)}else{var i=a.findParentByTagName(t,["td","th"],!0),o=nt(i);m=i.rowSpan>1?m:o.getCellInfo(i).rowIndex;var r=o.getTabNextCell(i,m);r?c(r)?e.setStart(r,0).setCursor(!1,!0):e.selectNodeContents(r).select():(V.fireEvent("saveScene"),V.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),V.__hasEnterExecCommand=!1,e=this.selection.getRange(),e.setStart(n.rows[n.rows.length-1].cells[0],0).setCursor(),V.fireEvent("saveScene"))}return!0}}),l.ie&&V.addListener("selectionchange",function(){b(this,!1,"",null)}),V.addListener("keydown",function(e,t){var n=this,i=t.keyCode||t.which;if(8!=i&&46!=i){var o=!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey);o&&rt(a.getElementsByTagName(n.body,"td"));var r=it(n);r&&o&&r.clearSelected()}}),V.addListener("beforegetcontent",function(){$(this,!1),l.ie&&r.each(this.document.getElementsByTagName("caption"),function(e){a.isEmptyNode(e)&&(e.innerHTML="&nbsp;")})}),V.addListener("aftergetcontent",function(){$(this,!0)}),V.addListener("getAllHtml",function(){rt(V.document.getElementsByTagName("td"))}),V.addListener("fullscreenchanged",function(e,t){if(!t){var n=this.body.offsetWidth/document.body.offsetWidth,i=a.getElementsByTagName(this.body,"table");r.each(i,function(e){if(e.offsetWidth<V.body.offsetWidth)return!1;var t=a.getElementsByTagName(e,"td"),i=[];r.each(t,function(e){i.push(e.offsetWidth)});for(var o,s=0;o=t[s];s++)o.setAttribute("width",Math.floor(i[s]*n));e.setAttribute("width",Math.floor(j(V,gt,ot(V))))})}});var g=V.execCommand;V.execCommand=function(e){var t=this;e=e.toLowerCase();var n,r,s=it(t),l=new o.Range(t.document),d=t.commands[e]||i.commands[e];if(d){if(!s||vt[e]||d.notNeedUndo||t.__hasEnterExecCommand)r=g.apply(t,arguments);else{t.__hasEnterExecCommand=!0,t.fireEvent("beforeexeccommand",e),n=s.selectedTds;for(var u,f,p,m=-2,h=-2,v=0;p=n[v];v++)c(p)?l.setStart(p,0).setCursor(!1,!0):l.selectNode(p).select(!0),f=t.queryCommandState(e),u=t.queryCommandValue(e),-1!=f&&((m!==f||h!==u)&&(t._ignoreContentChange=!0,r=g.apply(t,arguments),t._ignoreContentChange=!1),m=t.queryCommandState(e),h=t.queryCommandValue(e),a.isEmptyBlock(p)&&a.fillNode(t.document,p));l.setStart(n[0],0).shrinkBoundary(!0).setCursor(!1,!0),t.fireEvent("contentchange"),t.fireEvent("afterexeccommand",e),t.__hasEnterExecCommand=!1,t._selectionChange()}return r}}});var bt},n.exports=i.plugins.table}),define("ueditor/plugins/wordcount",["../editor","../baidu","../core/domUtils","../dom","../core/utils","../core/browser","../core/dtd"],function(e,t,n){var i=e("../editor"),o=e("../core/domUtils");i.plugins.wordcount=function(){var e=this;e.addListener("contentchange",function(){e.fireEvent("wordcount")});var t;e.addListener("ready",function(){var e=this;o.on(e.body,"keyup",function(n){var i=n.keyCode||n.which,o={16:1,18:1,20:1,37:1,38:1,39:1,40:1};i in o||(clearTimeout(t),t=setTimeout(function(){e.fireEvent("wordcount")},200))})})},n.exports=i.plugins.wordcount}),define("ueditor/plugin",["./editor","./baidu","./ui/editorui","./core/utils","./core/browser","./ui/ui","./ui/dialog","./core/domUtils","./dom","./core/dtd","./ui/uiutils","./ui/mask","./ui/uibase","./core/EventBase","./ui/button","./ui/stateful"],function(e,t,n){var i=e("./editor"),o=e("./ui/editorui"),r=e("./ui/dialog");i.addPlugin=function(e){if(!i.commands[e.name]){var t,n=!0,a=function(){var t;return function(){return t||(t=new r({title:e.dialog.title||e.descrition||"",content:e.dialog.content||"",editor:this})),t}}();o.addButton(e.name,e.description),i.commands[e.name]={execCommand:function(i){e.dialog&&(t=a.call(this)),e.execCommand&&e.execCommand.call(this,i,t),n&&e.init&&e.init.call(this,t,e)},queryCommandState:function(n){return e.queryCommandState&&e.queryCommandState.call(this,n,t)}}}},n.exports=i.addPlugin}),define("ueditor/myplugins/links/plugin",["$","../../plugin","../../editor","../../baidu","../../ui/editorui","../../core/utils","../../core/browser","../../ui/ui","../../ui/dialog","../../core/domUtils","../../dom","../../core/dtd","../../ui/uiutils","../../ui/mask","../../ui/uibase","../../core/EventBase","../../ui/button","../../ui/stateful","./tpl/content"],function(e){var t=e("$"),n=e("../../plugin"),i=e("./tpl/content");n({name:"links",description:"插入连接",dialog:{content:i.render()},execCommand:function(e,n){n.open();var i=t(n.getDom()),o=this;i.find("[data-action=UEPluginLinksBtn]").click(function(){var e=i.find("[data-role=href]").eq(0),r=i.find("[data-role=text]").eq(0),a=t.trim(e.val()),s=t.trim(r.val()),l=t.trim(i.find("[data-role=title]").eq(0).val());a&&o.execCommand("link",{href:/\/\//.test(a)?a:"http://"+a,textValue:s||a,title:l||""}),n.close()})}})}),define("ueditor/myplugins/links/tpl/content",[],function(){return{render:function(e){var t=[],n=[];for(var i in e)t.push(i),n.push(e[i]);return Function(t,'var _s=[];_s.push(\' <form class="form-horizontal ue-plugin-links"> <div class="control-group"> <label class="control-label">文本内容：</label> <div class="controls"> <input type="text" class="input-xlarge" data-role="text"/> </div> </div> <div class="control-group"> <label class="control-label">链接地址：</label> <div class="controls"> <input type="text" class="input-xlarge" data-role="href"/> </div> </div> <div class="control-group"> <label class="control-label">标题：</label> <div class="controls"> <input type="text" class="input-xlarge" data-role="title"/> </div> </div> <div class="control-group"> <div class="controls"> <button type="button" class="btn" data-action="UEPluginLinksBtn">确定</button> </div> </div> </form>\'); return _s;').apply(null,n).join("")}}}),define("ueditor/lang/zh-cn/zh-cn",["../../editor","../../baidu"],function(e,t,n){var i=e("../../editor");i.I18N["zh-cn"]={labelMap:{anchor:"锚点",undo:"撤销",redo:"重做",bold:"加粗",indent:"首行缩进",snapscreen:"截图",italic:"斜体",underline:"下划线",strikethrough:"删除线",subscript:"下标",fontborder:"字符边框",superscript:"上标",formatmatch:"格式刷",source:"源代码",blockquote:"引用",pasteplain:"纯文本粘贴模式",selectall:"全选",print:"打印",preview:"预览",horizontal:"分隔线",removeformat:"清除格式",time:"时间",date:"日期",unlink:"取消链接",insertrow:"前插入行",insertcol:"前插入列",mergeright:"右合并单元格",mergedown:"下合并单元格",deleterow:"删除行",deletecol:"删除列",splittorows:"拆分成行",splittocols:"拆分成列",splittocells:"完全拆分单元格",mergecells:"合并多个单元格",deletetable:"删除表格",cleardoc:"清空文档",insertparagraphbeforetable:"表格前插入行",insertcode:"代码语言",fontfamily:"字体",fontsize:"字号",paragraph:"段落格式",insertimage:"图片",edittable:"表格属性",edittd:"单元格属性",link:"超链接",emotion:"表情",spechars:"特殊字符",searchreplace:"查询替换",map:"Baidu地图",gmap:"Google地图",insertvideo:"视频",help:"帮助",justifyleft:"居左对齐",justifyright:"居右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",forecolor:"字体颜色",backcolor:"背景色",insertorderedlist:"有序列表",insertunorderedlist:"无序列表",fullscreen:"全屏",directionalityltr:"从左向右输入",directionalityrtl:"从右向左输入",rowspacingtop:"段前距",rowspacingbottom:"段后距",highlightcode:"插入代码",pagebreak:"分页",insertframe:"插入Iframe",imagenone:"默认",imageleft:"左浮动",imageright:"右浮动",attachment:"附件",imagecenter:"居中",wordimage:"图片转存",lineheight:"行间距",edittip:"编辑提示",customstyle:"自定义标题",autotypeset:"自动排版",webapp:"百度应用",touppercase:"字母大写",tolowercase:"字母小写",background:"背景",template:"模板",scrawl:"涂鸦",music:"音乐",inserttable:"插入表格"},insertorderedlist:{num:"1,2,3...",num1:"1),2),3)...",num2:"(1),(2),(3)...",cn:"一,二,三....",cn1:"一),二),三)....",cn2:"(一),(二),(三)....",decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"○ 大圆圈",disc:"● 小黑点",square:"■ 小方块 ",dash:"— 破折号",dot:" 。 小圆圈"},paragraph:{p:"段落",h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",h5:"标题 5",h6:"标题 6"},fontfamily:{songti:"宋体",kaiti:"楷体",heiti:"黑体",lishu:"隶书",yahei:"微软雅黑",andaleMono:"andale mono",arial:"arial",arialBlack:"arial black",comicSansMs:"comic sans ms",impact:"impact",timesNewRoman:"times new roman"},insertcode:{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"},customstyle:{tc:"标题居中",tl:"标题居左",im:"强调",hi:"明显强调"},elementPathTip:"元素路径",wordCountTip:"字数统计",wordCountMsg:"当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ",wordOverFlowMsg:'<span style="color:red;">字数超出最大允许值，服务器可能拒绝保存！</span>',ok:"确认",cancel:"取消",closeDialog:"关闭对话框",tableDrag:"表格拖动必须引入uiUtils.js文件！",autofloatMsg:"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",snapScreen_plugin:{browserMsg:"仅支持IE浏览器！",callBackErrorMsg:"服务器返回数据有误，请检查配置项之后重试。",uploadErrorMsg:"截图上传失败，请检查服务器端环境! "},confirmClear:"确定清空当前文档么？",contextMenu:{"delete":"删除",selectall:"全选",deletecode:"删除代码",cleardoc:"清空文档",confirmclear:"确定清空当前文档么？",unlink:"删除超链接",paragraph:"段落格式",edittable:"表格属性",aligntd:"单元格对齐方式",aligntable:"表格对齐方式",tableleft:"左浮动",tablecenter:"居中显示",tableright:"右浮动",edittd:"单元格属性",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",table:"表格",inserttable:"插入表格",deletetable:"删除表格",insertparagraphbefore:"前插入段落",insertparagraphafter:"后插入段落",deleterow:"删除当前行",deletecol:"删除当前列",insertrow:"前插入行",insertcol:"左插入列",insertrownext:"后插入行",insertcolnext:"右插入列",insertcaption:"插入表格名称",deletecaption:"删除表格名称",inserttitle:"插入表格标题行",deletetitle:"删除表格标题行",averageDiseRow:"平均分布各行",averageDisCol:"平均分布各列",mergeright:"向右合并",mergeleft:"向左合并",mergedown:"向下合并",mergecells:"合并单元格",splittocells:"完全拆分单元格",splittocols:"拆分成列",splittorows:"拆分成行",tablesort:"表格排序",reversecurrent:"逆序当前",orderbyasc:"按ASCII字符升序",reversebyasc:"按ASCII字符降序",orderbynum:"按数值大小升序",reversebynum:"按数值大小降序",borderbk:"边框底纹",setcolor:"表格隔行变色",unsetcolor:"取消表格隔行变色",setbackground:"选区背景隔行",unsetbackground:"取消选区背景",redandblue:"红蓝相间",threecolorgradient:"三色渐变",copy:"复制(Ctrl + c)",copymsg:"请使用 'Ctrl + c'执行复制操作",paste:"粘贴(Ctrl + v)",pastemsg:"请使用 'Ctrl + v'执行复制操作",highlightcode:"插入代码"},anthorMsg:"链接",clearColor:"清空颜色",standardColor:"标准颜色",themeColor:"主题颜色",property:"属性","default":"默认",modify:"修改",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中",justify:"默认",clear:"清除",anchorMsg:"锚点","delete":"删除",clickToUpload:"点击上传",unset:"尚未设置语言文件",t_row:"行",t_col:"列",more:"更多",pasteOpt:"粘贴选项",pasteSourceFormat:"保留源格式",tagFormat:"只保留标签",pasteTextFormat:"只保留文本",autoTypeSet:{mergeLine:"合并空行",delLine:"清除空行",removeFormat:"清除格式",indent:"首行缩进",alignment:"对齐方式",imageFloat:"图片浮动",removeFontsize:"清除字号",removeFontFamily:"清除字体",removeHtml:"清除冗余HTML代码",pasteFilter:"粘贴过滤",run:"执行"},background:{"static":{lang_background_normal:"背景设置",lang_background_local:"本地图片",lang_background_set:"选项",lang_background_none:"无",lang_background_color:"颜色设置",lang_background_netimg:"网络图片",lang_background_align:"对齐方式",lang_background_position:"精确定位",repeatType:{options:["居中","横向重复","纵向重复","平铺","自定义"]}},noUploadImage:"当前未上传过任何图片！",toggleSelect:"单击可切换选中状态\n原图尺寸: "},insertimage:{"static":{lang_tab_remote:"远程图片",lang_tab_local:"本地上传",lang_tab_imgManager:"在线管理",lang_tab_imgSearch:"图片搜索",lang_input_url:"地 址：",lang_input_width:"宽 度：",lang_input_height:"高 度：",lang_input_border:"边 框：",lang_input_vhspace:"边 距：",lang_input_title:"描 述：",lang_input_remoteAlign:"对 齐：",lang_imgLoading:"　图片加载中……",lock:{title:"锁定宽高比例"},imgType:{title:"图片类型",options:["新闻","壁纸","表情","头像"]},imgSearchTxt:{value:"请输入搜索关键词"},imgSearchBtn:{value:"百度一下"},imgSearchReset:{value:"清空搜索"},upload:{style:"background: url(upload.png);"},duiqi:{style:"background: url(imglabel.png) -12px 2px no-repeat;"},lang_savePath:"选择保存目录"},netError:"网络链接错误，请检查配置后重试！",noUploadImage:"当前未上传过任何图片！",imageLoading:"图片加载中，请稍后……",tryAgain:" :( ，抱歉，没有找到图片！请重试一次！",toggleSelect:"单击可切换选中状态\n原图尺寸: ",searchInitInfo:"请输入搜索关键词",numError:"请输入正确的长度或者宽度值！例如：123，400",fileType:"图片",imageUrlError:"不允许的图片格式或者图片域！",imageLoadError:"图片加载失败！请检查链接地址或网络状态！",flashError:"Flash插件初始化失败，请更新您的FlashPlayer版本之后重试！",floatDefault:"默认",floatLeft:"左浮动",floatRight:"右浮动",floatCenter:"居中",flashI18n:{}},webapp:{tip1:"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",tip2:"申请完成之后请至ueditor.config.js中配置获得的appkey! ",applyFor:"点此申请",anthorApi:"百度API"},template:{"static":{lang_template_bkcolor:"背景颜色",lang_template_clear:"保留原有内容",lang_template_select:"选择模板"},blank:"空白文档",blog:"博客文章",resume:"个人简历",richText:"图文混排",sciPapers:"科技论文"},scrawl:{"static":{lang_input_previousStep:"上一步",lang_input_nextsStep:"下一步",lang_input_clear:"清空",lang_input_addPic:"添加背景",lang_input_ScalePic:"缩放背景",lang_input_removePic:"删除背景",J_imgTxt:{title:"添加背景图片"}},noScarwl:"尚未作画，白纸一张~",scrawlUpLoading:"涂鸦上传中,别急哦~",continueBtn:"继续",imageError:"糟糕，图片读取失败了！",backgroundUploading:"背景图片上传中,别急哦~"},music:{"static":{lang_input_tips:"输入歌手/歌曲/专辑，搜索您感兴趣的音乐！",J_searchBtn:{value:"搜索歌曲"}},emptyTxt:"未搜索到相关音乐结果，请换一个关键词试试。",chapter:"歌曲",singer:"歌手",special:"专辑",listenTest:"试听"},anchor:{"static":{lang_input_anchorName:"锚点名字："}},attachment:{"static":{lang_input_fileStatus:" 当前未上传文件",startUpload:{style:"background:url(upload.png) no-repeat;"}},browseFiles:"文件浏览…",uploadSuccess:"上传成功!",delSuccessFile:"从成功队列中移除",delFailSaveFile:"移除保存失败文件",statusPrompt:" 个文件已上传！ ",flashVersionError:"当前Flash版本过低，请更新FlashPlayer后重试！",flashLoadingError:"Flash加载失败!请检查路径或网络状态",fileUploadReady:"等待上传……",delUploadQueue:"从上传队列中移除",limitPrompt1:"单次不能选择超过",limitPrompt2:"个文件！请重新选择！",delFailFile:"移除失败文件",fileSizeLimit:"文件大小超出限制！",emptyFile:"空文件无法上传！",fileTypeError:"文件类型错误！",unknownError:"未知错误！",fileUploading:"上传中，请等待……",cancelUpload:"取消上传",netError:"网络错误",failUpload:"上传失败!",serverIOError:"服务器IO错误！",noAuthority:"无权限！",fileNumLimit:"上传个数限制",failCheck:"验证失败，本次上传被跳过！",fileCanceling:"取消中，请等待……",stopUploading:"上传已停止……"},highlightcode:{"static":{lang_input_selectLang:"选择语言"},importCode:"请输入代码"},emotion:{"static":{lang_input_choice:"精选",lang_input_Tuzki:"兔斯基",lang_input_BOBO:"BOBO",lang_input_lvdouwa:"绿豆蛙",lang_input_babyCat:"baby猫",lang_input_bubble:"泡泡",lang_input_youa:"有啊"}},gmap:{"static":{lang_input_address:"地址",lang_input_search:"搜索",address:{value:"北京"}},searchError:"无法定位到该地址!"},help:{"static":{lang_input_about:"关于UEditor",lang_input_shortcuts:"快捷键",lang_input_version:"版本:1.2.6",lang_input_introduction:"UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。",lang_Txt_shortcuts:"快捷键",lang_Txt_func:"功能",lang_Txt_bold:"给选中字设置为加粗",lang_Txt_copy:"复制选中内容",lang_Txt_cut:"剪切选中内容",lang_Txt_Paste:"粘贴",lang_Txt_undo:"重新执行上次操作",lang_Txt_redo:"撤销上一次操作",lang_Txt_italic:"给选中字设置为斜体",lang_Txt_underline:"给选中字加下划线",lang_Txt_selectAll:"全部选中",lang_Txt_visualEnter:"软回车",lang_Txt_fullscreen:"全屏"}},insertframe:{"static":{lang_input_address:"地址：",lang_input_width:"宽度：",lang_input_height:"高度：",lang_input_isScroll:"允许滚动条：",lang_input_frameborder:"显示框架边框：",lang_input_alignMode:"对齐方式：",align:{title:"对齐方式",options:["默认","左对齐","右对齐","居中"]}},enterAddress:"请输入地址!"},link:{"static":{lang_input_text:"文本内容：",lang_input_url:"链接地址：",lang_input_title:"标题：",lang_input_target:"是否在新窗口打开："},validLink:"只支持选中一个链接时生效",httpPrompt:"您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀"},map:{"static":{lang_city:"城市",lang_address:"地址",city:{value:"北京"},lang_search:"搜索"},cityMsg:"请选择城市",errorMsg:"抱歉，找不到该位置！"},searchreplace:{"static":{lang_tab_search:"查找",lang_tab_replace:"替换",lang_search1:"查找",lang_search2:"查找",lang_replace:"替换",lang_searchReg:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_searchReg1:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_case_sensitive1:"区分大小写",lang_case_sensitive2:"区分大小写",nextFindBtn:{value:"下一个"},preFindBtn:{value:"上一个"},nextReplaceBtn:{value:"下一个"},preReplaceBtn:{value:"上一个"},repalceBtn:{value:"替换"},repalceAllBtn:{value:"全部替换"}},getEnd:"已经搜索到文章末尾！",getStart:"已经搜索到文章头部",countMsg:"总共替换了{#count}处！"},snapscreen:{"static":{lang_showMsg:"截图功能需要首先安装UEditor截图插件！ ",lang_download:"点此下载",lang_step1:"第一步，下载UEditor截图插件并运行安装。",lang_step2:"第二不，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"}},insertvideo:{"static":{lang_tab_insertV:"插入视频",lang_video_url:"视频网址",lang_video_size:"视频尺寸",lang_videoW:"宽度",lang_videoH:"高度",lang_alignment:"对齐方式",videoSearchTxt:{value:"请输入搜索关键字！"},videoType:{options:["全部","热门","娱乐","搞笑","体育","科技","综艺"]},videoSearchBtn:{value:"百度一下"},videoSearchReset:{value:"清空结果"}},numError:"请输入正确的数值，如123,400",floatLeft:"左浮动",floatRight:"右浮动","default":"默认",block:"独占一行",urlError:"输入的视频地址有误，请检查后再试！",loading:" &nbsp;视频加载中，请等待……",clickToSelect:"点击选中",goToSource:"访问源视频",noVideo:" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！"},spechars:{"static":{},tsfh:"特殊字符",lmsz:"罗马字符",szfh:"数学字符",rwfh:"日文字符",xlzm:"希腊字母",ewzm:"俄文字符",pyzm:"拼音字母",zyzf:"注音及其他"},edittable:{"static":{lang_tableStyle:"表格样式",lang_insertCaption:"添加表格标题行",lang_insertTitle:"添加表格名称行",lang_orderbycontent:"使表格内容可排序",lang_tableSize:"自动调整表格尺寸",lang_autoSizeContent:"按表格文字自适应",lang_autoSizePage:"按页面宽度自适应",lang_example:"示例",lang_borderStyle:"表格边框",lang_color:"颜色:"},captionName:"表格名称",titleName:"标题",cellsName:"内容"},edittip:{"static":{lang_delRow:"删除整行",lang_delCol:"删除整列"}},edittd:{"static":{lang_tdBkColor:"背景颜色:"}},formula:{"static":{}},wordimage:{"static":{lang_resave:"转存步骤",uploadBtn:{src:"upload.png",alt:"上传"},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"},fileType:"图片",flashError:"FLASH初始化失败，请检查FLASH插件是否正确安装！",netError:"网络连接错误，请重试！",copySuccess:"图片地址已经复制！",flashI18n:{}}},n.exports=i.I18N["zh-cn"]
});